"use strict";(self.webpackChunkclient_admin_v102=self.webpackChunkclient_admin_v102||[]).push([[6721],{6858:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(1413),a=n(7294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},o=n(7041),l=function(e,t){return a.createElement(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:c}))};l.displayName="SearchOutlined";var u=a.forwardRef(l)},6419:function(e,t,n){n.d(t,{c4:function(){return c}});var r=n(4942),a=n(7462),c=["xxl","xl","lg","md","sm","xs"],o={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},l=new Map,u=-1,i={},s={matchHandlers:{},dispatch:function(e){return i=e,l.forEach((function(e){return e(i)})),l.size>=1},subscribe:function(e){return l.size||this.register(),u+=1,l.set(u,e),e(i),u},unsubscribe:function(e){l.delete(e),l.size||this.unregister()},unregister:function(){var e=this;Object.keys(o).forEach((function(t){var n=o[t],r=e.matchHandlers[n];null==r||r.mql.removeListener(null==r?void 0:r.listener)})),l.clear()},register:function(){var e=this;Object.keys(o).forEach((function(t){var n=o[t],c=function(n){var c=n.matches;e.dispatch((0,a.Z)((0,a.Z)({},i),(0,r.Z)({},t,c)))},l=window.matchMedia(n);l.addListener(c),e.matchHandlers[n]={mql:l,listener:c},c(l)}))}};t.ZP=s},3607:function(e,t,n){n.d(t,{F:function(){return l},Z:function(){return o}});var r=n(4942),a=n(5900),c=n.n(a);(0,n(4224).b)("warning","error","");function o(e,t,n){var a;return c()((a={},(0,r.Z)(a,"".concat(e,"-status-success"),"success"===t),(0,r.Z)(a,"".concat(e,"-status-warning"),"warning"===t),(0,r.Z)(a,"".concat(e,"-status-error"),"error"===t),(0,r.Z)(a,"".concat(e,"-status-validating"),"validating"===t),(0,r.Z)(a,"".concat(e,"-has-feedback"),n),a))}var l=function(e,t){return t||e}},5766:function(e,t,n){n.d(t,{RV:function(){return u},Rk:function(){return i},aM:function(){return s},ap:function(){return m},q3:function(){return o},qI:function(){return l}});var r=n(7294),a=n(8613),c=n(9062),o=r.createContext({labelAlign:"right",vertical:!1,itemRef:function(){}}),l=r.createContext(null),u=function(e){var t=(0,a.Z)(e,["prefixCls"]);return r.createElement(c.RV,t)},i=r.createContext({prefixCls:""}),s=r.createContext({}),m=function(e){var t=e.children,n=(0,r.useMemo)((function(){return{}}),[]);return r.createElement(s.Provider,{value:n},t)}},2304:function(e,t,n){var r=(0,n(7294).createContext)({});t.Z=r},7482:function(e,t,n){var r=n(4942),a=n(7462),c=n(1002),o=n(7294),l=n(5900),u=n.n(l),i=n(2304),s=n(2525),m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};var f=["xs","sm","md","lg","xl","xxl"],d=o.forwardRef((function(e,t){var n,l=o.useContext(s.E_),d=l.getPrefixCls,p=l.direction,v=o.useContext(i.Z),h=v.gutter,y=v.wrap,Z=v.supportFlexGap,E=e.prefixCls,g=e.span,b=e.order,x=e.offset,w=e.push,C=e.pull,_=e.className,A=e.children,O=e.flex,P=e.style,j=m(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),k=d("col",E),q={};f.forEach((function(t){var n,o={},l=e[t];"number"==typeof l?o.span=l:"object"===(0,c.Z)(l)&&(o=l||{}),delete j[t],q=(0,a.Z)((0,a.Z)({},q),(n={},(0,r.Z)(n,"".concat(k,"-").concat(t,"-").concat(o.span),void 0!==o.span),(0,r.Z)(n,"".concat(k,"-").concat(t,"-order-").concat(o.order),o.order||0===o.order),(0,r.Z)(n,"".concat(k,"-").concat(t,"-offset-").concat(o.offset),o.offset||0===o.offset),(0,r.Z)(n,"".concat(k,"-").concat(t,"-push-").concat(o.push),o.push||0===o.push),(0,r.Z)(n,"".concat(k,"-").concat(t,"-pull-").concat(o.pull),o.pull||0===o.pull),(0,r.Z)(n,"".concat(k,"-rtl"),"rtl"===p),n))}));var S=u()(k,(n={},(0,r.Z)(n,"".concat(k,"-").concat(g),void 0!==g),(0,r.Z)(n,"".concat(k,"-order-").concat(b),b),(0,r.Z)(n,"".concat(k,"-offset-").concat(x),x),(0,r.Z)(n,"".concat(k,"-push-").concat(w),w),(0,r.Z)(n,"".concat(k,"-pull-").concat(C),C),n),_,q),R={};if(h&&h[0]>0){var M=h[0]/2;R.paddingLeft=M,R.paddingRight=M}if(h&&h[1]>0&&!Z){var Y=h[1]/2;R.paddingTop=Y,R.paddingBottom=Y}return O&&(R.flex=function(e){return"number"==typeof e?"".concat(e," ").concat(e," auto"):/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?"0 0 ".concat(e):e}(O),!1!==y||R.minWidth||(R.minWidth=0)),o.createElement("div",(0,a.Z)({},j,{style:(0,a.Z)((0,a.Z)({},R),P),className:S,ref:t}),A)}));d.displayName="Col",t.Z=d},4498:function(e,t,n){var r=n(7462),a=n(4942),c=n(1002),o=n(9439),l=n(7294),u=n(5900),i=n.n(u),s=n(2525),m=n(2304),f=n(4224),d=n(6419),p=n(3086),v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},h=((0,f.b)("top","middle","bottom","stretch"),(0,f.b)("start","end","center","space-around","space-between","space-evenly"),l.forwardRef((function(e,t){var n,u=e.prefixCls,f=e.justify,h=e.align,y=e.className,Z=e.style,E=e.children,g=e.gutter,b=void 0===g?0:g,x=e.wrap,w=v(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),C=l.useContext(s.E_),_=C.getPrefixCls,A=C.direction,O=l.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),P=(0,o.Z)(O,2),j=P[0],k=P[1],q=(0,p.Z)(),S=l.useRef(b);l.useEffect((function(){var e=d.ZP.subscribe((function(e){var t=S.current||0;(!Array.isArray(t)&&"object"===(0,c.Z)(t)||Array.isArray(t)&&("object"===(0,c.Z)(t[0])||"object"===(0,c.Z)(t[1])))&&k(e)}));return function(){return d.ZP.unsubscribe(e)}}),[]);var R,M=_("row",u),Y=(R=[0,0],(Array.isArray(b)?b:[b,0]).forEach((function(e,t){if("object"===(0,c.Z)(e))for(var n=0;n<d.c4.length;n++){var r=d.c4[n];if(j[r]&&void 0!==e[r]){R[t]=e[r];break}}else R[t]=e||0})),R),D=i()(M,(n={},(0,a.Z)(n,"".concat(M,"-no-wrap"),!1===x),(0,a.Z)(n,"".concat(M,"-").concat(f),f),(0,a.Z)(n,"".concat(M,"-").concat(h),h),(0,a.Z)(n,"".concat(M,"-rtl"),"rtl"===A),n),y),F={},H=Y[0]>0?Y[0]/-2:void 0,N=Y[1]>0?Y[1]/-2:void 0;if(H&&(F.marginLeft=H,F.marginRight=H),q){var V=(0,o.Z)(Y,2);F.rowGap=V[1]}else N&&(F.marginTop=N,F.marginBottom=N);var z=(0,o.Z)(Y,2),L=z[0],I=z[1],B=l.useMemo((function(){return{gutter:[L,I],wrap:x,supportFlexGap:q}}),[L,I,x,q]);return l.createElement(m.Z.Provider,{value:B},l.createElement("div",(0,r.Z)({},w,{className:D,style:(0,r.Z)((0,r.Z)({},F),Z),ref:t}),E))})));h.displayName="Row",t.Z=h},739:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var r=n(7294),a=n(4564),c=n(262),o=n(3148),l=n(6452),u=n(7371),i=n(2889),s=n(3299),m=n(6858),f={add_time:"下单时间"},d=function(e){var t=e.paramsObj,n=void 0===t?{}:t,a=(0,r.useState)(""),c=a[0],o=a[1];(0,r.useEffect)((function(){l()}),[n]);var l=function(){var e="";Object.keys(n).forEach((function(t){if(Object.keys(f).includes(t)){var r=" "+f[t]+" = "+n[t]+";";e+=r}})),e.length>2?o(e="查询条件:"+e):(console.log("查询条件为空"),o(""))};return r.createElement("div",{style:{height:"auto",width:"100%",padding:"0.1rem 0.2rem"}},c.length>2?r.createElement("h6",null,c):null)},p=n(6411),v=n(8146),h=n(6079),y=p.Z.Option,Z=["YYYY-MM-DD","YYYY-MM"],E=n(3964),g=function(e,t){var n=Z[e];return t.format(n)},b=function(e){var t=e.visible,n=e.setVisible,a=e.queryHandle,c=(0,r.useState)(0),o=c[0],l=c[1],i=(0,r.useState)(E().format("YYYY-MM-DD")),m=i[0],f=i[1];(0,r.useEffect)((function(){f(g(o,E(m)))}),[o]);var d=function(e){f(g(o,e))};return r.createElement(r.Fragment,null,r.createElement(v.Z,{title:"请选择销售日期",height:"300px",placement:"top",onClose:function(){return n(0)},visible:2===t,bodyStyle:{paddingBottom:20},footer:r.createElement(s.Z,{style:{margin:"0 2rem"},type:"primary",onClick:function(){console.log(m),a({add_time:m}),n(0)}},"提交")},r.createElement(u.Z,{direction:"vertical"},r.createElement(p.Z,{defaultValue:0,style:{width:120},onChange:function(e){l(e)}},r.createElement(y,{value:0},"按日统计"),r.createElement(y,{value:1},"按月统计")),0===o?r.createElement(h.Z,{value:E(m),size:"large",onSelect:d}):r.createElement(h.Z,{value:E(m),size:"large",onSelect:d,picker:"month"}))))};b.defaultProps={visible:!1,setVisible:function(e){console.log(e)},queryHandle:function(e){console.log(e)}};var x=b,w=n(3964),C=n.n(w),_=n(3229),A=n(5455),O=A.Z.salePlatforms,P=A.Z.payMethods,j=function(e){var t=e.purchaseRecords,n=e.queryFactor,a=(0,r.useState)(""),c=a[0],o=a[1];(0,r.useEffect)((function(){var e=n.add_time?n.add_time:"";o(e)}),[n]);return r.createElement("div",null,r.createElement(_.S,{header:r.createElement("h4",{style:{color:"gray"}},c," 订单统计列表"),listData:t,randerItem:function(e){var t="",n=e.customer_info;n&&"object"==typeof n&&Object.keys(n).includes("name")&&Object.keys(n).includes("wx_nick_name")&&(t=n.name,t=n.wx_nick_name.length>0?t+"("+n.wx_nick_name+")":t);var a="R:"+e.diopter_r+"; L:"+e.diopter_l,c="R:; L:"===a?null:r.createElement("p",null,a),o={id:e.id,actions:[],img:"",avatar:"",title:"订单ID: "+e.id+";  顾客: "+t,description:"下单时间: "+C()(e.add_time).format("YYYY-MM-DD HH:mm:ss"),content:r.createElement("div",null,r.createElement("p",null,"商品:",e.product_title),c,r.createElement("p",null,"交易平台: ",O[e.sale_platform],"; 商品数量: ",e.products_quantity),r.createElement("p",null,"订单金额: ",e.purchase_amount,"; 付款方式: ",P[e.pay_platform]),r.createElement("p",null,"成本: ",e.products_cost))};return(0,_.l)(o,10)}}))};j.defaultProps={purchaseRecords:[],queryFactor:{}};var k=j,q=n(8654),S=n(6306),R=function(e){var t=e.visible,n=e.setVisible,a=e.purchaseRecords,c=e.queryFactor,o=(0,r.useState)({totalAmount:0,totalCostAmount:0,recordsCounts:0,taobaoAmount:0,wxAmount:0,alipayAmount:0,cardAmount:0,moneyAmount:0,unknownPayMethodAmount:0}),l=o[0],u=o[1],i=(0,r.useState)(""),s=i[0],m=i[1];return(0,r.useEffect)((function(){1===t&&function(){for(var e=0,t=0,n=0,r=0,c=0,o=0,l=0,i=0,s=0,m=0;m<a.length;m++){var f=a[m];n+=1,t+=f.products_cost?parseFloat(f.products_cost):0;var d=f.purchase_amount?parseFloat(f.purchase_amount):0;e+=d,r=2===f.sale_platform?r+d:r,c=1===f.pay_platform?c+d:c,o=2===f.pay_platform?o+d:o,i=3===f.pay_platform?i+d:i,l=4===f.pay_platform?l+d:l,s=0===f.pay_platform?s+d:s}u({totalAmount:e,totalCostAmount:t,recordsCounts:n,taobaoAmount:r,wxAmount:c,alipayAmount:o,cardAmount:i,moneyAmount:l,unknownPayMethodAmount:s})}()}),[t]),(0,r.useEffect)((function(){var e=c.add_time?c.add_time:"";m(e)}),[c]),r.createElement(q.Z,{visible:1===t,title:s+" 销售汇总",closable:!1,onOk:function(){return n(0)},onCancel:function(){return n(0)},width:"80%"},r.createElement("p",null,"总销售金额: ",l.totalAmount),r.createElement("p",null,"总成本: ",l.totalCostAmount),r.createElement("p",null,"订单总数量: ",l.recordsCounts),r.createElement(S.Z,null),r.createElement("p",null,"淘宝订单总金额: ",l.taobaoAmount),r.createElement(S.Z,null),r.createElement("p",null,"微信收款总金额: ",l.wxAmount),r.createElement("p",null,"支付宝收款总金额: ",l.alipayAmount),r.createElement("p",null,"刷卡总金额: ",l.cardAmount),r.createElement("p",null,"现金总金额: ",l.moneyAmount),r.createElement("p",null,"未知收款方式总金额: ",l.unknownPayMethodAmount))};R.defaultProps={visible:0,setVisible:function(e){return console.log(e)},purchaseRecords:[],queryFactor:{}};var M=R,Y=n(5604),D=["records-admin/v1/purchaserecordstatistic"],F=function(e){var t=e.requestCount,n=e.reqParams,a=e.responseDataHandle,c=D[0];return r.createElement(Y.Z,{responseDataHandle:a,api:c,method:"get",reqParams:n,reqObject:{},requestCount:t})};F.defaultProps={requestCount:0,reqParams:{},responseDataHandle:function(e){console.log(e)}};var H=function(){var e=(0,r.useState)([]),t=e[0],n=e[1],a=(0,r.useState)({add_time:"2020-10"}),c=a[0],f=a[1],p=(0,r.useState)(0),v=p[0],h=p[1],y=(0,r.useState)(0),Z=y[0],E=y[1],g=(0,r.useState)(!1),b=g[0],w=g[1];(0,r.useEffect)((function(){b&&(console.log("requesting..."),w(!1),E(Z+1))}),[b]);return r.createElement("div",null,r.createElement(o.Z,null,r.createElement(l.Z,{span:14},r.createElement(u.Z,{size:"middle"},r.createElement("h5",null,"Purchase Records Statistic(订单统计)"),r.createElement(i.Z,{title:"选择日期"},r.createElement(s.Z,{onClick:function(){return h(2)},shape:"circle",icon:r.createElement(m.Z,null)})))),r.createElement(l.Z,{span:10},r.createElement("div",{style:{width:"100%",height:"auto"}},r.createElement(s.Z,{style:{float:"right"},type:"link",onClick:function(){return h(1)}},"汇总")))),r.createElement(o.Z,null,r.createElement(l.Z,{span:24},r.createElement(d,{paramsObj:c}))),r.createElement(x,{visible:v,setVisible:h,queryHandle:function(e){f(Object.assign({},e)),w(!0),console.log("search...")}}),r.createElement(F,{requestCount:Z,reqParams:c,responseDataHandle:function(e){n(e.results)}}),r.createElement(k,{purchaseRecords:t,queryFactor:c}),r.createElement(M,{visible:v,setVisible:h,purchaseRecords:t,queryFactor:c}))},N=function(){return r.createElement(a.Z,null,r.createElement(c.Z,{title:"StatisticPurchaseRecords"}),r.createElement(H,null))}}}]);
//# sourceMappingURL=component---src-pages-statisticrecords-js-9ec575d750c25abdbb35.js.map