{"version":3,"sources":["webpack:///./src/components/select_sale_platform/index.js","webpack:///./src/components/customer_list/customer_requests.js","webpack:///./src/components/overall_loading/index.js","webpack:///./src/components/upload_files/sts_upload_file.js","webpack:///./src/components/customer_list/customer_columns_labels_config.js","webpack:///./src/components/customer_list/customer_create.js","webpack:///./src/components/customer_list/customer_info.js","webpack:///./src/components/customer_list/customer_list.js","webpack:///./src/components/customer_list/index.js","webpack:///./src/components/upload_files/uploadSingleFileHandle.js"],"names":["SelectSalePlatform","value","onChange","options","label","customerOrWxBaseApis","CustomerInfoRequestPost","requestCount","reqObject","responseDataHandle","api","method","reqParams","defaultProps","respObj","console","log","CustomerInfoRequestPut","customerOrWx","customerOrWxId","useRef","useEffect","current","GetCustomerInfo","customerId","useState","setRequestCount","id","GetCustomerWxInfo","customer_id","OverallLoading","spinning","showLoading","setShowLoading","divStyle","display","className","style","size","StsUploadFile","oldImageUrl","avatarSize","uploadedResponseHandle","fileKey","cleanFileListCount","selectedFileObj","stsTemporaryObj","cos_name","uploadedFileUrl","setUploadedFileUrl","temporaryKeyRequestCount","setTemporaryKeyRequestCount","temporaryKeyRequestObj","showOldImageUrl","setShowOldImageUrl","showUploadButton","setShowUploadButton","deleteCurrentImage","Object","keys","length","getAuthorization","callback","stsObj","credentials","TmpSecretId","tmpSecretId","TmpSecretKey","tmpSecretKey","XCosSecurityToken","sessionToken","StartTime","startTime","ExpiredTime","expiredTime","uploadSingleFileProps","fileList","beforeUpload","file","direction","src","width","gutter","span","textAlign","onClick","includes","sts_obj","image_cos_name","window","require","putObject","cosConfig","Key","Body","onProgress","progressData","JSON","stringify","err","data","image_cos_name_url","message","success","error","responseObj","customerInfoObjKeys","customerInfoObjInitialValues","wxInfoObjKeys","disabledKeys","formKeyLabelObj","formKeySelectComponentsObj","is_valid","custormer_category","wx_gender","notShowKey","formCommonStyle","customConfig","styleLayoutForm","layoutForm","styleFormItemLayout","formItemLayout","styleTailFormItemLayout","tailFormItemLayout","CustomerCreateModal","modalState","setModalState","form","Form","useForm","showOverallLoading","setShowOverallLoding","avatarCosKeyNameObj","cleanUploadedAvataListCount","setCleanUploadedAvataListCount","setFieldsValue","title","getContainer","visible","footer","closable","uploadedAvatar","layout","onFinish","values","name","map","key","disabled","currentLabel","Item","toString","initialValue","placeholder","type","htmlType","labelCol","wrapperCol","xs","sm","offset","CustomerOrWxInfoForm","customerInfoObj","infoOrWx","showListOrDetail","setShowOverallLoading","customerObj","setCustomerObj","customerAvatarUrl","setCustomerAvatarUrl","cleanAvatarCount","avatarCosName","avatarEdited","avatarUrl","wx_avatar","avatar","alt","height","obj","deepcopyObj","currentInputValue","respData","setTimeout","CustomerOrWxInfo","customerOrWxInfoObj","customerOrWxInfoObjKeys","isInfoObj","isWxObj","forEach","val","listOrDetail","LoadMore","sendGetRequest","showLoadMoreButton","marginTop","lineHeight","WxList","customerData","selectCustomerHandle","showListCount","showListOrForm","setShowListOrForm","selectedWxObj","setSelectedWxObj","wxObj","itemLayout","loadMore","dataSource","renderItem","item","actions","Meta","wx_nickname","wx_province","wx_city","memo_name","description","explains","CustomerList","mobile","address","CustomerWxOrInfoList","wxOrInfo","info","Search","Input","Option","Select","clickCreatedCustomerHandle","createCustomerModalState","setCreateCustomerModalState","setShowListCount","searchNickname","customerDataList","setCustomerDataList","searchCustomerType","customerWxOrInfoList","setCustomerWxOrInfoList","requestPage","maxPage","setShowLoadMoreButton","getParams","defaultValue","apisListConcat","concat","onSearch","nickname","enterButton","code","cusotmerRespomseResults","results","count","respMaxPage","Math","ceil","Number","createdCustomerObj","UploadSingleFileHandle","setFileList","action","apiBaseUrl","headers","authorization","getToken","slice","status","response"],"mappings":"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","file":"510198d6d6e9c6791f1833a2f2a373ab2fc92138-08db5c569b31a8e53fa0.js","sourcesContent":["import React from 'react';\nimport { CustomSelect } from '../base_components/select_component';\n\n// 选择销售平台\n\nconst SelectSalePlatform = ({ value, onChange }) => (<CustomSelect\n  value={value}\n  onChange={onChange}\n  options={[\n    { value: 0, label: '未知' },\n    { value: 1, label: '门店' },\n    { value: 2, label: '淘宝' },\n    { value: 3, label: '小程序' },\n    { value: 4, label: '微信-方灵芝' },\n    { value: 5, label: '微信-展望眼镜' },\n  ]}\n/>);\n\nexport default SelectSalePlatform;\n","import React, { useState, useRef, useEffect } from 'react';\n\nimport AxiosRequest from '../apis';\n\n// 顾客的request请求\n\nconst customerOrWxBaseApis = ['admin-customer/v1/customer', 'admin-wxinfo/v1/customerwxinfo']\n\nconst CustomerInfoRequestPost = ({ requestCount, reqObject, responseDataHandle }) => {\n  // 新建顾客请求\n  const api = customerOrWxBaseApis[0];\n  const method = 'post';\n  const reqParams = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\n\nCustomerInfoRequestPost.defaultProps = {\n  requestCount: 0,\n  reqObject: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n}\n\nconst CustomerInfoRequestPut = ({ customerOrWx, customerOrWxId, requestCount, reqObject, responseDataHandle }) => {\n  // customerOrWx: 0:customer; 1:微信;\n  // 修改顾客详情信息 put 请求\n  // request请求数据\n  const api = useRef(`${customerOrWxBaseApis[customerOrWx]}/${customerOrWxId}`);\n  const method = 'put';\n  const reqParams = {};\n\n  useEffect(() => {\n    api.current = `${customerOrWxBaseApis[customerOrWx]}/${customerOrWxId}`;\n  }, [customerOrWx, customerOrWxId]);\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api.current} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  )\n\n}\n\nCustomerInfoRequestPut.defaultProps = {\n  customerOrWx: 0,\n  customerOrWxId: 0,\n  requestCount: 0,\n  reqObject: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n};\n\nconst GetCustomerInfo = ({ customerId, responseDataHandle }) => {\n  // 获取顾客详情\n  const [requestCount, setRequestCount] = useState(0);\n  const reqParams = useRef({ id: customerId });\n  const reqObject = useRef({});\n  const api = 'admin-customer/v1/customer';\n  const method = 'get';\n\n  useEffect(() => {\n    reqParams.current = { id: customerId };\n    setRequestCount(requestCount + 1);\n  }, [customerId])\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams.current} reqObject={reqObject.current} requestCount={requestCount}\n    ></AxiosRequest>\n  )\n};\n\nGetCustomerInfo.defaultProps = {\n  customerId: 0,\n  responseDataHandle: (respObj) => { console.log(respObj); },\n}\n\nconst GetCustomerWxInfo = ({ customerId, responseDataHandle }) => {\n  // 获取顾客微信详情\n  const [requestCount, setRequestCount] = useState(0);\n  const reqParams = useRef({ customer_id: customerId });\n  const reqObject = useRef({});\n  const api = 'admin-wxinfo/v1/customerwxinfo';\n  const method = 'get';\n\n  useEffect(() => {\n    if (customerId > 0) {\n      reqParams.current = { customer_id: customerId };\n      setRequestCount(requestCount + 1);\n    }\n  }, [customerId])\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams.current} reqObject={reqObject.current} requestCount={requestCount}\n    ></AxiosRequest>\n  )\n}\n\nGetCustomerWxInfo.defaultProps = {\n  customerId: 0,\n  responseDataHandle: (respObj) => { console.log(respObj); },\n}\n\nexport { CustomerInfoRequestPost,\n  CustomerInfoRequestPut,\n  GetCustomerInfo,\n  GetCustomerWxInfo\n};\n","import React, { useState, useEffect } from 'react';\nimport { Spin } from 'antd';\n\nimport './loading.css';\n\nconst OverallLoading = ({ spinning }) => {\n  // 全局读取中\n  const [showLoading, setShowLoading] = useState(false);\n\n  const divStyle = {\n    display: showLoading ? 'block' : 'none',\n  }\n\n  useEffect(() => {\n    // spinning 更新后 更新divStyle\n    setShowLoading(spinning);\n  }, [spinning]);\n\n  return (\n    <div className=\"overall-loading\" style={divStyle}>\n      <Spin spinning={spinning} size=\"large\" />\n    </div>\n  )\n};\n\nOverallLoading.defaultProps = {\n  spinning: false\n}\n\nexport default OverallLoading;\n","import React, { useRef, useState, useEffect } from 'react';\nimport { Button, Upload, Space, Row, Col, message } from 'antd';\nimport { UploadOutlined, DeleteOutlined } from '@ant-design/icons';\n// import Cos from 'cos-js-sdk-v5';\n\nimport ImageZoom from '../base_components/image_zoom';\nimport { StsTemporaryKeyRequestPost } from './upload_file_requests';\nimport { cosConfig } from './sts_funcs_config';\n\n// sts 上传文件到腾讯云服务器, 服务器端生成临时密钥，浏览器直接上传文件到腾讯云cos\n\nconst StsUploadFile = ({\n  oldImageUrl,\n  avatarSize,\n  uploadedResponseHandle,\n  fileKey,\n  cleanFileListCount,\n}) => {\n  // const Cos = require('cos-js-sdk-v5');\n  const selectedFileObj = useRef({});\n  const stsTemporaryObj = useRef({});\n  const cos_name = useRef('');\n  const [uploadedFileUrl, setUploadedFileUrl] = useState('');\n  const [temporaryKeyRequestCount, setTemporaryKeyRequestCount] = useState(0);\n  const temporaryKeyRequestObj = useRef({});\n\n  const [showOldImageUrl, setShowOldImageUrl] = useState(true);\n  const [showUploadButton, setShowUploadButton] = useState(true);\n\n  useEffect(() => {\n    // 清空fileList\n    // selectedFileObj.current = [];\n    deleteCurrentImage();\n  }, [cleanFileListCount]);\n\n  useEffect(() => {\n    // oldImageUrl 更新后删除 uploadedFileUrl\n    // setFileList([]);\n    selectedFileObj.current = {};\n    setUploadedFileUrl('');\n    setShowOldImageUrl(true);\n  }, [oldImageUrl]);\n\n  useEffect(() => {\n      // 是否显示上传按钮\n      setShowUploadButton(Object.keys(selectedFileObj.current).length === 0);\n    }, [selectedFileObj.current]);\n\n  const getAuthorization = function (options, callback) {\n    // 验证函数\n    const stsObj = { ...stsTemporaryObj.current };\n    const credentials = stsObj.credentials;\n    callback({\n      TmpSecretId: credentials.tmpSecretId,\n      TmpSecretKey: credentials.tmpSecretKey,\n      XCosSecurityToken: credentials.sessionToken,\n      StartTime: stsObj.startTime, // 时间戳，单位秒，如：1580000000，建议返回服务器时间作为签名的开始时间，避免用户浏览器本地时间偏差过大导致签名错误\n      ExpiredTime: stsObj.expiredTime, // 时间戳，单位秒，如：1580000900\n    });\n  };\n\n  const temporaryKeyResponseDataHandle = (respObj) => {\n    // 获取临时密钥后操作\n    console.log(respObj);\n    if (!Object.keys(respObj).includes('image_cos_name')\n      && !Object.keys(respObj).includes('sts_obj')) {\n      console.log('Get temporary key error...');\n      return;\n    }\n    stsTemporaryObj.current = respObj.sts_obj;\n    cos_name.current = respObj.image_cos_name;\n\n    // 上传到腾讯云 bucket\n    if (window === 'undefined') {\n      return;\n    }\n    const Cos = require('cos-js-sdk-v5');\n    const cos = new Cos({ getAuthorization: getAuthorization });\n    cos.putObject({\n      ...cosConfig,\n      Key: cos_name.current,                        /* 必须 */\n      Body: selectedFileObj.current,                // 上传文件对象\n      onProgress: function (progressData) {\n        console.log(JSON.stringify(progressData));\n      }\n    }, function (err, data) {\n      console.log(err || data);\n      if (data) {\n        console.log(data);\n        setUploadedFileUrl(respObj.image_cos_name_url);\n        setShowOldImageUrl(false);\n        // 回调给父组件\n        uploadedResponseHandle(respObj, fileKey);\n        message.success('图片上传成功!');\n      } else {\n        deleteCurrentImage();  //上传失败删除图片\n        message.error('图片上传失败...');\n      }\n    });\n  };\n\n  const uploadSingleFileProps = {\n    // 自定义上传文件操作\n    fileList: [],\n    beforeUpload: file => {\n      selectedFileObj.current = file;\n      setTemporaryKeyRequestCount(temporaryKeyRequestCount + 1);\n      return false;\n    },\n  }\n\n  const deleteCurrentImage = () => {\n    // 删除当前图片\n    uploadedResponseHandle({}, fileKey);\n    setUploadedFileUrl('');\n    // setFileList([]);\n    selectedFileObj.current = {};\n    setShowOldImageUrl(false);\n  }\n\n  return (\n    <div>\n      <Space direction=\"vertical\">\n        <ImageZoom src={showOldImageUrl ? oldImageUrl : uploadedFileUrl} width={avatarSize}></ImageZoom>\n        <Row gutter={10}>\n          <Col span={12}>\n            <div style={{ textAlign: 'left' }}>\n              <Upload {...uploadSingleFileProps}>\n                {showUploadButton ? (<Button size=\"small\"><UploadOutlined /> 更新</Button>) : null}\n              </Upload>\n            </div>\n          </Col>\n          <Col span={12}>\n            {uploadedFileUrl.length > 10 || oldImageUrl.length > 10\n              ? (<Button onClick={deleteCurrentImage} size=\"small\"><DeleteOutlined /> 删除</Button>) : null}\n          </Col>\n        </Row>\n\n        <StsTemporaryKeyRequestPost requestCount={temporaryKeyRequestCount}\n          reqObject={temporaryKeyRequestObj.current}\n          responseDataHandle={temporaryKeyResponseDataHandle}></StsTemporaryKeyRequestPost>\n      </Space>\n    </div>\n  )\n};\n\nStsUploadFile.defaultProps = {\n  oldImageUrl: '',\n  avatarSize: 96,\n  uploadedResponseHandle: (responseObj, fileKey) => {\n    // 上传成功后, 操作 response\n    console.log(responseObj, fileKey);\n  },\n  fileKey: 'image1',\n  cleanFileListCount: 0,\n};\n\nexport default StsUploadFile;\n","import React from 'react';\nimport { CustomSelect } from '../base_components/select_component';\n\n// 顾客form表的配置\n\nconst customerInfoObjKeys = [\"id\", \"name\", \"mobile\", \"email\", \"wx_openid\",\n  \"people_id\", \"address\", \"custormer_category\", \"avatar\", \"add_time\",\n  \"update_time\", \"explains\", \"is_valid\", \"purchase_total_counts\"];\n\nconst customerInfoObjInitialValues = {\"name\": \"\", \"mobile\": \"\", \"email\": \"\",\n\"people_id\": \"\", \"address\": \"\", \"custormer_category\": 1, \"avatar\": \"\",\n\"explains\": \"\", \"is_valid\": true, };\n\nconst wxInfoObjKeys = [\"id\", \"customer_id\", \"wx_nickname\", \"memo_name\", \"wx_session_key\", \"wx_openid\", \"wx_avatar\", \"wx_country\",\n  \"wx_province\", \"wx_city\", \"wx_gender\", \"add_time\", \"update_time\", \"explains\"];\n\nconst disabledKeys = [\n  \"id\", \"customer_id\", \"wx_session_key\", \"wx_openid\", \"add_time\", \"update_time\",\n  \"purchase_total_counts\", \"wx_avatar\", \"avatar\",\n];\n\nconst formKeyLabelObj = {\n  \"id\": \"ID\", \"name\": \"姓名\", \"mobile\": \"手机\", \"email\": \"E-Mail\", \"wx_openid\": \"微信openid\",\n  \"people_id\": \"身份证\", \"address\": \"地址\", \"custormer_category\": \"顾客级别\", \"avatar\": \"头像url\",\n  \"add_time\": \"创建时间\", \"update_time\": \"更新时间\", \"explains\": \"说明\", \"is_valid\": \"有效\",\n  \"purchase_total_counts\": \"订单总数\", \"customer_id\": \"顾客ID\", \"wx_session_key\": \"微信session key\",\n  \"wx_nickname\": \"微信昵称\", \"wx_avatar\": \"微信头像url\", \"wx_country\": \"国家\", \"wx_province\": \"省\",\n  \"wx_city\": \"市\", \"wx_gender\": \"性别\", \"memo_name\": \"备注名称\"\n};\n\nconst SelectBoolean = (<CustomSelect\n  options={[{ value: true, label: '有效' }, { value: false, label: '无效' },]} />);\n\n// 1: 一般顾客, 2: 优质顾客, 3: VIP顾客\nconst SelectCustomerCategory = (<CustomSelect\n  options={[{ value: 1, label: '一般顾客' }, { value: 2, label: '优质顾客' }, { value: 3, label: 'VIP顾客' },]} />);\n\n// 0-未知, 1-男, 2-女\nconst SelectGender = (<CustomSelect\n  options={[{ value: 0, label: '未知' }, { value: 1, label: '男' }, { value: 2, label: '女' },]} />);\n\nconst formKeySelectComponentsObj = {\n  is_valid: SelectBoolean,\n  custormer_category: SelectCustomerCategory,\n  wx_gender: SelectGender\n};\n\nconst notShowKey = ['avatar', 'wx_avatar'];\n\nexport {\n  customerInfoObjKeys,\n  customerInfoObjInitialValues,\n  wxInfoObjKeys,\n  disabledKeys,\n  formKeyLabelObj,\n  formKeySelectComponentsObj,\n  notShowKey\n};\n","import React, { useState, useRef, useEffect } from 'react';\nimport { Modal, Form, Input, Button, message, Space } from 'antd';\n\nimport UploadSingleFileHandle from '../upload_files/uploadSingleFileHandle';\nimport {\n  customerInfoObjKeys,\n  customerInfoObjInitialValues,\n  disabledKeys,\n  formKeyLabelObj,\n  formKeySelectComponentsObj,\n} from './customer_columns_labels_config';\nimport { CustomerInfoRequestPost } from './customer_requests';\nimport OverallLoading from '../overall_loading';\nimport customConfig from '../../custom_config';\n\n// 创建顾客 Form\nconst formCommonStyle = customConfig.formCommonStyle;\nconst styleLayoutForm = formCommonStyle.layoutForm;\nconst styleFormItemLayout = formCommonStyle.formItemLayout;\nconst styleTailFormItemLayout = formCommonStyle.tailFormItemLayout;\n\nconst notShowKey = [\"id\", \"wx_openid\", \"avatar\", \"add_time\", \"update_time\", \"purchase_total_counts\"];\n\nconst CustomerCreateModal = ({ modalState, setModalState, responseDataHandle }) => {\n  const [form] = Form.useForm();\n  const [showOverallLoading, setShowOverallLoding] = useState(false);\n  const avatarCosKeyNameObj = useRef({});\n\n  // request请求数据\n  const reqObject = useRef({});\n  const [requestCount, setRequestCount] = useState(0);\n  const [cleanUploadedAvataListCount, setCleanUploadedAvataListCount] = useState(0);\n\n  useEffect(() => {\n    if (modalState === false) {\n      form.setFieldsValue({ ...customerInfoObjInitialValues });\n    }\n  }, [modalState]);\n\n  const createdCustomerRequestHandle = (respObj) => {\n    // 创建成功后操作\n    setShowOverallLoding(false);\n    responseDataHandle(respObj);\n  };\n\n  const changeCustomerAvatarHandle = (respObj, fileKey) => {\n    // 上传头像后操作\n    let uploadedAvatar = '';\n    if (Object.keys(respObj).includes('image_cos_name')) {\n      uploadedAvatar = respObj.image_cos_name;\n    } else {\n      // 清空上传的文件列表\n      setCleanUploadedAvataListCount(cleanUploadedAvataListCount + 1);\n      message.error('Upload fail...');\n      message.error('上传失败')\n    }\n    avatarCosKeyNameObj.current = { 'avatar': uploadedAvatar };\n  };\n\n  const onFinish = (values) => {\n    // 提交创建表单\n    setShowOverallLoding(true);\n    reqObject.current = { ...values, ...avatarCosKeyNameObj.current };\n    setRequestCount(requestCount + 1);\n  }\n  return (\n    <Modal title=\"创建顾客\"\n      getContainer={false}\n      visible={modalState}\n      footer={null}\n      closable={false}\n    >\n      <OverallLoading spinning={showOverallLoading}></OverallLoading>\n      <div className=\"avatar-box\">\n        <UploadSingleFileHandle uploadedResponseHandle={changeCustomerAvatarHandle} avatarSize={64}\n          fileKey=\"avatar\" cleanFileListCount={cleanUploadedAvataListCount}></UploadSingleFileHandle>\n      </div>\n      <Form {...styleLayoutForm} form={form} layout=\"horizontal\" onFinish={onFinish} name=\"dynamic_rule\">\n        {customerInfoObjKeys.map((key) => {\n          if (notShowKey.includes(key)) {\n            return null;\n          }\n          const disabled = disabledKeys.includes(key);  // 是否可以编辑输入框\n          const currentLabel = formKeyLabelObj[key];\n          return (\n            <Form.Item\n              {...styleFormItemLayout}\n              name={key}\n              label={currentLabel}\n              key={key.toString()}\n              initialValue={customerInfoObjInitialValues[key]}\n            >\n              {Object.keys(formKeySelectComponentsObj).includes(key)\n                ? formKeySelectComponentsObj[key]\n                : <Input placeholder={`请输入 ${currentLabel}`} disabled={disabled} />}\n            </Form.Item>\n          )\n        })}\n\n        <Form.Item {...styleTailFormItemLayout}>\n          <Space>\n            <Button type=\"primary\" htmlType=\"submit\">创建</Button>\n            <Button onClick={() => { setModalState(false); }}>取消</Button>\n          </Space>\n        </Form.Item>\n\n        <Form.Item>\n          <CustomerInfoRequestPost\n            requestCount={requestCount}\n            reqObject={reqObject.current}\n            responseDataHandle={createdCustomerRequestHandle}></CustomerInfoRequestPost>\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n};\n\nCustomerCreateModal.defaultProps = {\n  modalState: false,\n  setModalState: (modalState) => { console.log(modalState); },\n  responseDataHandle: (respObj) => {\n    // 创建顾客返回结果后操作\n    console.log(respObj);\n  }\n}\n\nexport default CustomerCreateModal;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { Form, Input, Button, message } from 'antd';\n\nimport { CustomerInfoRequestPut } from './customer_requests';\nimport UploadSingleFileHandle from '../upload_files/uploadSingleFileHandle';\nimport StsUploadFile from '../upload_files/sts_upload_file';\n// import Zmage from 'react-zmage';\nimport OverallLoading from '../overall_loading';\nimport {\n  customerInfoObjKeys,\n  wxInfoObjKeys,\n  disabledKeys,\n  formKeyLabelObj,\n  formKeySelectComponentsObj,\n  notShowKey\n} from './customer_columns_labels_config';\n\nimport './customer_info.css';\n\nconst layoutForm = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 18 },\n};\nconst formItemLayout = {\n  labelCol: {\n    xs: { span: 12 },\n    sm: { span: 10 },\n  },\n  wrapperCol: {\n    xs: { span: 12 },\n    sm: { span: 14 },\n  },\n};\nconst tailFormItemLayout = {\n  wrapperCol: {\n    xs: {\n      span: 24,\n      offset: 2,\n    },\n    sm: {\n      span: 16,\n      offset: 8,\n    },\n  },\n};\n\nconst CustomerOrWxInfoForm = ({ customerInfoObj, infoOrWx, showListOrDetail }) => {\n  // 显示顾客详细信息  infoOrWx: 0-customer表, 1-wxinfo表\n  const [showOverallLoading, setShowOverallLoading] = useState(false);\n  const [customerObj, setCustomerObj] = useState({});\n  const [customerAvatarUrl, setCustomerAvatarUrl] = useState('');\n  const [cleanAvatarCount, setCleanAvatarCount] = useState(0);\n  const avatarCosName = useRef('');\n  const avatarEdited = useRef(false);\n\n  // request请求数据\n  const reqObject = useRef({});\n  const [requestCount, setRequestCount] = useState(0);\n\n  useEffect(() => {\n    // 更新 customerObj\n    console.log(customerInfoObj);\n    setCustomerObj(customerInfoObj);\n    const avatarUrl = infoOrWx > 0 ? customerInfoObj.wx_avatar : customerInfoObj.avatar;\n    setCustomerAvatarUrl(avatarUrl);\n    return function cleanUp() {\n      return null;\n    };\n  }, [customerInfoObj]);\n\n  const onFinish = (obj) => {\n    // 提交表单修改顾客信息\n    // 更新response图片 key value\n    setShowOverallLoading(true);\n    const deepcopyObj = { ...obj };\n    if (avatarEdited.current && infoOrWx === 0) {\n      deepcopyObj.avatar = avatarCosName.current;\n    }\n    console.log(deepcopyObj);\n    setCustomerObj(obj);\n    reqObject.current = deepcopyObj;\n    // infoOrWx: 0-customer表, 1-wxinfo表\n    setRequestCount(requestCount + 1);  // 提交request请求\n  }\n\n  const responseDataHandle = (respData) => {\n    // 接收request数据后操作\n    setShowOverallLoading(false);\n    try {\n      console.log(respData);\n      message.success('Success!');\n      message.success('更新成功(Success)!');\n      setTimeout(() => {\n        showListOrDetail(0);\n      }, 1000);\n    } catch (error) {\n      // 更新用户数据失败\n      console.log(error);\n      message.error('Error...');\n      message.error('Error: 网络错误...');\n    }\n  };\n\n  const changeCustomerAvatarHandle = (respObj, fileKey) => {\n    // 更新顾客头像\n    console.log(fileKey);\n    avatarEdited.current = true;\n    if (Object.keys(respObj).includes('image_cos_name') && respObj.image_cos_name.length > 10) {\n      avatarCosName.current = (respObj.image_cos_name);\n    } else {\n      avatarCosName.current = '';\n      setCustomerAvatarUrl('');\n    }\n  }\n\n  return (\n    <>\n      <OverallLoading spinning={showOverallLoading}></OverallLoading>\n      <div className=\"avatar-box\">\n        {infoOrWx === 0\n          ? (<StsUploadFile\n            oldImageUrl={customerAvatarUrl}\n            avatarSize={64}\n            uploadedResponseHandle={changeCustomerAvatarHandle}\n            cleanFileListCount={cleanAvatarCount} ></StsUploadFile>)\n          : (<img src={customerAvatarUrl} alt=\"Avatar\" height=\"64px\"></img>)}\n      </div>\n      <Form {...layoutForm} layout=\"horizontal\" onFinish={onFinish} name=\"customer_info_edit\">\n        {Object.keys(customerObj).map((key) => {\n          if (notShowKey.includes(key)) {\n            return null;\n          }\n          const disabled = disabledKeys.includes(key);  // 是否可以编辑输入框\n          const currentLabel = formKeyLabelObj[key];\n          let currentInputValue = customerInfoObj[key];\n          return (\n            <Form.Item\n              {...formItemLayout}\n              name={key}\n              label={currentLabel}\n              key={key.toString()}\n              initialValue={currentInputValue}\n            >\n              {Object.keys(formKeySelectComponentsObj).includes(key)\n                ? formKeySelectComponentsObj[key]\n                : <Input placeholder={`请输入 ${currentLabel}`} disabled={disabled} />}\n            </Form.Item>\n          )\n        })}\n\n        <Form.Item {...tailFormItemLayout}>\n          <Button type=\"primary\" htmlType=\"submit\">\n            修改\n          </Button>&nbsp;&nbsp;\n          <Button onClick={() => { showListOrDetail(0); }}>\n            取消\n          </Button>\n        </Form.Item>\n\n        <Form.Item>\n          <CustomerInfoRequestPut\n            customerOrWx={infoOrWx}\n            customerOrWxId={customerInfoObj.id}\n            requestCount={requestCount}\n            reqObject={reqObject.current}\n            responseDataHandle={responseDataHandle}></CustomerInfoRequestPut>\n        </Form.Item>\n      </Form>\n    </>\n  );\n}\n\nconst CustomerOrWxInfo = ({ customerOrWxInfoObj, showListOrDetail }) => {\n  // 显示顾客或顾客微信详细信息; ~~~~~~~~ showListOrDetail 可能存在问题\n  const customerOrWxInfoObjKeys = Object.keys(customerOrWxInfoObj);\n  let isInfoObj = true;\n  let isWxObj = true;\n  customerOrWxInfoObjKeys.forEach((val) => {\n    if (!customerInfoObjKeys.includes(val)) {\n      isInfoObj = false;\n    }\n    if (!wxInfoObjKeys.includes(val)) {\n      isWxObj = false;\n    }\n  })\n  if (isInfoObj && isWxObj) {\n    console.log('Customer object error, too many keys...');\n    return null;\n  }\n  if (!isInfoObj && !isWxObj) {\n    console.log('Customer object error, all keys error...');\n    return null;\n  }\n\n  const infoOrWx = isInfoObj ? 0 : 1;\n  return <CustomerOrWxInfoForm customerInfoObj={customerOrWxInfoObj} infoOrWx={infoOrWx} showListOrDetail={showListOrDetail} />\n}\n\nCustomerOrWxInfo.defaultProps = {\n  customerOrWxInfoObj: {},\n  showListOrDetail: (listOrDetail) => { console.log(`This is Form page! value: ${listOrDetail}`) }\n}\n\nexport default CustomerOrWxInfo;\n","import React, { useState, useEffect } from 'react';\nimport { List, Button, message } from 'antd';\n\nimport CustomerOrWxInfo from './customer_info';\nimport ImageZoom from '../base_components/image_zoom';\n\nconst LoadMore = ({ sendGetRequest, showLoadMoreButton }) => {\n  return (\n    showLoadMoreButton ?\n      (\n        <div style={{\n          textAlign: 'center',\n          marginTop: 12,\n          height: 32,\n          lineHeight: '32px',\n        }}\n        ><Button onClick={sendGetRequest}>loading more</Button>\n        </div>\n      )\n      : null\n  );\n}\n// 顾客列表\nconst WxList = ({ customerData, sendGetRequest, showLoadMoreButton, selectCustomerHandle, showListCount }) => {\n  // 顾客微信列表\n  const [showListOrForm, setShowListOrForm] = useState(0); // 0-显示list, 1-显示form\n  const [selectedWxObj, setSelectedWxObj] = useState({});\n\n  const showListOrDetail = (listOrDetail, wxObj = {}) => {\n    // 显示列表或表单; listOrDetail: 0-显示list, 1-显示form;\n    if (listOrDetail > 0) {\n      // 显示表单\n      setSelectedWxObj(wxObj);\n    }\n    setShowListOrForm(listOrDetail);\n  }\n\n  useEffect(() => {\n    // showListCount 改变显示列表 \n    // console.log('changed: ' + showListCount);\n    showListOrDetail(0);\n  }, [showListCount])\n\n  return (\n    showListOrForm < 1\n      ? (<List itemLayout=\"vertical\"\n        loadMore={<LoadMore sendGetRequest={sendGetRequest} showLoadMoreButton={showLoadMoreButton} />}\n        dataSource={customerData}\n        renderItem={item => (\n          <List.Item\n            actions={[<Button onClick={() => selectCustomerHandle(item)} type=\"link\">选择</Button>, <Button onClick={() => { showListOrDetail(1, item); }} type=\"link\">顾客详情</Button>]}\n          >\n            {/* <Skeleton avatar title={false} loading={item.loading} active> */}\n            <List.Item.Meta\n              avatar={\n                <ImageZoom width={64} alt=\"Image\" src={item.wx_avatar} />\n              }\n              title={`${item.wx_nickname} 住址: ${item.wx_province} ${item.wx_city}; 备注名: ${item.memo_name}`}\n              description={`备注: ${item.explains}`}\n            />\n            {/* </Skeleton> */}\n          </List.Item>\n        )}\n      />)\n      : <CustomerOrWxInfo customerOrWxInfoObj={selectedWxObj} showListOrDetail={showListOrDetail} />\n  )\n}\n\nconst CustomerList = ({ customerData, sendGetRequest, showLoadMoreButton, selectCustomerHandle, showListCount }) => {\n  const [showListOrForm, setShowListOrForm] = useState(0); // 0-显示list, 1-显示form\n  const [selectedWxObj, setSelectedWxObj] = useState({});\n\n  const showListOrDetail = (listOrDetail, wxObj = {}) => {\n    // 显示列表或表单; listOrDetail: 0-显示list, 1-显示form;\n    if (listOrDetail > 0) {\n      // 显示表单\n      setSelectedWxObj(wxObj);\n    }\n    setShowListOrForm(listOrDetail);\n  }\n\n  useEffect(() => {\n    // showListCount 改变显示列表\n    console.log('changed: ' + showListCount);\n    showListOrDetail(0);\n  }, [showListCount]);\n\n  return (\n    showListOrForm < 1\n      ? (<List\n        itemLayout=\"vertical\"\n        loadMore={<LoadMore sendGetRequest={sendGetRequest} showLoadMoreButton={showLoadMoreButton} />}\n        dataSource={customerData}\n        renderItem={item => (\n          <List.Item\n            actions={[<Button onClick={() => selectCustomerHandle(item)} type=\"link\">选择</Button>, <Button onClick={() => { showListOrDetail(1, item); }} type=\"link\">顾客详情</Button>]}\n          >\n            {/* <Skeleton avatar title={false} loading={item.loading} active> */}\n            <List.Item.Meta\n              avatar={\n                <ImageZoom width={64} alt=\"Image\" src={item.avatar} />\n              }\n              title={`姓名: ${item.name}, 手机: ${item.mobile}, 住址: ${item.address};`}\n              description={`备注: ${item.explains}`}\n            />\n            {/* </Skeleton> */}\n          </List.Item>\n        )}\n      />)\n      : <CustomerOrWxInfo customerOrWxInfoObj={selectedWxObj} showListOrDetail={showListOrDetail} />\n  )\n};\n\nconst CustomerWxOrInfoList = ({\n  customerData,\n  wxOrInfo,\n  sendGetRequest,\n  showLoadMoreButton,\n  selectCustomerHandle,\n  showListCount\n}) => {\n  // 显示顾客微信或顾客详情 列表 wxOrInfo > 0 显示顾客详情列表, 等于0 显示顾客微信列表\n\n  return (\n    wxOrInfo > 0 ?\n      <CustomerList\n        customerData={customerData}\n        sendGetRequest={sendGetRequest}\n        showLoadMoreButton={showLoadMoreButton}\n        selectCustomerHandle={selectCustomerHandle}\n        showListCount={showListCount} /> :\n      <WxList\n        customerData={customerData}\n        sendGetRequest={sendGetRequest}\n        showLoadMoreButton={showLoadMoreButton}\n        selectCustomerHandle={selectCustomerHandle}\n        showListCount={showListCount} />\n  )\n}\n\nCustomerWxOrInfoList.defaultProps = {\n  customerData: [],\n  wxOrInfo: 0,\n  sendGetRequest: null,\n  showLoadMoreButton: true,\n  selectCustomerHandle: (customerObj) => {\n    console.log(customerObj);\n    const name = Object.keys(customerObj).includes('name')\n      ? customerObj.name\n      : Object.keys(customerObj).includes('wx_nickname') ? customerObj.wx_nickname : 'Error Object';\n\n    message.info(`Selected ${name} !`);\n    message.info(`选择了 ${name} !`);\n  },\n  showListCount: 0\n};\n\nexport default CustomerWxOrInfoList;\n","import React, { useState, useRef } from 'react';\nimport { Input, Select, message, Button, Space } from 'antd';\n\nimport CreateCustomerModal from './customer_create';\nimport CustomerWxOrInfoList from './customer_list';\n// import { PoweroffOutlined } from '@ant-design/icons';\n\nimport AxiosRequest from '../apis';\nconst { Search } = Input;\nconst { Option } = Select;\n\n// 显示顾客列表\n\nconst CustomerList = ({ selectCustomerHandle, clickCreatedCustomerHandle }) => {\n  const [createCustomerModalState, setCreateCustomerModalState] = useState(false);\n  const [showListCount, setShowListCount] = useState(0);\n\n  const searchNickname = useRef('');\n  const [customerDataList, setCustomerDataList] = useState([]);\n  // 根据微信昵称、顾客姓名或顾客手机号查询顾客\n  const searchCustomerType = useRef('wx_nickname');\n  const [customerWxOrInfoList, setCustomerWxOrInfoList] = useState(0);\n  // request 数据\n  const requestPage = useRef(0);\n  const maxPage = useRef(1);\n\n  const [showLoadMoreButton, setShowLoadMoreButton] = useState(true);\n\n  const api = useRef('admin-wxinfo/v1/customerwxinfo');\n  const method = 'get';\n  const reqParams = useRef({ [searchCustomerType.current]: '', 'page': requestPage })\n  const reqObject = {}\n\n  const [requestCount, setRequestCount] = useState(0);\n\n  const createdCustomerHandle = (respObj) => {\n    // 创建顾客后操作\n    clickCreatedCustomerHandle(respObj);\n    setCreateCustomerModalState(false);\n  }\n\n  const responseDataHandle = (respObj) => {\n    // 把请求加载到\n    if (Object.keys(respObj).includes('code') && respObj.code === 1000) {\n      let cusotmerRespomseResults = customerDataList.concat(respObj.results);\n      setCustomerDataList(cusotmerRespomseResults);\n      if (respObj.count && typeof (respObj.count) !== 'undefined') {\n        let respMaxPage = Math.ceil(Number(respObj.count) / 10);\n        maxPage.current = respMaxPage;\n      } else {\n        maxPage.current = 1;\n      }\n    } else {\n      console.log('Error Request: ', respObj);\n    }\n  }\n\n  const sendGetRequest = () => {\n    // 发送获取顾客列表请求\n    requestPage.current = requestPage.current + 1;\n    if (requestPage.current > maxPage.current) {\n      // requestPage > maxPage 就不发送request请求\n      setShowLoadMoreButton(false);\n      console.log('Not more...');\n      return;\n    } else {\n      setShowLoadMoreButton(true);\n    }\n    let getParams = { [searchCustomerType.current]: searchNickname.current, 'page': requestPage.current };\n    // console.log(getParams);\n    reqParams.current = getParams;\n    setRequestCount(requestCount + 1);\n  }\n\n  const selectSearchCustomerTypeChange = (value) => {\n    // 选择搜索顾客的名称、微信昵称、电话, 默认微信昵称\n    const apisList = ['admin-wxinfo/v1/customerwxinfo', 'admin-customer/v1/customer']\n    searchCustomerType.current = value;\n    let apisListConcat = [].concat(apisList);\n    setCustomerDataList([]);\n    if (value === 'wx_nickname') {\n      api.current = apisListConcat[0];\n      setCustomerWxOrInfoList(0);\n    } else {\n      api.current = apisListConcat[1];\n      setCustomerWxOrInfoList(1);\n    }\n  }\n\n  const searchCustomerWxNickname = (nickname) => {\n    // 顾客微信昵称搜寻顾客\n    setShowListCount(showListCount + 1);\n    setCustomerDataList([]);\n    requestPage.current = 0;\n    maxPage.current = 1;\n    searchNickname.current = nickname;\n    sendGetRequest();\n  }\n\n  return (\n    <div>\n      <CreateCustomerModal modalState={createCustomerModalState} setModalState={setCreateCustomerModalState}\n        responseDataHandle={createdCustomerHandle}></CreateCustomerModal>\n      <Space>\n        <Select defaultValue=\"wx_nickname\" style={{ width: 120 }} onChange={selectSearchCustomerTypeChange}>\n          <Option value=\"wx_nickname\">微信昵称</Option>\n          <Option value=\"name\">顾客姓名</Option>\n          <Option value=\"mobile\">手机号码</Option>\n        </Select>\n        <Button type=\"link\" onClick={() => { setCreateCustomerModalState(true); }}>新建顾客</Button>\n      </Space><br></br><br></br>\n      <Search placeholder=\"搜索顾客微信昵称\" onSearch={searchCustomerWxNickname} enterButton />\n      <br /><br />\n      <CustomerWxOrInfoList\n        selectCustomerHandle={selectCustomerHandle}\n        customerData={customerDataList}\n        wxOrInfo={customerWxOrInfoList}\n        sendGetRequest={sendGetRequest}\n        showLoadMoreButton={showLoadMoreButton}\n        showListCount={showListCount}\n      /><br />\n\n      <AxiosRequest\n        responseDataHandle={responseDataHandle} api={api.current} method={method}\n        reqParams={reqParams.current} reqObject={reqObject} requestCount={requestCount}\n      ></AxiosRequest>\n    </div>\n  )\n}\n\nCustomerList.defaultProps = {\n  selectCustomerHandle: (customerObj) => {\n    console.log(customerObj);\n    const name = Object.keys(customerObj).includes('name')\n      ? customerObj.name\n      : Object.keys(customerObj).includes('wx_nickname') ? customerObj.wx_nickname : 'Error Object';\n\n    message.info(`Selected ${name} !`);\n    message.info(`选择了 ${name} !`);\n  },\n  clickCreatedCustomerHandle: (createdCustomerObj) => { console.log(createdCustomerObj); },\n}\n\nexport default CustomerList;\n","import React, { useState, useEffect } from 'react';\nimport { Space, Upload, Button, message, Row, Col } from 'antd';\nimport { UploadOutlined, DeleteOutlined } from '@ant-design/icons';\n\n// import Zmage from 'react-zmage';\n\n// 上传单张图片到服务器操作\n\nimport ImageZoom from '../base_components/image_zoom';\nimport customConfig from '../../custom_config';\nimport { getToken } from '../../assets/common_funcs/token_handle';\n\nconst UploadSingleFileHandle = ({\n  oldImageUrl,\n  avatarSize,\n  uploadedResponseHandle,\n  fileKey,\n  cleanFileListCount,\n}) => {\n  const [showUploadButton, setShowUploadButton] = useState(true);\n  const [fileList, setFileList] = useState([]);\n  const [uploadedFileUrl, setUploadedFileUrl] = useState('');\n\n  const [showOldImageUrl, setShowOldImageUrl] = useState(true);\n\n  useEffect(() => {\n    setShowUploadButton(fileList.length === 0);\n  }, [fileList]);\n\n  useEffect(() => {\n    // 清空fileList\n    setFileList([]);\n  }, [cleanFileListCount]);\n\n  useEffect(() => {\n    // oldImageUrl 更新后删除 uploadedFileUrl\n    setFileList([]);\n    setUploadedFileUrl('');\n    setShowOldImageUrl(true);\n  }, [oldImageUrl]);\n\n  const uploadSingleFileProps = {\n    name: 'upload-single-file',\n    action: `${customConfig.apiBaseUrl}/files-handle/v1/uploadfiles`,\n    headers: {\n      authorization: getToken(),\n    },\n    fileList: fileList,\n    onChange: (info) => {\n      setFileList(info.fileList.slice()); // Note: A new object must be used here!!!\n      setShowOldImageUrl(false);\n      if (info.file.status === 'done') {\n        message.success(`${info.file.name} file uploaded successfully`);\n\n        const respObj = { ...info.file.response };\n        uploadedResponseHandle(respObj, fileKey);\n\n        // 更新 uploadedFileUrl\n        if (Object.keys(respObj).includes('image_cos_name_url') && respObj.image_cos_name_url.length > 10) {\n          setUploadedFileUrl(respObj.image_cos_name_url);\n        }\n      } else if (info.file.status === 'error') {\n        message.error(`Error: ${info.file.name} file upload failed.`);\n        message.error(`Error: ${info.file.name} 文件上传失败...`);\n        setFileList([]);\n      }\n    },\n  };\n\n  const deleteCurrentImage = () => {\n    // 删除当前图片\n    uploadedResponseHandle({}, fileKey);\n    setUploadedFileUrl('');\n    setFileList([]);\n    setShowOldImageUrl(false);\n  }\n\n  return (\n    <div>\n      <Space direction=\"vertical\">\n        {/* <img alt=\"Image\" height={`${avatarSize}px`}\n          src={showOldImageUrl ? oldImageUrl : uploadedFileUrl} /> */}\n        <ImageZoom src={showOldImageUrl ? oldImageUrl : uploadedFileUrl} width={avatarSize}></ImageZoom>\n        <Row gutter={10}>\n          <Col span={12}>\n            <div style={{ textAlign: 'left' }}>\n              <Upload {...uploadSingleFileProps}>\n                {showUploadButton ? (<Button size=\"small\"><UploadOutlined /> 更新</Button>) : null}\n              </Upload>\n            </div>\n          </Col>\n          <Col span={12}>\n            {uploadedFileUrl.length > 10 || oldImageUrl.length > 10\n              ? (<Button onClick={deleteCurrentImage} size=\"small\"><DeleteOutlined /> 删除</Button>) : null}\n          </Col>\n        </Row>\n      </Space>\n    </div>\n  )\n};\n\nUploadSingleFileHandle.defaultProps = {\n  oldImageUrl: '',\n  avatarSize: 96,\n  uploadedResponseHandle: (responseObj, fileKey) => {\n    // 上传成功后, 操作 response\n    console.log(responseObj, fileKey);\n  },\n  fileKey: 'image1',\n  cleanFileListCount: 0,\n};\n\nexport default UploadSingleFileHandle;\n"],"sourceRoot":""}