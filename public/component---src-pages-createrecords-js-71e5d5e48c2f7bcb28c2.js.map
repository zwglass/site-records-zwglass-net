{"version":3,"sources":["webpack://zwglass-purchase-records/./node_modules/@ant-design/icons-svg/es/asn/SearchOutlined.js","webpack://zwglass-purchase-records/./node_modules/@ant-design/icons/es/icons/SearchOutlined.js","webpack://zwglass-purchase-records/./node_modules/@ant-design/icons-svg/es/asn/FileSyncOutlined.js","webpack://zwglass-purchase-records/./node_modules/@ant-design/icons/es/icons/FileSyncOutlined.js","webpack://zwglass-purchase-records/./src/components/upload_files/index.js","webpack://zwglass-purchase-records/./src/components/create_records/create_records_request.js","webpack://zwglass-purchase-records/./src/components/create_records/index.js","webpack://zwglass-purchase-records/./src/pages/createrecords.js"],"names":["props","ref","AntdIcon","Object","assign","icon","displayName","UploadFile","onChange","defaultFileList","fileList","multiple","maxFiles","useState","showUploadButton","setShowUploadButton","useEffect","length","uploadFileProps","action","customConfig","listType","headers","Authorization","getToken","UploadOutlined","defaultProps","info","console","log","file","CreateRecordRequestPost","requestCount","reqObject","responseDataHandle","api","method","reqParams","Option","Select","formInitObj","customername","diopter_r","diopter_l","pupillary_distance","product_title","products_quantity","purchase_amount","sale_platform","order_state","receive_address","explains","upload","formItemLayout","layout","labelCol","xs","span","sm","wrapperCol","tailFormItemLayout","offset","cleanImagesCount","setCleanImagesCount","spinning","setSpinning","form","Form","showSelectCustomerModal","setShowSelectCustomerModal","selectedCustomerObj","useRef","setRequestCount","uploadedImagesObj","selectCustomerHandle","customerObj","current","objKeys","keys","nickName","includes","name","wx_nickname","setFieldsValue","SelectOrderState","val","Number","defaultValue","value","uploadedImageObj","onFinish","values","deepcopyObj","customer_id","id","initialValues","scrollToFirstError","label","extra","gutter","noStyle","disabled","title","type","onClick","shape","SearchOutlined","min","max","formatter","replace","parser","size","htmlType","navigate","respObj","code","message","visible","footer","key","clickCreatedCustomerHandle"],"mappings":"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","file":"component---src-pages-createrecords-js-71e5d5e48c2f7bcb28c2.js","sourcesContent":["// This icon file is generated automatically.\nvar SearchOutlined = {\n  \"icon\": {\n    \"tag\": \"svg\",\n    \"attrs\": {\n      \"viewBox\": \"64 64 896 896\",\n      \"focusable\": \"false\"\n    },\n    \"children\": [{\n      \"tag\": \"path\",\n      \"attrs\": {\n        \"d\": \"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z\"\n      }\n    }]\n  },\n  \"name\": \"search\",\n  \"theme\": \"outlined\"\n};\nexport default SearchOutlined;","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport SearchOutlinedSvg from \"@ant-design/icons-svg/es/asn/SearchOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar SearchOutlined = function SearchOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: SearchOutlinedSvg\n  }));\n};\n\nSearchOutlined.displayName = 'SearchOutlined';\nexport default React.forwardRef(SearchOutlined);","// This icon file is generated automatically.\nvar FileSyncOutlined = {\n  \"icon\": {\n    \"tag\": \"svg\",\n    \"attrs\": {\n      \"viewBox\": \"64 64 896 896\",\n      \"focusable\": \"false\"\n    },\n    \"children\": [{\n      \"tag\": \"path\",\n      \"attrs\": {\n        \"d\": \"M296 256c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm192 200v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8zm-48 396H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm104.1-115.6c1.8-34.5 16.2-66.8 40.8-91.4 26.2-26.2 62-41 99.1-41 37.4 0 72.6 14.6 99.1 41 3.2 3.2 6.3 6.6 9.2 10.1L769.2 673a8 8 0 003 14.1l93.3 22.5c5 1.2 9.8-2.6 9.9-7.7l.6-95.4a8 8 0 00-12.9-6.4l-20.3 15.8C805.4 569.6 748.1 540 684 540c-109.9 0-199.6 86.9-204 195.7-.2 4.5 3.5 8.3 8 8.3h48.1c4.3 0 7.8-3.3 8-7.6zM880 744h-48.1c-4.3 0-7.8 3.3-8 7.6-1.8 34.5-16.2 66.8-40.8 91.4-26.2 26.2-62 41-99.1 41-37.4 0-72.6-14.6-99.1-41-3.2-3.2-6.3-6.6-9.2-10.1l23.1-17.9a8 8 0 00-3-14.1l-93.3-22.5c-5-1.2-9.8 2.6-9.9 7.7l-.6 95.4a8 8 0 0012.9 6.4l20.3-15.8C562.6 918.4 619.9 948 684 948c109.9 0 199.6-86.9 204-195.7.2-4.5-3.5-8.3-8-8.3z\"\n      }\n    }]\n  },\n  \"name\": \"file-sync\",\n  \"theme\": \"outlined\"\n};\nexport default FileSyncOutlined;","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport FileSyncOutlinedSvg from \"@ant-design/icons-svg/es/asn/FileSyncOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar FileSyncOutlined = function FileSyncOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: FileSyncOutlinedSvg\n  }));\n};\n\nFileSyncOutlined.displayName = 'FileSyncOutlined';\nexport default React.forwardRef(FileSyncOutlined);","import React, { useState, useEffect } from 'react';\nimport { Upload, Button } from 'antd';\nimport { UploadOutlined } from '@ant-design/icons';\n\nimport customConfig from '../../custom_config';\n\nimport { getToken } from '../../assets/common_funcs/token_handle';\n\nconst UploadFile = ({ onChange, defaultFileList, fileList, multiple, maxFiles }) => {\n  // 上传文件组件\n  const [showUploadButton, setShowUploadButton] = useState(true);\n  useEffect(() => {\n    if (fileList.length >= maxFiles) {\n      setShowUploadButton(false);\n    } else {\n      setShowUploadButton(true);\n    }\n  }, [fileList, maxFiles])\n\n  const uploadUrl = 'files-handle/v1/uploadfiles';\n\n  const uploadFileProps = {\n    action: `${customConfig.apiBaseUrl}/${uploadUrl}`,\n    listType: 'picture',\n    defaultFileList: defaultFileList,\n    fileList: fileList,\n    onChange: onChange,\n    multiple: multiple,\n    headers: {\n      Authorization: getToken()\n    }\n  };\n\n  return (\n    <div>\n      <Upload {...uploadFileProps}>\n        {showUploadButton ? (<Button><UploadOutlined /> Upload</Button>) : null}\n      </Upload>\n    </div>\n  )\n};\n\nUploadFile.defaultProps = {\n  multiple: true,\n  defaultFileList: [],\n  fileList: [],\n  maxFiles: 5,\n  onChange: (info) => { console.log(info.file) },\n};\n\nexport default UploadFile;\n","import React from 'react';\nimport AxiosRequest from '../apis';\n\nconst CreateRecordRequestPost = ({ requestCount, reqObject, responseDataHandle }) => {\n  // 创建订单 request\n  const api = 'records-admin/v1/purchaserecord';\n  const method = 'post';\n  const reqParams = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n}\n\nexport { CreateRecordRequestPost };\n","import React, { useState, useRef } from 'react';\nimport { Modal, Form, Tooltip, Row, Col, Button, Input, Space, InputNumber, Select, message } from 'antd';\nimport { SearchOutlined, FileSyncOutlined } from '@ant-design/icons';\nimport { navigate } from 'gatsby';\n\nimport CustomerList from '../customer_list';\nimport UploadFile from '../upload_files';\nimport { StsUploadFilesList } from '../upload_files/sts_upload_files_list';\nimport OverallLoading from '../overall_loading';\nimport SelectSalePlatform from '../select_sale_platform';\nimport { CreateRecordRequestPost } from './create_records_request';\n\nconst { Option } = Select;\n\nconst formInitObj = {\n  customername: '',\n  diopter_r: '',\n  diopter_l: '',\n  pupillary_distance: '',\n  product_title: '',\n  products_quantity: 1,\n  purchase_amount: 0,\n  sale_platform: 0,\n  order_state: 0,\n  receive_address: '',\n  explains: \"\",\n  upload: []\n};\n\n// 创建购买记录组件\n\nconst formItemLayout = {\n  layout: 'horizontal',\n  labelCol: {\n    xs: { span: 12, },\n    sm: { span: 10, },\n  },\n  wrapperCol: {\n    xs: { span: 12, },\n    sm: { span: 14, },\n  },\n};\nconst tailFormItemLayout = {\n  wrapperCol: {\n    xs: { span: 24, offset: 0, },\n    sm: { span: 16, offset: 8, },\n  },\n};\n\nconst normFile = e => {\n  console.log('Upload event:', e);\n  if (Array.isArray(e)) {\n    return e;\n  }\n  return e && e.fileList;\n};\n\nconst CreatePurchaseRecords = () => {\n  // 创建购买记录组件\n  const [cleanImagesCount, setCleanImagesCount] = useState(0);\n\n  const [spinning, setSpinning] = useState(false);\n  const [form] = Form.useForm();\n  const [showSelectCustomerModal, setShowSelectCustomerModal] = useState(false);\n  const selectedCustomerObj = useRef({});\n\n  const [requestCount, setRequestCount] = useState(0);\n  const reqObject = useRef({});\n  const uploadedImagesObj = useRef({});\n\n  const responseDataHandle = (respObj) => {\n    // respObj 是请求结果\n    console.log(respObj);\n    setSpinning(false);\n    if (respObj.code === 1000) {\n      // 请求成功\n      form.setFieldsValue({ ...formInitObj });\n      setCleanImagesCount(cleanImagesCount + 1);\n      // message.success('Success!');\n      message.success('创建订单成功!');\n    } else {\n      // message.error('Network Error...');\n      message.error('创建失败...');\n    }\n  }\n\n  const selectCustomerHandle = (customerObj) => {\n    // 选中顾客后操作\n    selectedCustomerObj.current = customerObj;\n    const objKeys = Object.keys(customerObj);\n    const nickName =\n      objKeys.includes('name')\n        ? customerObj.name\n        : objKeys.includes('wx_nickname') ? customerObj.wx_nickname : '';\n    form.setFieldsValue({\n      customername: nickName,\n    });\n    setShowSelectCustomerModal(false);\n  }\n\n  const SelectOrderState = () => {\n    // 0:订单交易完成, 1:定制中, 2:已发货\n    return (\n      <Select onChange={(val) => form.setFieldsValue({ order_state: Number(val) })} defaultValue=\"0\">\n        <Option value=\"0\">订单交易完成</Option>\n        <Option value=\"1\">定制中</Option>\n        <Option value=\"2\">已发货</Option>\n      </Select>\n    )\n  }\n\n  const onFinish = values => {\n    // 提交表单\n    const deepcopyObj = { ...values, ...uploadedImagesObj.current };\n    delete deepcopyObj.customername;\n    const customerObj = { ...selectedCustomerObj.current };\n    // 判断是顾客表还是顾客微信表，获取顾客id\n    deepcopyObj.customer_id = Object.keys(customerObj).includes('customer_id')\n      ? customerObj.customer_id\n      : customerObj.id ? customerObj.id : 0;\n    // const imgLists = [].concat(deepcopyObj.upload);\n    // delete deepcopyObj.upload;\n    // // console.log(imgLists);\n    // for (let index = 0; index < imgLists.length; index++) {\n    //   const resp = imgLists[index].response;\n    //   let imgKey = 'image_cos_name' + (index + 1);\n    //   deepcopyObj[imgKey] = resp.image_cos_name;\n    // }\n    // 打印上传对象\n    console.log(deepcopyObj);\n    reqObject.current = deepcopyObj;\n    setSpinning(true);\n    setRequestCount(requestCount + 1);\n  };\n\n  return (\n    <div>\n      <OverallLoading spinning={spinning} />\n      <h3>新建销售记录</h3>\n\n      <StsUploadFilesList\n        onChange={(uploadedImageObj) => { uploadedImagesObj.current = uploadedImageObj; }}\n        cleanImagesCount={cleanImagesCount}></StsUploadFilesList>\n\n      <Form\n        {...formItemLayout}\n        form={form}\n        name=\"createrecord\"\n        onFinish={onFinish}\n        initialValues={{ ...formInitObj }}\n        scrollToFirstError\n      >\n        <Form.Item label=\"顾客\" extra=\"请选择或新建顾客\">\n          <Row gutter={8}>\n            <Col span={18}>\n              <Form.Item\n                name=\"customername\"\n                noStyle\n              >\n                <Input disabled={true} />\n              </Form.Item>\n            </Col>\n            <Col span={6}>\n              <Tooltip title=\"选择或新建顾客\">\n                <Button type=\"primary\" onClick={() => { setShowSelectCustomerModal(true) }} shape=\"circle\" icon={<SearchOutlined />} />\n              </Tooltip>\n            </Col>\n          </Row>\n        </Form.Item>\n\n        <Form.Item label=\"光度 R\" name=\"diopter_r\" extra=\"选择或输入光度R\">\n          <Row gutter={8}>\n            <Col span={18}>\n              <Form.Item name=\"diopter_r\" noStyle><Input /></Form.Item>\n            </Col>\n            <Col span={6}>\n              <Tooltip title=\"选择光度\">\n                <Button type=\"primary\" shape=\"circle\" icon={<FileSyncOutlined />} />\n              </Tooltip>\n            </Col>\n          </Row>\n        </Form.Item>\n\n        <Form.Item label=\"光度 L\" extra=\"选择或输入光度L\">\n          <Row gutter={8}>\n            <Col span={18}>\n              <Form.Item name=\"diopter_l\" noStyle><Input /></Form.Item>\n            </Col>\n            <Col span={6}>\n              <Tooltip title=\"选择光度\">\n                <Button type=\"primary\" shape=\"circle\" icon={<FileSyncOutlined />} />\n              </Tooltip>\n            </Col>\n          </Row>\n        </Form.Item>\n\n        <Form.Item label=\"瞳距PD\" name=\"pupillary_distance\" ><Input /></Form.Item>\n        <Form.Item label=\"商品名称\" name=\"product_title\" ><Input /></Form.Item>\n        <Form.Item label=\"商品数量\" name=\"products_quantity\">\n          <InputNumber min={0} max={1000}\n            formatter={value => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n            parser={value => value.replace(/\\s?|(,*)/g, '')} />\n        </Form.Item>\n        <Form.Item label=\"销售金额\" name=\"purchase_amount\">\n          <InputNumber min={0} max={1000000}\n            formatter={value => `¥ ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n            parser={value => value.replace(/¥\\s?|(,*)/g, '')} />\n        </Form.Item>\n        <Form.Item label=\"销售平台\" name=\"sale_platform\">\n          <SelectSalePlatform />\n        </Form.Item>\n        <Form.Item label=\"订单状态\" name=\"order_state\"><SelectOrderState /></Form.Item>\n        <Form.Item label=\"收货地址\" name=\"receive_address\" ><Input /></Form.Item>\n        <Form.Item label=\"说明\" name=\"explains\" ><Input /></Form.Item>\n\n        {/* <Form.Item\n          name=\"upload\"\n          label=\"图片\"\n          valuePropName=\"fileList\"\n          getValueFromEvent={normFile}\n          extra=\"选择或拍摄图片\"\n        ><UploadFile fileList={fileList} /></Form.Item> */}\n\n        <Form.Item {...tailFormItemLayout}>\n          <Space size=\"large\">\n            <Button type=\"primary\" htmlType=\"submit\">提交</Button>\n            <Button type=\"dashed\" onClick={() => { navigate('/'); }}>取消</Button>\n          </Space>\n        </Form.Item>\n      </Form>\n\n      <CreateRecordRequestPost requestCount={requestCount}\n        reqObject={reqObject.current}\n        responseDataHandle={responseDataHandle}\n      ></CreateRecordRequestPost>\n\n      <Modal\n        visible={showSelectCustomerModal}\n        title=\"选择顾客\"\n        footer={[\n          <Button key=\"back\" onClick={() => { setShowSelectCustomerModal(false); }}>取消</Button>\n        ]}\n      ><CustomerList\n          selectCustomerHandle={selectCustomerHandle}\n          clickCreatedCustomerHandle={selectCustomerHandle} /></Modal>\n    </div>\n  )\n}\n\nexport default CreatePurchaseRecords;\n","import React from 'react';\n\nimport SEO from \"../components/seo\";\nimport SiteLayout from '../components/site_layout';\nimport CreatePurchaseRecords from '../components/create_records';\n\nconst CreateRecordsPage = () => (\n  <SiteLayout>\n    <SEO title='CreateRecord'></SEO>\n    <CreatePurchaseRecords></CreatePurchaseRecords>\n  </SiteLayout>\n);\n\nexport default CreateRecordsPage;\n"],"sourceRoot":""}