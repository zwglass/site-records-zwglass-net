(self.webpackChunkzwglass_purchase_records=self.webpackChunkzwglass_purchase_records||[]).push([[1950],{30165:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var o=n(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},l=n(12112),r=function(e,t){return o.createElement(l.Z,Object.assign({},e,{ref:t,icon:a}))};r.displayName="ReloadOutlined";var s=o.forwardRef(r)},86257:function(e,t,n){"use strict";n.d(t,{y:function(){return p},p:function(){return y}});var o=n(67294),a=n(28130),l=n(23796),r=n(93299),s=n(77371),u=n(48428).Z.formCommonStyle,c=u.layoutForm,i=u.formItemLayout,m=u.tailFormItemLayout,d={width:260},f=function(e){var t=e.formKey,n=e.formKeyLabelObj,r=e.disabledKeys,s=e.updateFormObj,u=e.rulesObj,c=e.formKeySelectComponentsObj,m=e.passwordKeys,f=e.showLabelName,b=void 0===f||f,p=r.includes(t),y=n[t],O=s[t];return o.createElement(a.Z.Item,Object.assign({},i,{name:t,label:b?y:"",initialValue:O,rules:u[t]?u[t]:[]}),Object.keys(c).includes(t)?c[t]:m.includes(t)?o.createElement(l.Z.Password,{style:d}):o.createElement(l.Z,{style:d,placeholder:"请输入 "+y,disabled:p}))},b=function(e){var t=e.formKey,n=e.formKeyLabelObj,l=e.disabledKeys,s=e.updateFormObj,u=e.rulesObj,c=e.formKeySelectComponentsObj,m=e.passwordKeys,d=e.formKeysItemButtonObj,b=d[t].buttonTips,p=n[t];return o.createElement(a.Z.Item,Object.assign({},i,{label:p}),o.createElement(f,{formKey:t,formKeyLabelObj:n,disabledKeys:l,updateFormObj:s,rulesObj:u,formKeySelectComponentsObj:c,passwordKeys:m,showLabelName:!1}),o.createElement(r.Z,{type:"link",onClick:function(e){console.log(e);try{d[t].clickMethod()}catch(n){console.log(n)}}},b))},p=function(e){var t=e.columns,n=e.disabledKeys,l=e.notShowKeys,u=e.formKeyLabelObj,i=e.formKeySelectComponentsObj,d=e.formKeysItemButtonObj,p=e.onFinish,y=e.cancelHandle,O=e.deleteHandle,g=e.showDeleteButton,j=e.updateFormObj,E=e.formInitialObj,C=e.initFormCount,h=e.rulesObj,v=e.passwordKeys,K=a.Z.useForm()[0],Z=(0,o.useState)(!1),S=Z[0],w=Z[1];(0,o.useEffect)((function(){K.setFieldsValue(j),w(!1)}),[j]),(0,o.useEffect)((function(){C>0&&(K.setFieldsValue(E),w(!1))}),[C]);return o.createElement(a.Z,Object.assign({},c,{form:K,layout:"horizontal",onFinish:function(e){w(!0),p(e)},name:"adminer_info_edit"}),t.map((function(e,t){return l.includes(e)?null:Object.keys(d).includes(e)?o.createElement(b,{key:t.toString(),formKey:e,formKeyLabelObj:u,disabledKeys:n,updateFormObj:j,rulesObj:h,formKeySelectComponentsObj:i,passwordKeys:v,formKeysItemButtonObj:d}):o.createElement(f,{key:t.toString(),formKey:e,formKeyLabelObj:u,disabledKeys:n,updateFormObj:j,rulesObj:h,formKeySelectComponentsObj:i,passwordKeys:v})})),o.createElement(a.Z.Item,m,o.createElement(s.Z,null,o.createElement(r.Z,{loading:S,disabled:S,type:"primary",htmlType:"submit"},"提交"),o.createElement(r.Z,{onClick:y},"取消"),g?o.createElement(r.Z,{loading:S,disabled:S,onClick:function(){w(!0),O()}},"删除"):null)))};p.defaultProps={columns:[],disabledKeys:[],notShowKeys:[],formKeyLabelObj:{},formKeySelectComponentsObj:{},formKeysItemButtonObj:{},onFinish:function(e){console.log(e)},cancelHandle:function(){console.log("Cancel Handle")},deleteHandle:function(){console.log("Delete Handle")},showDeleteButton:!1,updateFormObj:{},formInitialObj:{},initFormCount:0,rulesObj:{},passwordKeys:[],getFieldsValueHandle:function(e){return console.log(e)}};var y=function(e){var t=e.columns,n=e.disabledKeys,u=e.notShowKeys,c=e.formKeyLabelObj,i=e.formKeySelectComponentsObj,m=e.onFinish,f=e.onFinishButtonTips,b=e.cancelHandle,p=e.showCancelButton,y=e.deleteHandle,O=e.showDeleteButton,g=e.updateFormObj,j=e.formInitialObj,E=e.initFormCount,C=e.rulesObj,h=e.passwordKeys,v=(e.getFieldsValueHandle,a.Z.useForm()[0]);(0,o.useEffect)((function(){v.setFieldsValue(g)}),[g]),(0,o.useEffect)((function(){v.setFieldsValue(j)}),[E]);var K=function(e){var t=e.formKey,r=n.includes(t),s=c[t],u=g[t];return o.createElement(a.Z.Item,{name:t,initialValue:u,rules:C[t]?C[t]:[]},Object.keys(i).includes(t)?i[t]:h.includes(t)?o.createElement(l.Z.Password,{style:d}):o.createElement(l.Z,{style:d,placeholder:"请输入 "+s,disabled:r}))};return o.createElement(a.Z,Object.assign({},{labelCol:{span:0},wrapperCol:{span:8}},{form:v,layout:"inline",onFinish:m,name:"adminer_info_edit"}),t.map((function(e,t){return u.includes(e)?null:o.createElement(K,{formKey:e,key:t.toString()})})),o.createElement(a.Z.Item,null,o.createElement(s.Z,null,o.createElement(r.Z,{type:"primary",htmlType:"submit"},f),p?o.createElement(r.Z,{onClick:b},"取消"):null,O?o.createElement(r.Z,{onClick:y},"删除"):null)))};y.defaultProps={columns:[],disabledKeys:[],notShowKeys:[],formKeyLabelObj:{},formKeySelectComponentsObj:{},onFinish:function(e){console.log(e)},onFinishButtonTips:"确定/修改",cancelHandle:function(){console.log("Cancel Handle")},showCancelButton:!1,deleteHandle:function(){console.log("Delete Handle")},showDeleteButton:!1,updateFormObj:{},formInitialObj:{},initFormCount:0,rulesObj:{},passwordKeys:[],getFieldsValueHandle:function(e){return console.log(e)}}},15169:function(e,t,n){"use strict";n.d(t,{A:function(){return s}});var o=n(67294),a=n(27188),l=n(48428),r=a.Z.Option,s=function(e){var t=e.options,n=e.width,l=e.value,s=e.onChange,u=e.mode;return o.createElement(a.Z,{style:{width:n},onChange:s,value:l,mode:u,allowClear:!0},t.map((function(e,t){return o.createElement(r,{key:t.toString(),value:e.value},e.label)})))};s.defaultProps={options:[],width:l.Z.selectComponentWidth,value:null,onChange:function(e){console.log(e)},mode:null}},3501:function(e,t,n){"use strict";n.d(t,{Z:function(){return X}});var o=n(67294),a=n(23148),l=n(56452),r=n(77371),s=n(90579),u=n(93299),c=n(30165),i=n(24856),m=n(40977),d=n(94789),f=n(16306),b=n(98662),p=n(33328),y=n(15169),O=n(88175),g=["id","commander_customer_id","name","mobile","password","email","wx_openid","people_id","address","avatar","add_time","update_time","explains","is_valid"],j=["id","wx_openid","add_time","update_time"],E=["commander_customer_id","wx_openid","avatar"],C={id:"ID",commander_customer_id:"团长ID",name:"购物团名",mobile:"团长手机",password:"登陆密码",email:"团长E-Mail",wx_openid:"团长微信openid",people_id:"团长身份证号",address:"团长地址",avatar:"购物团头像",add_time:"创建时间",update_time:"更新时间",explains:"说明",is_valid:"是否有效"},h={is_valid:o.createElement(y.A,{options:[{value:!1,label:"否"},{value:!0,label:"是"}]})},v=function(e){return{group_purchase_commander_name:{buttonTips:"选择顾客",clickMethod:function(){return e(!0)}}}},K=[],Z={id:0,commander_customer_id:0,name:"",mobile:"",password:"123456",email:"",wx_openid:"",people_id:"",address:"",avatar:"",add_time:"创建时间",update_time:"",explains:"",is_valid:!0},S={password:[{required:!0,message:"Please input Password!"},{min:6,max:16,message:"密码6-16个字符!"},{pattern:/^[a-z_A-Z0-9-\.!@#\$%\\\^&\*\)\(\+=\{\}\[\]\/",'<>~\·`\?:;|]+$/,message:"只能字母、数字、英文符号"}],mobile:[{required:!0,message:"Please input Mobile!"}]},w=["avatar"],_=["admin-customer/v1/grouppurchasecommander"],k=function(e){var t=e.item,n=e.index,a=e.itemDetailClick,l=e.selectButtonOnClick,r=(0,o.useState)([]),s=r[0],u=r[1];return(0,o.useEffect)((function(){l&&u([{buttonLabel:"选择",onClick:function(e){l(t,n)}}])}),[l]),o.createElement("div",null,o.createElement(O.Z,{listsIndex:n,url:t.avatar_url,productTitle:t.name,productEffects:"手机: "+t.mobile,salePrice:0,clickDetailHandle:a,customButtons:s}))},F=function(e){var t=e.requestCount,n=e.reqParams,a=e.responseDataHandle,l=_[0];return o.createElement(p.Z,{responseDataHandle:a,api:l,method:"get",reqParams:n,reqObject:{},requestCount:t})};F.defaultProps={requestCount:0,reqParams:{},responseDataHandle:function(e){console.log(e)}};var H=function(e){var t=e.requestCount,n=e.reqObject,a=e.responseDataHandle,l=[].concat(_)[0];return o.createElement(p.Z,{responseDataHandle:a,api:l,method:"post",reqParams:{},reqObject:n,requestCount:t})};H.defaultProps={requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)}};var q=function(e){var t=e.requestCount,n=e.reqObject,a=e.responseDataHandle,l=e.id,r=[].concat(_)[0]+"/"+l;return o.createElement(p.Z,{responseDataHandle:a,api:r,method:"put",reqParams:{},reqObject:n,requestCount:t})};q.defaultProps={requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)},id:0};var P=function(e){var t=e.requestCount,n=e.responseDataHandle,a=e.id,l=[].concat(_)[0]+"/"+a;return o.createElement(p.Z,{responseDataHandle:n,api:l,method:"delete",reqParams:{},reqObject:{},requestCount:t})};P.defaultProps={requestCount:0,responseDataHandle:function(e){console.log(e)},id:0};var D=n(86257),L=n(79649),B=function(e){var t=e.visible,n=e.setVisible,a=e.reloadListCount,l=e.setReloadListCount,r=(0,o.useRef)({}),s=(0,o.useRef)({createCount:0}),u=(0,o.useState)(0),c=u[0],i=u[1],p=(0,o.useState)(0),y=p[0],O=p[1],K=(0,o.useRef)({}),_=(0,o.useState)({}),k=_[0],F=_[1],q=(0,o.useState)(!1),P=q[0],B=q[1],I=(0,o.useRef)(0),x=function(){r.current={},s.current={createCount:s.current.createCount+1},i(c+1),n(!1)};return o.createElement(o.Fragment,null,o.createElement(d.Z,{visible:t,title:"GroupPurchaseCommander 新建",closable:!1,footer:null},o.createElement("div",{style:{width:"100%",height:"auto",textAlign:"center"}},o.createElement(b.DX,{oldObj:s.current,maxImagesNum:1,imageKeyName:w[0],onChange:function(e){r.current=Object.assign({},e)}})),o.createElement(f.Z,null),o.createElement(L.E,{modalState:P,setModalState:B,selectHandle:function(e){var t=e.name;F({group_purchase_commander_name:t}),e.id>0&&(I.current=e.id),B(!1)}}),o.createElement(D.y,{columns:g,disabledKeys:j,notShowKeys:E,formKeyLabelObj:C,formKeySelectComponentsObj:h,formKeysItemButtonObj:v(B),onFinish:function(e){var t=Object.assign({},e,r.current);K.current=t,O(y+1)},cancelHandle:x,showDeleteButton:!1,formInitialObj:Z,initFormCount:c,rulesObj:S,updateFormObj:k}),o.createElement(H,{requestCount:y,reqObject:K.current,responseDataHandle:function(e){Object.keys(e).includes("code")&&1e3===e.code?(x(),l(a+1)):m.ZP.error("网络错误...")}})))};B.defaultProps={visible:!1,setVisible:function(e){return console.log(e)},reloadListCount:0,setReloadListCount:function(e){return console.log(e)}};var I=B,x=n(37011),R=function(e){var t=e.visible,n=e.setVisible,a=e.queryHandle,l=(0,o.useState)(0),r=l[0],s=l[1],u=(0,o.useState)({}),c=u[0],i=u[1],m=(0,o.useState)(!1),d=m[0],f=m[1],b=(0,o.useRef)(0),p=function(){s(r+1),n(!1)};return o.createElement(o.Fragment,null,o.createElement(x.Z,{title:"销售记录查询",width:"100%",height:"400px",placement:"top",onClose:p,visible:t,bodyStyle:{paddingBottom:80},footer:null},o.createElement(D.y,{columns:K,formKeyLabelObj:C,formKeySelectComponentsObj:h,formKeysItemButtonObj:v(f),onFinish:function(e){var t=Object.assign({},e);console.log(t),a(t),setTimeout((function(){p()}),50)},cancelHandle:function(){return n(!1)},showDeleteButton:!1,formInitialObj:Z,initFormCount:r,updateFormObj:c})),o.createElement(L.E,{modalState:d,setModalState:f,selectHandle:function(e){var t=e.name;i({group_purchase_commander_name:t}),e.id>0&&(b.current=e.id),f(!1)}}))};R.defaultProps={visible:!1,setVisible:function(e){console.log(e)},queryHandle:function(e){console.log(e)}};var V=R,M=n(45266),N=function(e){var t=e.visible,n=e.setVisible,a=e.oldObj,l=e.reloadListCount,r=e.setReloadListCount,s=(0,o.useState)([]),u=(s[0],s[1]),c=(0,o.useRef)({}),i=(0,o.useState)(""),p=(i[0],i[1],(0,o.useState)({})),y=p[0],O=p[1],v=(0,o.useState)(0),K=v[0],Z=v[1],_=(0,o.useState)(0),k=_[0],F=_[1],H=(0,o.useRef)({}),L=(0,o.useState)(0),B=L[0],I=L[1];(0,o.useEffect)((function(){x()}),[t,a]);var x=function(){Z(K+1),O(Object.assign({},a));for(var e=[],t=w[0],n=1;n<10;n++){var o=t+n,l=o+"_url",r=a[o],s=a[l];"string"==typeof r&&r.length>5&&e.push({cosNameKey:o,cosName:r,urlKey:l,url:s})}console.log(e),u(e)};return o.createElement(d.Z,{visible:t,title:"GroupPurchaseCommander",closable:!1,footer:null},o.createElement("div",{style:{width:"100%",height:"auto",textAlign:"center"}},o.createElement(b.DX,{maxImagesNum:1,imageKeyName:w[0],oldObj:a,onChange:function(e){console.log(e),c.current=e}})),o.createElement(f.Z,null),o.createElement(D.y,{columns:g,disabledKeys:j,notShowKeys:E,formKeyLabelObj:C,formKeySelectComponentsObj:h,onFinish:function(e){var t=Object.assign({},e,c.current);console.log(t),H.current=t,F(k+1)},cancelHandle:function(){return n(!1)},showDeleteButton:!0,deleteHandle:function(){I(B+1),r(l+1)},updateFormObj:y,formInitialObj:{},rulesObj:S,initFormCount:K}),o.createElement(q,{requestCount:k,reqObject:H.current,responseDataHandle:function(e){Object.keys(e).includes("code")&&1e3===e.code?(m.ZP.success("修改成功"),r(l+1),n(!1)):m.ZP.error("网络错误...")},id:y.id}),o.createElement(P,{requestCount:B,responseDataHandle:function(e){return n(!1)},id:y.id}))};N.defaultProps={visible:!1,setVisible:function(e){return console.log(e)},oldObj:{}};var T=N,A=function(e){var t=e.reloadListCount,n=e.setReloadListCount,a=e.requestParams,l=e.selectButtonOnClick,r=(0,o.useRef)(!0),s=(0,o.useState)(!0),u=s[0],c=s[1],i=(0,o.useState)(!1),m=i[0],d=i[1],f=(0,o.useRef)({page:0}),b=(0,o.useState)([]),p=b[0],y=b[1],O=(0,o.useState)(0),g=O[0],j=O[1],E=(0,o.useState)(!1),C=E[0],h=E[1],v=(0,o.useState)({}),K=v[0],Z=v[1];(0,o.useEffect)((function(){f.current=Object.assign({},a),w()}),[t]),(0,o.useEffect)((function(){c(r.current)}),[r.current]);var S=function(){if(r.current&&!m){var e=Number.isInteger(f.current.page)?f.current.page+1:1;f.current=Object.assign({},f.current,{page:e}),console.log(f.current),j(g+1),d(!0)}else console.log("Error state: hasMore is ",r.current,", loading is ",m)},w=function(){f.current=Object.assign({},f.current,{page:0}),y([]),r.current=!0,d(!1),setTimeout((function(){S(),console.log("end loadMore...")}),100)},_=function(e){var t=Object.assign({},p[e]);Z(t),h(!0)};return o.createElement("div",null,o.createElement(F,{requestCount:g,reqParams:f.current,responseDataHandle:function(e){console.log("GroupPurchaseCommander response",e),d(!1),Object.keys(e).includes("code")&&1e3===e.code&&Object.keys(e).includes("results")?(y(p.concat(e.results)),r.current=function(e){return!!(Object.keys(e).includes("next")&&"string"==typeof e.next&&e.next.length>5)}(e)):console.log("Error: get data...")}}),o.createElement(M.Z,{productsData:p,loadMore:S,hasMore:u,ItemRendererComponent:function(e){var t=e.item,n=e.index;return o.createElement(k,{item:t,index:n,itemDetailClick:_,selectButtonOnClick:l})}}),o.createElement(T,{visible:C,setVisible:h,oldObj:K,reloadListCount:t,setReloadListCount:n}))};A.defaultProps={reloadListCount:1,setReloadListCount:function(e){console.log(e)},requestParams:{page:0},selectButtonOnClick:null};var z=A,G=function(e){var t=e.paramsObj,n=void 0===t?{}:t,a=(0,o.useState)(""),l=a[0],r=a[1];(0,o.useEffect)((function(){s()}),[n]);var s=function(){var e="";Object.keys(n).forEach((function(t){if(Object.keys(C).includes(t)){var o=" "+C[t]+" = "+n[t]+";";e+=o}})),e.length>2?r(e="查询条件:"+e):(console.log("查询条件为空"),r(""))};return o.createElement("div",{style:{height:"auto",width:"100%",padding:"0.1rem 0.2rem"}},l.length>2?o.createElement("p",null,l):null)},X=function(e){var t=e.selectButtonOnClick,n=void 0===t?null:t,m=(0,o.useRef)({page:0}),d=(0,o.useState)(1),f=d[0],b=d[1],p=(0,o.useState)(!1),y=p[0],O=p[1],g=(0,o.useState)(!1),j=g[0],E=g[1];return o.createElement("div",null,o.createElement(a.Z,null,o.createElement(l.Z,{span:14},o.createElement(r.Z,null,o.createElement("h4",null,"GroupPurchaseCommander"),o.createElement(s.Z,{title:"刷新"},o.createElement(u.Z,{onClick:function(){m.current={page:0},b(f+1)},shape:"circle",icon:o.createElement(c.Z,null)})),o.createElement(s.Z,{title:"搜索"},o.createElement(u.Z,{onClick:function(){return O(!0)},shape:"circle",icon:o.createElement(i.Z,null)})))),o.createElement(l.Z,{span:10},o.createElement("div",{style:{width:"100%",height:"auto"}},o.createElement(u.Z,{style:{float:"right"},type:"link",onClick:function(){return E(!0)}},"新建")))),o.createElement(a.Z,null,o.createElement(l.Z,{span:24},o.createElement(G,{paramsObj:m.current}))),o.createElement(V,{visible:y,setVisible:O,queryHandle:function(e){m.current=Object.assign({},e),b(f+1)}}),o.createElement(z,{reloadListCount:f,setReloadListCount:b,requestParams:m.current,selectButtonOnClick:n}),o.createElement(I,{visible:j,setVisible:E,reloadListCount:f,setReloadListCount:b}))}},79649:function(e,t,n){"use strict";n.d(t,{E:function(){return s}});var o=n(67294),a=n(94789),l=n(93299),r=n(3501),s=function(e){var t=e.modalState,n=e.setModalState,s=e.selectHandle;return o.createElement(o.Fragment,null,o.createElement(a.Z,{visible:t,title:"选择团长",closable:!1,footer:[o.createElement(l.Z,{key:"back",onClick:function(){n(!1)}},"取消")]},o.createElement(r.Z,{selectButtonOnClick:s})))};s.defaultProps={modalState:!1,setModalState:function(e){return console.log(e)},selectHandle:function(e){console.log(e)}}}}]);
//# sourceMappingURL=dbadc1f47f0818744ed037a0383a5aee7951ddcf-e46a13bd36e16fa67b51.js.map