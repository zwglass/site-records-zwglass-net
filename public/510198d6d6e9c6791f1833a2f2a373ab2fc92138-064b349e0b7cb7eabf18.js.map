{"version":3,"sources":["webpack://zwglass-purchase-records/./src/components/base_components/select_component.js","webpack://zwglass-purchase-records/./src/components/customer_list/customer_requests.js","webpack://zwglass-purchase-records/./src/components/customer_list/customer_columns_labels_config.js","webpack://zwglass-purchase-records/./src/components/customer_list/customer_create.js","webpack://zwglass-purchase-records/./src/components/customer_list/customer_info.js","webpack://zwglass-purchase-records/./src/components/customer_list/customer_list.js","webpack://zwglass-purchase-records/./src/components/customer_list/index.js","webpack://zwglass-purchase-records/./src/components/overall_loading/index.js","webpack://zwglass-purchase-records/./src/components/select_sale_platform/index.js","webpack://zwglass-purchase-records/./src/components/upload_files/sts_upload_file.js","webpack://zwglass-purchase-records/./src/components/upload_files/uploadSingleFileHandle.js"],"names":["Option","Select","CustomSelect","options","width","value","onChange","mode","style","allowClear","map","obj","index","key","toString","label","defaultProps","customConfig","console","log","customerOrWxBaseApis","CustomerInfoRequestPost","requestCount","reqObject","responseDataHandle","api","method","reqParams","respObj","CustomerInfoRequestPut","customerOrWx","customerOrWxId","useRef","useEffect","current","GetCustomerInfo","customerId","useState","setRequestCount","id","GetCustomerWxInfo","customer_id","customerInfoObjKeys","customerInfoObjInitialValues","wxInfoObjKeys","disabledKeys","formKeyLabelObj","formKeySelectComponentsObj","is_valid","custormer_category","wx_gender","notShowKey","formCommonStyle","styleLayoutForm","layoutForm","styleFormItemLayout","formItemLayout","styleTailFormItemLayout","tailFormItemLayout","CustomerCreateModal","modalState","setModalState","form","Form","showOverallLoading","setShowOverallLoding","avatarCosKeyNameObj","cleanUploadedAvataListCount","setCleanUploadedAvataListCount","setFieldsValue","title","getContainer","visible","footer","closable","spinning","className","uploadedResponseHandle","fileKey","uploadedAvatar","Object","keys","includes","image_cos_name","message","avatarSize","cleanFileListCount","layout","onFinish","values","name","disabled","currentLabel","initialValue","placeholder","type","htmlType","onClick","labelCol","span","wrapperCol","xs","sm","offset","CustomerOrWxInfoForm","customerInfoObj","infoOrWx","showListOrDetail","setShowOverallLoading","customerObj","setCustomerObj","customerAvatarUrl","setCustomerAvatarUrl","cleanAvatarCount","avatarCosName","avatarEdited","avatarUrl","wx_avatar","avatar","oldImageUrl","length","src","alt","height","deepcopyObj","currentInputValue","respData","setTimeout","error","CustomerOrWxInfo","customerOrWxInfoObj","customerOrWxInfoObjKeys","isInfoObj","isWxObj","forEach","val","listOrDetail","LoadMore","sendGetRequest","showLoadMoreButton","textAlign","marginTop","lineHeight","WxList","customerData","selectCustomerHandle","showListCount","showListOrForm","setShowListOrForm","selectedWxObj","setSelectedWxObj","wxObj","itemLayout","loadMore","dataSource","renderItem","item","actions","wx_nickname","wx_province","wx_city","memo_name","description","explains","CustomerList","mobile","address","CustomerWxOrInfoList","wxOrInfo","Search","Input","clickCreatedCustomerHandle","createCustomerModalState","setCreateCustomerModalState","setShowListCount","searchNickname","customerDataList","setCustomerDataList","searchCustomerType","customerWxOrInfoList","setCustomerWxOrInfoList","requestPage","maxPage","setShowLoadMoreButton","getParams","defaultValue","apisListConcat","concat","onSearch","nickname","enterButton","code","cusotmerRespomseResults","results","count","respMaxPage","Math","ceil","Number","createdCustomerObj","OverallLoading","showLoading","setShowLoading","divStyle","display","size","StsUploadFile","selectedFileObj","stsTemporaryObj","cos_name","uploadedFileUrl","setUploadedFileUrl","temporaryKeyRequestCount","setTemporaryKeyRequestCount","temporaryKeyRequestObj","showOldImageUrl","setShowOldImageUrl","showUploadButton","setShowUploadButton","deleteCurrentImage","getAuthorization","callback","stsObj","credentials","TmpSecretId","tmpSecretId","TmpSecretKey","tmpSecretKey","XCosSecurityToken","sessionToken","StartTime","startTime","ExpiredTime","expiredTime","uploadSingleFileProps","fileList","beforeUpload","file","direction","gutter","sts_obj","window","require","putObject","cosConfig","Key","Body","onProgress","progressData","JSON","stringify","err","data","image_cos_name_url","responseObj","UploadSingleFileHandle","setFileList","action","headers","authorization","getToken","info","slice","status","response"],"mappings":"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","file":"510198d6d6e9c6791f1833a2f2a373ab2fc92138-064b349e0b7cb7eabf18.js","sourcesContent":["import React from 'react';\nimport { Select } from 'antd';\nimport customConfig from '../../custom_config';\n\n// custom select 组件\n\nconst { Option } = Select;\n\nconst CustomSelect = ({ options, width, value, onChange, mode }) => {\n  return (\n    <Select style={{ width: width }} onChange={onChange} value={value} mode={mode} allowClear>\n      {options.map((obj, index) => {\n        return <Option\n          key={index.toString()}\n          value={obj.value}\n        >{obj.label}</Option>\n      })}\n    </Select>\n  )\n}\n\nCustomSelect.defaultProps = {\n  options: [],  // [{value: '值', label: '显示名称'}]\n  width: customConfig.selectComponentWidth,\n  value: null,\n  onChange: (value) => { console.log(value) },\n  mode: null,\n}\n\nexport { CustomSelect };\n","import React, { useState, useRef, useEffect } from 'react';\n\nimport AxiosRequest from '../apis';\n\n// 顾客的request请求\n\nconst customerOrWxBaseApis = ['admin-customer/v1/customer', 'admin-wxinfo/v1/customerwxinfo']\n\nconst CustomerInfoRequestPost = ({ requestCount, reqObject, responseDataHandle }) => {\n  // 新建顾客请求\n  const api = customerOrWxBaseApis[0];\n  const method = 'post';\n  const reqParams = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\n\nCustomerInfoRequestPost.defaultProps = {\n  requestCount: 0,\n  reqObject: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n}\n\nconst CustomerInfoRequestPut = ({ customerOrWx, customerOrWxId, requestCount, reqObject, responseDataHandle }) => {\n  // customerOrWx: 0:customer; 1:微信;\n  // 修改顾客详情信息 put 请求\n  // request请求数据\n  const api = useRef(`${customerOrWxBaseApis[customerOrWx]}/${customerOrWxId}`);\n  const method = 'put';\n  const reqParams = {};\n\n  useEffect(() => {\n    api.current = `${customerOrWxBaseApis[customerOrWx]}/${customerOrWxId}`;\n  }, [customerOrWx, customerOrWxId]);\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api.current} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  )\n\n}\n\nCustomerInfoRequestPut.defaultProps = {\n  customerOrWx: 0,\n  customerOrWxId: 0,\n  requestCount: 0,\n  reqObject: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n};\n\nconst GetCustomerInfo = ({ customerId, responseDataHandle }) => {\n  // 获取顾客详情\n  const [requestCount, setRequestCount] = useState(0);\n  const reqParams = useRef({ id: customerId });\n  const reqObject = useRef({});\n  const api = 'admin-customer/v1/customer';\n  const method = 'get';\n\n  useEffect(() => {\n    reqParams.current = { id: customerId };\n    setRequestCount(requestCount + 1);\n  }, [customerId])\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams.current} reqObject={reqObject.current} requestCount={requestCount}\n    ></AxiosRequest>\n  )\n};\n\nGetCustomerInfo.defaultProps = {\n  customerId: 0,\n  responseDataHandle: (respObj) => { console.log(respObj); },\n}\n\nconst GetCustomerWxInfo = ({ customerId, responseDataHandle }) => {\n  // 获取顾客微信详情\n  const [requestCount, setRequestCount] = useState(0);\n  const reqParams = useRef({ customer_id: customerId });\n  const reqObject = useRef({});\n  const api = 'admin-wxinfo/v1/customerwxinfo';\n  const method = 'get';\n\n  useEffect(() => {\n    if (customerId > 0) {\n      reqParams.current = { customer_id: customerId };\n      setRequestCount(requestCount + 1);\n    }\n  }, [customerId])\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams.current} reqObject={reqObject.current} requestCount={requestCount}\n    ></AxiosRequest>\n  )\n}\n\nGetCustomerWxInfo.defaultProps = {\n  customerId: 0,\n  responseDataHandle: (respObj) => { console.log(respObj); },\n}\n\nexport { CustomerInfoRequestPost,\n  CustomerInfoRequestPut,\n  GetCustomerInfo,\n  GetCustomerWxInfo\n};\n","import React from 'react';\nimport { CustomSelect } from '../base_components/select_component';\n\n// 顾客form表的配置\n\nconst customerInfoObjKeys = [\"id\", \"name\", \"mobile\", \"email\", \"wx_openid\",\n  \"people_id\", \"address\", \"custormer_category\", \"avatar\", \"add_time\",\n  \"update_time\", \"explains\", \"is_valid\", \"purchase_total_counts\"];\n\nconst customerInfoObjInitialValues = {\"name\": \"\", \"mobile\": \"\", \"email\": \"\",\n\"people_id\": \"\", \"address\": \"\", \"custormer_category\": 1, \"avatar\": \"\",\n\"explains\": \"\", \"is_valid\": true, };\n\nconst wxInfoObjKeys = [\"id\", \"customer_id\", \"wx_nickname\", \"memo_name\", \"wx_session_key\", \"wx_openid\", \"wx_avatar\", \"wx_country\",\n  \"wx_province\", \"wx_city\", \"wx_gender\", \"add_time\", \"update_time\", \"explains\"];\n\nconst disabledKeys = [\n  \"id\", \"customer_id\", \"wx_session_key\", \"wx_openid\", \"add_time\", \"update_time\",\n  \"purchase_total_counts\", \"wx_avatar\", \"avatar\",\n];\n\nconst formKeyLabelObj = {\n  \"id\": \"ID\", \"name\": \"姓名\", \"mobile\": \"手机\", \"email\": \"E-Mail\", \"wx_openid\": \"微信openid\",\n  \"people_id\": \"身份证\", \"address\": \"地址\", \"custormer_category\": \"顾客级别\", \"avatar\": \"头像url\",\n  \"add_time\": \"创建时间\", \"update_time\": \"更新时间\", \"explains\": \"说明\", \"is_valid\": \"有效\",\n  \"purchase_total_counts\": \"订单总数\", \"customer_id\": \"顾客ID\", \"wx_session_key\": \"微信session key\",\n  \"wx_nickname\": \"微信昵称\", \"wx_avatar\": \"微信头像url\", \"wx_country\": \"国家\", \"wx_province\": \"省\",\n  \"wx_city\": \"市\", \"wx_gender\": \"性别\", \"memo_name\": \"备注名称\"\n};\n\nconst SelectBoolean = (<CustomSelect\n  options={[{ value: true, label: '有效' }, { value: false, label: '无效' },]} />);\n\n// 1: 一般顾客, 2: 优质顾客, 3: VIP顾客\nconst SelectCustomerCategory = (<CustomSelect\n  options={[{ value: 1, label: '一般顾客' }, { value: 2, label: '优质顾客' }, { value: 3, label: 'VIP顾客' },]} />);\n\n// 0-未知, 1-男, 2-女\nconst SelectGender = (<CustomSelect\n  options={[{ value: 0, label: '未知' }, { value: 1, label: '男' }, { value: 2, label: '女' },]} />);\n\nconst formKeySelectComponentsObj = {\n  is_valid: SelectBoolean,\n  custormer_category: SelectCustomerCategory,\n  wx_gender: SelectGender\n};\n\nconst notShowKey = ['avatar', 'wx_avatar'];\n\nexport {\n  customerInfoObjKeys,\n  customerInfoObjInitialValues,\n  wxInfoObjKeys,\n  disabledKeys,\n  formKeyLabelObj,\n  formKeySelectComponentsObj,\n  notShowKey\n};\n","import React, { useState, useRef, useEffect } from 'react';\nimport { Modal, Form, Input, Button, message, Space } from 'antd';\n\nimport UploadSingleFileHandle from '../upload_files/uploadSingleFileHandle';\nimport {\n  customerInfoObjKeys,\n  customerInfoObjInitialValues,\n  disabledKeys,\n  formKeyLabelObj,\n  formKeySelectComponentsObj,\n} from './customer_columns_labels_config';\nimport { CustomerInfoRequestPost } from './customer_requests';\nimport OverallLoading from '../overall_loading';\nimport customConfig from '../../custom_config';\n\n// 创建顾客 Form\nconst formCommonStyle = customConfig.formCommonStyle;\nconst styleLayoutForm = formCommonStyle.layoutForm;\nconst styleFormItemLayout = formCommonStyle.formItemLayout;\nconst styleTailFormItemLayout = formCommonStyle.tailFormItemLayout;\n\nconst notShowKey = [\"id\", \"wx_openid\", \"avatar\", \"add_time\", \"update_time\", \"purchase_total_counts\"];\n\nconst CustomerCreateModal = ({ modalState, setModalState, responseDataHandle }) => {\n  const [form] = Form.useForm();\n  const [showOverallLoading, setShowOverallLoding] = useState(false);\n  const avatarCosKeyNameObj = useRef({});\n\n  // request请求数据\n  const reqObject = useRef({});\n  const [requestCount, setRequestCount] = useState(0);\n  const [cleanUploadedAvataListCount, setCleanUploadedAvataListCount] = useState(0);\n\n  useEffect(() => {\n    if (modalState === false) {\n      form.setFieldsValue({ ...customerInfoObjInitialValues });\n    }\n  }, [modalState]);\n\n  const createdCustomerRequestHandle = (respObj) => {\n    // 创建成功后操作\n    setShowOverallLoding(false);\n    responseDataHandle(respObj);\n  };\n\n  const changeCustomerAvatarHandle = (respObj, fileKey) => {\n    // 上传头像后操作\n    let uploadedAvatar = '';\n    if (Object.keys(respObj).includes('image_cos_name')) {\n      uploadedAvatar = respObj.image_cos_name;\n    } else {\n      // 清空上传的文件列表\n      setCleanUploadedAvataListCount(cleanUploadedAvataListCount + 1);\n      message.error('Upload fail...');\n      message.error('上传失败')\n    }\n    avatarCosKeyNameObj.current = { 'avatar': uploadedAvatar };\n  };\n\n  const onFinish = (values) => {\n    // 提交创建表单\n    setShowOverallLoding(true);\n    reqObject.current = { ...values, ...avatarCosKeyNameObj.current };\n    setRequestCount(requestCount + 1);\n  }\n  return (\n    <Modal title=\"创建顾客\"\n      getContainer={false}\n      visible={modalState}\n      footer={null}\n      closable={false}\n    >\n      <OverallLoading spinning={showOverallLoading}></OverallLoading>\n      <div className=\"avatar-box\">\n        <UploadSingleFileHandle uploadedResponseHandle={changeCustomerAvatarHandle} avatarSize={64}\n          fileKey=\"avatar\" cleanFileListCount={cleanUploadedAvataListCount}></UploadSingleFileHandle>\n      </div>\n      <Form {...styleLayoutForm} form={form} layout=\"horizontal\" onFinish={onFinish} name=\"dynamic_rule\">\n        {customerInfoObjKeys.map((key) => {\n          if (notShowKey.includes(key)) {\n            return null;\n          }\n          const disabled = disabledKeys.includes(key);  // 是否可以编辑输入框\n          const currentLabel = formKeyLabelObj[key];\n          return (\n            <Form.Item\n              {...styleFormItemLayout}\n              name={key}\n              label={currentLabel}\n              key={key.toString()}\n              initialValue={customerInfoObjInitialValues[key]}\n            >\n              {Object.keys(formKeySelectComponentsObj).includes(key)\n                ? formKeySelectComponentsObj[key]\n                : <Input placeholder={`请输入 ${currentLabel}`} disabled={disabled} />}\n            </Form.Item>\n          )\n        })}\n\n        <Form.Item {...styleTailFormItemLayout}>\n          <Space>\n            <Button type=\"primary\" htmlType=\"submit\">创建</Button>\n            <Button onClick={() => { setModalState(false); }}>取消</Button>\n          </Space>\n        </Form.Item>\n\n        <Form.Item>\n          <CustomerInfoRequestPost\n            requestCount={requestCount}\n            reqObject={reqObject.current}\n            responseDataHandle={createdCustomerRequestHandle}></CustomerInfoRequestPost>\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n};\n\nCustomerCreateModal.defaultProps = {\n  modalState: false,\n  setModalState: (modalState) => { console.log(modalState); },\n  responseDataHandle: (respObj) => {\n    // 创建顾客返回结果后操作\n    console.log(respObj);\n  }\n}\n\nexport default CustomerCreateModal;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { Form, Input, Button, message } from 'antd';\n\nimport { CustomerInfoRequestPut } from './customer_requests';\nimport UploadSingleFileHandle from '../upload_files/uploadSingleFileHandle';\nimport StsUploadFile from '../upload_files/sts_upload_file';\n// import Zmage from 'react-zmage';\nimport OverallLoading from '../overall_loading';\nimport {\n  customerInfoObjKeys,\n  wxInfoObjKeys,\n  disabledKeys,\n  formKeyLabelObj,\n  formKeySelectComponentsObj,\n  notShowKey\n} from './customer_columns_labels_config';\n\nimport './customer_info.css';\n\nconst layoutForm = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 18 },\n};\nconst formItemLayout = {\n  labelCol: {\n    xs: { span: 12 },\n    sm: { span: 10 },\n  },\n  wrapperCol: {\n    xs: { span: 12 },\n    sm: { span: 14 },\n  },\n};\nconst tailFormItemLayout = {\n  wrapperCol: {\n    xs: {\n      span: 24,\n      offset: 2,\n    },\n    sm: {\n      span: 16,\n      offset: 8,\n    },\n  },\n};\n\nconst CustomerOrWxInfoForm = ({ customerInfoObj, infoOrWx, showListOrDetail }) => {\n  // 显示顾客详细信息  infoOrWx: 0-customer表, 1-wxinfo表\n  const [showOverallLoading, setShowOverallLoading] = useState(false);\n  const [customerObj, setCustomerObj] = useState({});\n  const [customerAvatarUrl, setCustomerAvatarUrl] = useState('');\n  const [cleanAvatarCount, setCleanAvatarCount] = useState(0);\n  const avatarCosName = useRef('');\n  const avatarEdited = useRef(false);\n\n  // request请求数据\n  const reqObject = useRef({});\n  const [requestCount, setRequestCount] = useState(0);\n\n  useEffect(() => {\n    // 更新 customerObj\n    console.log(customerInfoObj);\n    setCustomerObj(customerInfoObj);\n    const avatarUrl = infoOrWx > 0 ? customerInfoObj.wx_avatar : customerInfoObj.avatar;\n    setCustomerAvatarUrl(avatarUrl);\n    return function cleanUp() {\n      return null;\n    };\n  }, [customerInfoObj]);\n\n  const onFinish = (obj) => {\n    // 提交表单修改顾客信息\n    // 更新response图片 key value\n    setShowOverallLoading(true);\n    const deepcopyObj = { ...obj };\n    if (avatarEdited.current && infoOrWx === 0) {\n      deepcopyObj.avatar = avatarCosName.current;\n    }\n    console.log(deepcopyObj);\n    setCustomerObj(obj);\n    reqObject.current = deepcopyObj;\n    // infoOrWx: 0-customer表, 1-wxinfo表\n    setRequestCount(requestCount + 1);  // 提交request请求\n  }\n\n  const responseDataHandle = (respData) => {\n    // 接收request数据后操作\n    setShowOverallLoading(false);\n    try {\n      console.log(respData);\n      message.success('Success!');\n      message.success('更新成功(Success)!');\n      setTimeout(() => {\n        showListOrDetail(0);\n      }, 1000);\n    } catch (error) {\n      // 更新用户数据失败\n      console.log(error);\n      message.error('Error...');\n      message.error('Error: 网络错误...');\n    }\n  };\n\n  const changeCustomerAvatarHandle = (respObj, fileKey) => {\n    // 更新顾客头像\n    console.log(fileKey);\n    avatarEdited.current = true;\n    if (Object.keys(respObj).includes('image_cos_name') && respObj.image_cos_name.length > 10) {\n      avatarCosName.current = (respObj.image_cos_name);\n    } else {\n      avatarCosName.current = '';\n      setCustomerAvatarUrl('');\n    }\n  }\n\n  return (\n    <>\n      <OverallLoading spinning={showOverallLoading}></OverallLoading>\n      <div className=\"avatar-box\">\n        {infoOrWx === 0\n          ? (<StsUploadFile\n            oldImageUrl={customerAvatarUrl}\n            avatarSize={64}\n            uploadedResponseHandle={changeCustomerAvatarHandle}\n            cleanFileListCount={cleanAvatarCount} ></StsUploadFile>)\n          : (<img src={customerAvatarUrl} alt=\"Avatar\" height=\"64px\"></img>)}\n      </div>\n      <Form {...layoutForm} layout=\"horizontal\" onFinish={onFinish} name=\"customer_info_edit\">\n        {Object.keys(customerObj).map((key) => {\n          if (notShowKey.includes(key)) {\n            return null;\n          }\n          const disabled = disabledKeys.includes(key);  // 是否可以编辑输入框\n          const currentLabel = formKeyLabelObj[key];\n          let currentInputValue = customerInfoObj[key];\n          return (\n            <Form.Item\n              {...formItemLayout}\n              name={key}\n              label={currentLabel}\n              key={key.toString()}\n              initialValue={currentInputValue}\n            >\n              {Object.keys(formKeySelectComponentsObj).includes(key)\n                ? formKeySelectComponentsObj[key]\n                : <Input placeholder={`请输入 ${currentLabel}`} disabled={disabled} />}\n            </Form.Item>\n          )\n        })}\n\n        <Form.Item {...tailFormItemLayout}>\n          <Button type=\"primary\" htmlType=\"submit\">\n            修改\n          </Button>&nbsp;&nbsp;\n          <Button onClick={() => { showListOrDetail(0); }}>\n            取消\n          </Button>\n        </Form.Item>\n\n        <Form.Item>\n          <CustomerInfoRequestPut\n            customerOrWx={infoOrWx}\n            customerOrWxId={customerInfoObj.id}\n            requestCount={requestCount}\n            reqObject={reqObject.current}\n            responseDataHandle={responseDataHandle}></CustomerInfoRequestPut>\n        </Form.Item>\n      </Form>\n    </>\n  );\n}\n\nconst CustomerOrWxInfo = ({ customerOrWxInfoObj, showListOrDetail }) => {\n  // 显示顾客或顾客微信详细信息; ~~~~~~~~ showListOrDetail 可能存在问题\n  const customerOrWxInfoObjKeys = Object.keys(customerOrWxInfoObj);\n  let isInfoObj = true;\n  let isWxObj = true;\n  customerOrWxInfoObjKeys.forEach((val) => {\n    if (!customerInfoObjKeys.includes(val)) {\n      isInfoObj = false;\n    }\n    if (!wxInfoObjKeys.includes(val)) {\n      isWxObj = false;\n    }\n  })\n  if (isInfoObj && isWxObj) {\n    console.log('Customer object error, too many keys...');\n    return null;\n  }\n  if (!isInfoObj && !isWxObj) {\n    console.log('Customer object error, all keys error...');\n    return null;\n  }\n\n  const infoOrWx = isInfoObj ? 0 : 1;\n  return <CustomerOrWxInfoForm customerInfoObj={customerOrWxInfoObj} infoOrWx={infoOrWx} showListOrDetail={showListOrDetail} />\n}\n\nCustomerOrWxInfo.defaultProps = {\n  customerOrWxInfoObj: {},\n  showListOrDetail: (listOrDetail) => { console.log(`This is Form page! value: ${listOrDetail}`) }\n}\n\nexport default CustomerOrWxInfo;\n","import React, { useState, useEffect } from 'react';\nimport { List, Button, message } from 'antd';\n\nimport CustomerOrWxInfo from './customer_info';\nimport ImageZoom from '../base_components/image_zoom';\n\nconst LoadMore = ({ sendGetRequest, showLoadMoreButton }) => {\n  return (\n    showLoadMoreButton ?\n      (\n        <div style={{\n          textAlign: 'center',\n          marginTop: 12,\n          height: 32,\n          lineHeight: '32px',\n        }}\n        ><Button onClick={sendGetRequest}>loading more</Button>\n        </div>\n      )\n      : null\n  );\n}\n// 顾客列表\nconst WxList = ({ customerData, sendGetRequest, showLoadMoreButton, selectCustomerHandle, showListCount }) => {\n  // 顾客微信列表\n  const [showListOrForm, setShowListOrForm] = useState(0); // 0-显示list, 1-显示form\n  const [selectedWxObj, setSelectedWxObj] = useState({});\n\n  const showListOrDetail = (listOrDetail, wxObj = {}) => {\n    // 显示列表或表单; listOrDetail: 0-显示list, 1-显示form;\n    if (listOrDetail > 0) {\n      // 显示表单\n      setSelectedWxObj(wxObj);\n    }\n    setShowListOrForm(listOrDetail);\n  }\n\n  useEffect(() => {\n    // showListCount 改变显示列表 \n    // console.log('changed: ' + showListCount);\n    showListOrDetail(0);\n  }, [showListCount])\n\n  return (\n    showListOrForm < 1\n      ? (<List itemLayout=\"vertical\"\n        loadMore={<LoadMore sendGetRequest={sendGetRequest} showLoadMoreButton={showLoadMoreButton} />}\n        dataSource={customerData}\n        renderItem={item => (\n          <List.Item\n            actions={[<Button onClick={() => selectCustomerHandle(item)} type=\"link\">选择</Button>, <Button onClick={() => { showListOrDetail(1, item); }} type=\"link\">顾客详情</Button>]}\n          >\n            {/* <Skeleton avatar title={false} loading={item.loading} active> */}\n            <List.Item.Meta\n              avatar={\n                <ImageZoom width={64} alt=\"Image\" src={item.wx_avatar} />\n              }\n              title={`${item.wx_nickname} 住址: ${item.wx_province} ${item.wx_city}; 备注名: ${item.memo_name}`}\n              description={`备注: ${item.explains}`}\n            />\n            {/* </Skeleton> */}\n          </List.Item>\n        )}\n      />)\n      : <CustomerOrWxInfo customerOrWxInfoObj={selectedWxObj} showListOrDetail={showListOrDetail} />\n  )\n}\n\nconst CustomerList = ({ customerData, sendGetRequest, showLoadMoreButton, selectCustomerHandle, showListCount }) => {\n  const [showListOrForm, setShowListOrForm] = useState(0); // 0-显示list, 1-显示form\n  const [selectedWxObj, setSelectedWxObj] = useState({});\n\n  const showListOrDetail = (listOrDetail, wxObj = {}) => {\n    // 显示列表或表单; listOrDetail: 0-显示list, 1-显示form;\n    if (listOrDetail > 0) {\n      // 显示表单\n      setSelectedWxObj(wxObj);\n    }\n    setShowListOrForm(listOrDetail);\n  }\n\n  useEffect(() => {\n    // showListCount 改变显示列表\n    console.log('changed: ' + showListCount);\n    showListOrDetail(0);\n  }, [showListCount]);\n\n  return (\n    showListOrForm < 1\n      ? (<List\n        itemLayout=\"vertical\"\n        loadMore={<LoadMore sendGetRequest={sendGetRequest} showLoadMoreButton={showLoadMoreButton} />}\n        dataSource={customerData}\n        renderItem={item => (\n          <List.Item\n            actions={[<Button onClick={() => selectCustomerHandle(item)} type=\"link\">选择</Button>, <Button onClick={() => { showListOrDetail(1, item); }} type=\"link\">顾客详情</Button>]}\n          >\n            {/* <Skeleton avatar title={false} loading={item.loading} active> */}\n            <List.Item.Meta\n              avatar={\n                <ImageZoom width={64} alt=\"Image\" src={item.avatar} />\n              }\n              title={`姓名: ${item.name}, 手机: ${item.mobile}, 住址: ${item.address};`}\n              description={`备注: ${item.explains}`}\n            />\n            {/* </Skeleton> */}\n          </List.Item>\n        )}\n      />)\n      : <CustomerOrWxInfo customerOrWxInfoObj={selectedWxObj} showListOrDetail={showListOrDetail} />\n  )\n};\n\nconst CustomerWxOrInfoList = ({\n  customerData,\n  wxOrInfo,\n  sendGetRequest,\n  showLoadMoreButton,\n  selectCustomerHandle,\n  showListCount\n}) => {\n  // 显示顾客微信或顾客详情 列表 wxOrInfo > 0 显示顾客详情列表, 等于0 显示顾客微信列表\n\n  return (\n    wxOrInfo > 0 ?\n      <CustomerList\n        customerData={customerData}\n        sendGetRequest={sendGetRequest}\n        showLoadMoreButton={showLoadMoreButton}\n        selectCustomerHandle={selectCustomerHandle}\n        showListCount={showListCount} /> :\n      <WxList\n        customerData={customerData}\n        sendGetRequest={sendGetRequest}\n        showLoadMoreButton={showLoadMoreButton}\n        selectCustomerHandle={selectCustomerHandle}\n        showListCount={showListCount} />\n  )\n}\n\nCustomerWxOrInfoList.defaultProps = {\n  customerData: [],\n  wxOrInfo: 0,\n  sendGetRequest: null,\n  showLoadMoreButton: true,\n  selectCustomerHandle: (customerObj) => {\n    console.log(customerObj);\n    const name = Object.keys(customerObj).includes('name')\n      ? customerObj.name\n      : Object.keys(customerObj).includes('wx_nickname') ? customerObj.wx_nickname : 'Error Object';\n\n    message.info(`Selected ${name} !`);\n    message.info(`选择了 ${name} !`);\n  },\n  showListCount: 0\n};\n\nexport default CustomerWxOrInfoList;\n","import React, { useState, useRef } from 'react';\nimport { Input, Select, message, Button, Space } from 'antd';\n\nimport CreateCustomerModal from './customer_create';\nimport CustomerWxOrInfoList from './customer_list';\n// import { PoweroffOutlined } from '@ant-design/icons';\n\nimport AxiosRequest from '../apis';\nconst { Search } = Input;\nconst { Option } = Select;\n\n// 显示顾客列表\n\nconst CustomerList = ({ selectCustomerHandle, clickCreatedCustomerHandle }) => {\n  const [createCustomerModalState, setCreateCustomerModalState] = useState(false);\n  const [showListCount, setShowListCount] = useState(0);\n\n  const searchNickname = useRef('');\n  const [customerDataList, setCustomerDataList] = useState([]);\n  // 根据微信昵称、顾客姓名或顾客手机号查询顾客\n  const searchCustomerType = useRef('wx_nickname');\n  const [customerWxOrInfoList, setCustomerWxOrInfoList] = useState(0);\n  // request 数据\n  const requestPage = useRef(0);\n  const maxPage = useRef(1);\n\n  const [showLoadMoreButton, setShowLoadMoreButton] = useState(true);\n\n  const api = useRef('admin-wxinfo/v1/customerwxinfo');\n  const method = 'get';\n  const reqParams = useRef({ [searchCustomerType.current]: '', 'page': requestPage })\n  const reqObject = {}\n\n  const [requestCount, setRequestCount] = useState(0);\n\n  const createdCustomerHandle = (respObj) => {\n    // 创建顾客后操作\n    clickCreatedCustomerHandle(respObj);\n    setCreateCustomerModalState(false);\n  }\n\n  const responseDataHandle = (respObj) => {\n    // 把请求加载到\n    if (Object.keys(respObj).includes('code') && respObj.code === 1000) {\n      let cusotmerRespomseResults = customerDataList.concat(respObj.results);\n      setCustomerDataList(cusotmerRespomseResults);\n      if (respObj.count && typeof (respObj.count) !== 'undefined') {\n        let respMaxPage = Math.ceil(Number(respObj.count) / 10);\n        maxPage.current = respMaxPage;\n      } else {\n        maxPage.current = 1;\n      }\n    } else {\n      console.log('Error Request: ', respObj);\n    }\n  }\n\n  const sendGetRequest = () => {\n    // 发送获取顾客列表请求\n    requestPage.current = requestPage.current + 1;\n    if (requestPage.current > maxPage.current) {\n      // requestPage > maxPage 就不发送request请求\n      setShowLoadMoreButton(false);\n      console.log('Not more...');\n      return;\n    } else {\n      setShowLoadMoreButton(true);\n    }\n    let getParams = { [searchCustomerType.current]: searchNickname.current, 'page': requestPage.current };\n    // console.log(getParams);\n    reqParams.current = getParams;\n    setRequestCount(requestCount + 1);\n  }\n\n  const selectSearchCustomerTypeChange = (value) => {\n    // 选择搜索顾客的名称、微信昵称、电话, 默认微信昵称\n    const apisList = ['admin-wxinfo/v1/customerwxinfo', 'admin-customer/v1/customer']\n    searchCustomerType.current = value;\n    let apisListConcat = [].concat(apisList);\n    setCustomerDataList([]);\n    if (value === 'wx_nickname') {\n      api.current = apisListConcat[0];\n      setCustomerWxOrInfoList(0);\n    } else {\n      api.current = apisListConcat[1];\n      setCustomerWxOrInfoList(1);\n    }\n  }\n\n  const searchCustomerWxNickname = (nickname) => {\n    // 顾客微信昵称搜寻顾客\n    setShowListCount(showListCount + 1);\n    setCustomerDataList([]);\n    requestPage.current = 0;\n    maxPage.current = 1;\n    searchNickname.current = nickname;\n    sendGetRequest();\n  }\n\n  return (\n    <div>\n      <CreateCustomerModal modalState={createCustomerModalState} setModalState={setCreateCustomerModalState}\n        responseDataHandle={createdCustomerHandle}></CreateCustomerModal>\n      <Space>\n        <Select defaultValue=\"wx_nickname\" style={{ width: 120 }} onChange={selectSearchCustomerTypeChange}>\n          <Option value=\"wx_nickname\">微信昵称</Option>\n          <Option value=\"name\">顾客姓名</Option>\n          <Option value=\"mobile\">手机号码</Option>\n        </Select>\n        <Button type=\"link\" onClick={() => { setCreateCustomerModalState(true); }}>新建顾客</Button>\n      </Space><br></br><br></br>\n      <Search placeholder=\"搜索顾客微信昵称\" onSearch={searchCustomerWxNickname} enterButton />\n      <br /><br />\n      <CustomerWxOrInfoList\n        selectCustomerHandle={selectCustomerHandle}\n        customerData={customerDataList}\n        wxOrInfo={customerWxOrInfoList}\n        sendGetRequest={sendGetRequest}\n        showLoadMoreButton={showLoadMoreButton}\n        showListCount={showListCount}\n      /><br />\n\n      <AxiosRequest\n        responseDataHandle={responseDataHandle} api={api.current} method={method}\n        reqParams={reqParams.current} reqObject={reqObject} requestCount={requestCount}\n      ></AxiosRequest>\n    </div>\n  )\n}\n\nCustomerList.defaultProps = {\n  selectCustomerHandle: (customerObj) => {\n    console.log(customerObj);\n    const name = Object.keys(customerObj).includes('name')\n      ? customerObj.name\n      : Object.keys(customerObj).includes('wx_nickname') ? customerObj.wx_nickname : 'Error Object';\n\n    message.info(`Selected ${name} !`);\n    message.info(`选择了 ${name} !`);\n  },\n  clickCreatedCustomerHandle: (createdCustomerObj) => { console.log(createdCustomerObj); },\n}\n\nexport default CustomerList;\n","import React, { useState, useEffect } from 'react';\nimport { Spin } from 'antd';\n\nimport './loading.css';\n\nconst OverallLoading = ({ spinning }) => {\n  // 全局读取中\n  const [showLoading, setShowLoading] = useState(false);\n\n  const divStyle = {\n    display: showLoading ? 'block' : 'none',\n  }\n\n  useEffect(() => {\n    // spinning 更新后 更新divStyle\n    setShowLoading(spinning);\n  }, [spinning]);\n\n  return (\n    <div className=\"overall-loading\" style={divStyle}>\n      <Spin spinning={spinning} size=\"large\" />\n    </div>\n  )\n};\n\nOverallLoading.defaultProps = {\n  spinning: false\n}\n\nexport default OverallLoading;\n","import React from 'react';\nimport { CustomSelect } from '../base_components/select_component';\n\n// 选择销售平台\n\nconst SelectSalePlatform = ({ value, onChange }) => (<CustomSelect\n  value={value}\n  onChange={onChange}\n  options={[\n    { value: 0, label: '未知' },\n    { value: 1, label: '门店' },\n    { value: 2, label: '淘宝' },\n    { value: 3, label: '小程序' },\n    { value: 4, label: '微信-方灵芝' },\n    { value: 5, label: '微信-展望眼镜' },\n  ]}\n/>);\n\nexport default SelectSalePlatform;\n","import React, { useRef, useState, useEffect } from 'react';\nimport { Button, Upload, Space, Row, Col, message } from 'antd';\nimport { UploadOutlined, DeleteOutlined } from '@ant-design/icons';\n// import Cos from 'cos-js-sdk-v5';\n\nimport ImageZoom from '../base_components/image_zoom';\nimport { StsTemporaryKeyRequestPost } from './upload_file_requests';\nimport { cosConfig } from './sts_funcs_config';\n\n// sts 上传文件到腾讯云服务器, 服务器端生成临时密钥，浏览器直接上传文件到腾讯云cos\n\nconst StsUploadFile = ({\n  oldImageUrl,\n  avatarSize,\n  uploadedResponseHandle,\n  fileKey,\n  cleanFileListCount,\n}) => {\n  // const Cos = require('cos-js-sdk-v5');\n  const selectedFileObj = useRef({});\n  const stsTemporaryObj = useRef({});\n  const cos_name = useRef('');\n  const [uploadedFileUrl, setUploadedFileUrl] = useState('');\n  const [temporaryKeyRequestCount, setTemporaryKeyRequestCount] = useState(0);\n  const temporaryKeyRequestObj = useRef({});\n\n  const [showOldImageUrl, setShowOldImageUrl] = useState(true);\n  const [showUploadButton, setShowUploadButton] = useState(true);\n\n  useEffect(() => {\n    // 清空fileList\n    // selectedFileObj.current = [];\n    deleteCurrentImage();\n  }, [cleanFileListCount]);\n\n  useEffect(() => {\n    // oldImageUrl 更新后删除 uploadedFileUrl\n    // setFileList([]);\n    selectedFileObj.current = {};\n    setUploadedFileUrl('');\n    setShowOldImageUrl(true);\n  }, [oldImageUrl]);\n\n  useEffect(() => {\n    // 是否显示上传按钮\n    setShowUploadButton(Object.keys(selectedFileObj.current).length === 0);\n  }, [selectedFileObj.current]);\n\n  const getAuthorization = function (options, callback) {\n    // 验证函数\n    const stsObj = { ...stsTemporaryObj.current };\n    const credentials = stsObj.credentials;\n    callback({\n      TmpSecretId: credentials.tmpSecretId,\n      TmpSecretKey: credentials.tmpSecretKey,\n      XCosSecurityToken: credentials.sessionToken,\n      StartTime: stsObj.startTime, // 时间戳，单位秒，如：1580000000，建议返回服务器时间作为签名的开始时间，避免用户浏览器本地时间偏差过大导致签名错误\n      ExpiredTime: stsObj.expiredTime, // 时间戳，单位秒，如：1580000900\n    });\n  };\n\n  const temporaryKeyResponseDataHandle = (respObj) => {\n    // 获取临时密钥后操作\n    console.log(respObj);\n    if (!Object.keys(respObj).includes('image_cos_name')\n      && !Object.keys(respObj).includes('sts_obj')) {\n      console.log('Get temporary key error...');\n      return;\n    }\n    stsTemporaryObj.current = respObj.sts_obj;\n    cos_name.current = respObj.image_cos_name;\n\n    // 上传到腾讯云 bucket\n    if (typeof window === 'undefined') {\n      return;\n    }\n    const Cos = require('cos-js-sdk-v5');\n    const cos = new Cos({ getAuthorization: getAuthorization });\n    cos.putObject({\n      ...cosConfig,\n      Key: cos_name.current,                        /* 必须 */\n      Body: selectedFileObj.current,                // 上传文件对象\n      onProgress: function (progressData) {\n        console.log(JSON.stringify(progressData));\n      }\n    }, function (err, data) {\n      console.log(err || data);\n      if (data) {\n        console.log(data);\n        setUploadedFileUrl(respObj.image_cos_name_url);\n        setShowOldImageUrl(false);\n        // 回调给父组件\n        uploadedResponseHandle(respObj, fileKey);\n        message.success('图片上传成功!');\n      } else {\n        deleteCurrentImage();  //上传失败删除图片\n        message.error('图片上传失败...');\n      }\n    });\n  };\n\n  const uploadSingleFileProps = {\n    // 自定义上传文件操作\n    fileList: [],\n    beforeUpload: file => {\n      selectedFileObj.current = file;\n      setTemporaryKeyRequestCount(temporaryKeyRequestCount + 1);\n      return false;\n    },\n  }\n\n  const deleteCurrentImage = () => {\n    // 删除当前图片\n    uploadedResponseHandle({}, fileKey);\n    setUploadedFileUrl('');\n    // setFileList([]);\n    selectedFileObj.current = {};\n    setShowOldImageUrl(false);\n  }\n\n  return (\n    <div>\n      <Space direction=\"vertical\">\n        <ImageZoom src={showOldImageUrl ? oldImageUrl : uploadedFileUrl} width={avatarSize}></ImageZoom>\n        <Row gutter={10}>\n          <Col span={12}>\n            <div style={{ textAlign: 'left' }}>\n              <Upload {...uploadSingleFileProps}>\n                {showUploadButton ? (<Button size=\"small\"><UploadOutlined /> 更新</Button>) : null}\n              </Upload>\n            </div>\n          </Col>\n          <Col span={12}>\n            {uploadedFileUrl.length > 10 || oldImageUrl.length > 10\n              ? (<Button onClick={deleteCurrentImage} size=\"small\"><DeleteOutlined /> 删除</Button>) : null}\n          </Col>\n        </Row>\n\n        <StsTemporaryKeyRequestPost requestCount={temporaryKeyRequestCount}\n          reqObject={temporaryKeyRequestObj.current}\n          responseDataHandle={temporaryKeyResponseDataHandle}></StsTemporaryKeyRequestPost>\n      </Space>\n    </div>\n  )\n};\n\nStsUploadFile.defaultProps = {\n  oldImageUrl: '',\n  avatarSize: 96,\n  uploadedResponseHandle: (responseObj, fileKey) => {\n    // 上传成功后, 操作 response\n    console.log(responseObj, fileKey);\n  },\n  fileKey: 'image1',\n  cleanFileListCount: 0,\n};\n\nexport default StsUploadFile;\n","import React, { useState, useEffect } from 'react';\nimport { Space, Upload, Button, message, Row, Col } from 'antd';\nimport { UploadOutlined, DeleteOutlined } from '@ant-design/icons';\n\n// import Zmage from 'react-zmage';\n\n// 上传单张图片到服务器操作\n\nimport ImageZoom from '../base_components/image_zoom';\nimport customConfig from '../../custom_config';\nimport { getToken } from '../../assets/common_funcs/token_handle';\n\nconst UploadSingleFileHandle = ({\n  oldImageUrl,\n  avatarSize,\n  uploadedResponseHandle,\n  fileKey,\n  cleanFileListCount,\n}) => {\n  const [showUploadButton, setShowUploadButton] = useState(true);\n  const [fileList, setFileList] = useState([]);\n  const [uploadedFileUrl, setUploadedFileUrl] = useState('');\n\n  const [showOldImageUrl, setShowOldImageUrl] = useState(true);\n\n  useEffect(() => {\n    setShowUploadButton(fileList.length === 0);\n  }, [fileList]);\n\n  useEffect(() => {\n    // 清空fileList\n    setFileList([]);\n  }, [cleanFileListCount]);\n\n  useEffect(() => {\n    // oldImageUrl 更新后删除 uploadedFileUrl\n    setFileList([]);\n    setUploadedFileUrl('');\n    setShowOldImageUrl(true);\n  }, [oldImageUrl]);\n\n  const uploadSingleFileProps = {\n    name: 'upload-single-file',\n    action: `${customConfig.apiBaseUrl}/files-handle/v1/uploadfiles`,\n    headers: {\n      authorization: getToken(),\n    },\n    fileList: fileList,\n    onChange: (info) => {\n      setFileList(info.fileList.slice()); // Note: A new object must be used here!!!\n      setShowOldImageUrl(false);\n      if (info.file.status === 'done') {\n        message.success(`${info.file.name} file uploaded successfully`);\n\n        const respObj = { ...info.file.response };\n        uploadedResponseHandle(respObj, fileKey);\n\n        // 更新 uploadedFileUrl\n        if (Object.keys(respObj).includes('image_cos_name_url') && respObj.image_cos_name_url.length > 10) {\n          setUploadedFileUrl(respObj.image_cos_name_url);\n        }\n      } else if (info.file.status === 'error') {\n        message.error(`Error: ${info.file.name} file upload failed.`);\n        message.error(`Error: ${info.file.name} 文件上传失败...`);\n        setFileList([]);\n      }\n    },\n  };\n\n  const deleteCurrentImage = () => {\n    // 删除当前图片\n    uploadedResponseHandle({}, fileKey);\n    setUploadedFileUrl('');\n    setFileList([]);\n    setShowOldImageUrl(false);\n  }\n\n  return (\n    <div>\n      <Space direction=\"vertical\">\n        {/* <img alt=\"Image\" height={`${avatarSize}px`}\n          src={showOldImageUrl ? oldImageUrl : uploadedFileUrl} /> */}\n        <ImageZoom src={showOldImageUrl ? oldImageUrl : uploadedFileUrl} width={avatarSize}></ImageZoom>\n        <Row gutter={10}>\n          <Col span={12}>\n            <div style={{ textAlign: 'left' }}>\n              <Upload {...uploadSingleFileProps}>\n                {showUploadButton ? (<Button size=\"small\"><UploadOutlined /> 更新</Button>) : null}\n              </Upload>\n            </div>\n          </Col>\n          <Col span={12}>\n            {uploadedFileUrl.length > 10 || oldImageUrl.length > 10\n              ? (<Button onClick={deleteCurrentImage} size=\"small\"><DeleteOutlined /> 删除</Button>) : null}\n          </Col>\n        </Row>\n      </Space>\n    </div>\n  )\n};\n\nUploadSingleFileHandle.defaultProps = {\n  oldImageUrl: '',\n  avatarSize: 96,\n  uploadedResponseHandle: (responseObj, fileKey) => {\n    // 上传成功后, 操作 response\n    console.log(responseObj, fileKey);\n  },\n  fileKey: 'image1',\n  cleanFileListCount: 0,\n};\n\nexport default UploadSingleFileHandle;\n"],"sourceRoot":""}