"use strict";(self.webpackChunkclient_admin_v102=self.webpackChunkclient_admin_v102||[]).push([[1919],{9113:function(e,n,t){t.d(n,{Z:function(){return k}});var o=t(5671),r=t(3144),a=t(136),l=t(8557),i=t(1002),c=t(7294),s=t(518),u=t(6074),m=t(2034),d=t(3198);var f=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return{};var t=n.element,o=void 0===t?document.body:t,r={},a=Object.keys(e);return a.forEach((function(e){r[e]=o.style[e]})),a.forEach((function(n){o.style[n]=e[n]})),r};var p={},v=function(e){if(document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth||e){var n="ant-scrolling-effect",t=new RegExp("".concat(n),"g"),o=document.body.className;if(e){if(!t.test(o))return;return f(p),p={},void(document.body.className=o.replace(t,"").trim())}var r=(0,d.Z)();if(r&&(p=f({position:"relative",width:"calc(100% - ".concat(r,"px)")}),!t.test(o))){var a="".concat(o," ").concat(n);document.body.className=a.trim()}}},b=t(3433),_=[],g="ant-scrolling-effect",y=new RegExp("".concat(g),"g"),h=0,C=new Map,E=(0,r.Z)((function e(n){var t=this;(0,o.Z)(this,e),this.lockTarget=void 0,this.options=void 0,this.getContainer=function(){var e;return null===(e=t.options)||void 0===e?void 0:e.container},this.reLock=function(e){var n=_.find((function(e){return e.target===t.lockTarget}));n&&t.unLock(),t.options=e,n&&(n.options=e,t.lock())},this.lock=function(){var e;if(!_.some((function(e){return e.target===t.lockTarget})))if(_.some((function(e){var n,o=e.options;return(null==o?void 0:o.container)===(null===(n=t.options)||void 0===n?void 0:n.container)})))_=[].concat((0,b.Z)(_),[{target:t.lockTarget,options:t.options}]);else{var n=0,o=(null===(e=t.options)||void 0===e?void 0:e.container)||document.body;(o===document.body&&window.innerWidth-document.documentElement.clientWidth>0||o.scrollHeight>o.clientHeight)&&(n=(0,d.Z)());var r=o.className;if(0===_.filter((function(e){var n,o=e.options;return(null==o?void 0:o.container)===(null===(n=t.options)||void 0===n?void 0:n.container)})).length&&C.set(o,f({width:0!==n?"calc(100% - ".concat(n,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:o})),!y.test(r)){var a="".concat(r," ").concat(g);o.className=a.trim()}_=[].concat((0,b.Z)(_),[{target:t.lockTarget,options:t.options}])}},this.unLock=function(){var e,n=_.find((function(e){return e.target===t.lockTarget}));if(_=_.filter((function(e){return e.target!==t.lockTarget})),n&&!_.some((function(e){var t,o=e.options;return(null==o?void 0:o.container)===(null===(t=n.options)||void 0===t?void 0:t.container)}))){var o=(null===(e=t.options)||void 0===e?void 0:e.container)||document.body,r=o.className;y.test(r)&&(f(C.get(o),{element:o}),C.delete(o),o.className=o.className.replace(y,"").trim())}},this.lockTarget=h++,this.options=n})),O=0,w=(0,m.Z)();var j={},K=function(e){if(!w)return null;if(e){if("string"==typeof e)return document.querySelectorAll(e)[0];if("function"==typeof e)return e();if("object"===(0,i.Z)(e)&&e instanceof window.HTMLElement)return e}return document.body},Z=function(e){(0,a.Z)(t,e);var n=(0,l.Z)(t);function t(e){var r;return(0,o.Z)(this,t),(r=n.call(this,e)).container=void 0,r.componentRef=c.createRef(),r.rafId=void 0,r.scrollLocker=void 0,r.renderComponent=void 0,r.updateScrollLocker=function(e){var n=(e||{}).visible,t=r.props,o=t.getContainer,a=t.visible;a&&a!==n&&w&&K(o)!==r.scrollLocker.getContainer()&&r.scrollLocker.reLock({container:K(o)})},r.updateOpenCount=function(e){var n=e||{},t=n.visible,o=n.getContainer,a=r.props,l=a.visible,i=a.getContainer;l!==t&&w&&K(i)===document.body&&(l&&!t?O+=1:e&&(O-=1)),("function"==typeof i&&"function"==typeof o?i.toString()!==o.toString():i!==o)&&r.removeCurrentContainer()},r.attachToParent=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||r.container&&!r.container.parentNode){var n=K(r.props.getContainer);return!!n&&(n.appendChild(r.container),!0)}return!0},r.getContainer=function(){return w?(r.container||(r.container=document.createElement("div"),r.attachToParent(!0)),r.setWrapperClassName(),r.container):null},r.setWrapperClassName=function(){var e=r.props.wrapperClassName;r.container&&e&&e!==r.container.className&&(r.container.className=e)},r.removeCurrentContainer=function(){var e,n;null===(e=r.container)||void 0===e||null===(n=e.parentNode)||void 0===n||n.removeChild(r.container)},r.switchScrollingEffect=function(){1!==O||Object.keys(j).length?O||(f(j),j={},v(!0)):(v(),j=f({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}))},r.scrollLocker=new E({container:K(e.getContainer)}),r}return(0,r.Z)(t,[{key:"componentDidMount",value:function(){var e=this;this.updateOpenCount(),this.attachToParent()||(this.rafId=(0,s.Z)((function(){e.forceUpdate()})))}},{key:"componentDidUpdate",value:function(e){this.updateOpenCount(e),this.updateScrollLocker(e),this.setWrapperClassName(),this.attachToParent()}},{key:"componentWillUnmount",value:function(){var e=this.props,n=e.visible,t=e.getContainer;w&&K(t)===document.body&&(O=n&&O?O-1:O),this.removeCurrentContainer(),s.Z.cancel(this.rafId)}},{key:"render",value:function(){var e=this.props,n=e.children,t=e.forceRender,o=e.visible,r=null,a={getOpenCount:function(){return O},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};return(t||o||this.componentRef.current)&&(r=c.createElement(u.Z,{getContainer:this.getContainer,ref:this.componentRef},n(a))),r}}]),t}(c.Component),k=Z},3198:function(e,n,t){var o;function r(e){if("undefined"==typeof document)return 0;if(e||void 0===o){var n=document.createElement("div");n.style.width="100%",n.style.height="200px";var t=document.createElement("div"),r=t.style;r.position="absolute",r.top="0",r.left="0",r.pointerEvents="none",r.visibility="hidden",r.width="200px",r.height="150px",r.overflow="hidden",t.appendChild(n),document.body.appendChild(t);var a=n.offsetWidth;t.style.overflow="scroll";var l=n.offsetWidth;a===l&&(l=t.clientWidth),document.body.removeChild(t),o=a-l}return o}t.d(n,{Z:function(){return r}})},5071:function(e,n,t){t.d(n,{p:function(){return b},y:function(){return v}});var o=t(7294),r=t(1152),a=t(2184),l=t(3299),i=t(7371),c=t(5455).Z.formCommonStyle,s=c.layoutForm,u=c.formItemLayout,m=c.tailFormItemLayout,d={width:260},f=function(e){var n=e.formKey,t=e.formKeyLabelObj,l=e.disabledKeys,i=e.updateFormObj,c=e.rulesObj,s=e.formKeySelectComponentsObj,m=e.passwordKeys,f=e.showLabelName,p=void 0===f||f,v=l.includes(n),b=t[n],_=i[n];return o.createElement(r.Z.Item,Object.assign({},u,{name:n,label:p?b:"",initialValue:_,rules:c[n]?c[n]:[]}),Object.keys(s).includes(n)?s[n]:m.includes(n)?o.createElement(a.Z.Password,{style:d}):o.createElement(a.Z,{style:d,placeholder:"请输入 "+b,disabled:v}))},p=function(e){var n=e.formKey,t=e.formKeyLabelObj,a=e.disabledKeys,i=e.updateFormObj,c=e.rulesObj,s=e.formKeySelectComponentsObj,m=e.passwordKeys,d=e.formKeysItemButtonObj,p=d[n].buttonTips,v=t[n];return o.createElement(r.Z.Item,Object.assign({},u,{label:v}),o.createElement(f,{formKey:n,formKeyLabelObj:t,disabledKeys:a,updateFormObj:i,rulesObj:c,formKeySelectComponentsObj:s,passwordKeys:m,showLabelName:!1}),o.createElement(l.Z,{type:"link",onClick:function(e){console.log(e);try{d[n].clickMethod()}catch(t){console.log(t)}}},p))},v=function(e){var n=e.columns,t=e.disabledKeys,a=e.notShowKeys,c=e.formKeyLabelObj,u=e.formKeySelectComponentsObj,d=e.formKeysItemButtonObj,v=e.onFinish,b=e.cancelHandle,_=e.deleteHandle,g=e.showDeleteButton,y=e.updateFormObj,h=e.formInitialObj,C=e.initFormCount,E=e.rulesObj,O=e.passwordKeys,w=r.Z.useForm()[0],j=(0,o.useState)(!1),K=j[0],Z=j[1];(0,o.useEffect)((function(){w.setFieldsValue(y),Z(!1)}),[y]),(0,o.useEffect)((function(){C>0&&(w.setFieldsValue(h),Z(!1))}),[C]);return o.createElement(r.Z,Object.assign({},s,{form:w,layout:"horizontal",onFinish:function(e){Z(!0),v(e)},name:"adminer_info_edit"}),n.map((function(e,n){return a.includes(e)?null:Object.keys(d).includes(e)?o.createElement(p,{key:n.toString(),formKey:e,formKeyLabelObj:c,disabledKeys:t,updateFormObj:y,rulesObj:E,formKeySelectComponentsObj:u,passwordKeys:O,formKeysItemButtonObj:d}):o.createElement(f,{key:n.toString(),formKey:e,formKeyLabelObj:c,disabledKeys:t,updateFormObj:y,rulesObj:E,formKeySelectComponentsObj:u,passwordKeys:O})})),o.createElement(r.Z.Item,m,o.createElement(i.Z,null,o.createElement(l.Z,{loading:K,disabled:K,type:"primary",htmlType:"submit"},"提交"),o.createElement(l.Z,{onClick:b},"取消"),g?o.createElement(l.Z,{loading:K,disabled:K,onClick:function(){Z(!0),_()}},"删除"):null)))};v.defaultProps={columns:[],disabledKeys:[],notShowKeys:[],formKeyLabelObj:{},formKeySelectComponentsObj:{},formKeysItemButtonObj:{},onFinish:function(e){console.log(e)},cancelHandle:function(){console.log("Cancel Handle")},deleteHandle:function(){console.log("Delete Handle")},showDeleteButton:!1,updateFormObj:{},formInitialObj:{},initFormCount:0,rulesObj:{},passwordKeys:[],getFieldsValueHandle:function(e){return console.log(e)}};var b=function(e){var n=e.columns,t=e.disabledKeys,c=e.notShowKeys,s=e.formKeyLabelObj,u=e.formKeySelectComponentsObj,m=e.onFinish,f=e.onFinishButtonTips,p=e.cancelHandle,v=e.showCancelButton,b=e.deleteHandle,_=e.showDeleteButton,g=e.updateFormObj,y=e.formInitialObj,h=e.initFormCount,C=e.rulesObj,E=e.passwordKeys,O=(e.getFieldsValueHandle,r.Z.useForm()[0]);(0,o.useEffect)((function(){O.setFieldsValue(g)}),[g]),(0,o.useEffect)((function(){O.setFieldsValue(y)}),[h]);var w=function(e){var n=e.formKey,l=t.includes(n),i=s[n],c=g[n];return o.createElement(r.Z.Item,{name:n,initialValue:c,rules:C[n]?C[n]:[]},Object.keys(u).includes(n)?u[n]:E.includes(n)?o.createElement(a.Z.Password,{style:d}):o.createElement(a.Z,{style:d,placeholder:"请输入 "+i,disabled:l}))};return o.createElement(r.Z,Object.assign({},{labelCol:{span:0},wrapperCol:{span:8}},{form:O,layout:"inline",onFinish:m,name:"adminer_info_edit"}),n.map((function(e,n){return c.includes(e)?null:o.createElement(w,{formKey:e,key:n.toString()})})),o.createElement(r.Z.Item,null,o.createElement(i.Z,null,o.createElement(l.Z,{type:"primary",htmlType:"submit"},f),v?o.createElement(l.Z,{onClick:p},"取消"):null,_?o.createElement(l.Z,{onClick:b},"删除"):null)))};b.defaultProps={columns:[],disabledKeys:[],notShowKeys:[],formKeyLabelObj:{},formKeySelectComponentsObj:{},onFinish:function(e){console.log(e)},onFinishButtonTips:"确定/修改",cancelHandle:function(){console.log("Cancel Handle")},showCancelButton:!1,deleteHandle:function(){console.log("Delete Handle")},showDeleteButton:!1,updateFormObj:{},formInitialObj:{},initFormCount:0,rulesObj:{},passwordKeys:[],getFieldsValueHandle:function(e){return console.log(e)}}},2486:function(e,n,t){t.d(n,{A:function(){return i}});var o=t(7294),r=t(6411),a=t(5455),l=r.Z.Option,i=function(e){var n=e.options,t=e.width,a=e.value,i=e.onChange,c=e.mode;return o.createElement(r.Z,{style:{width:t},onChange:i,value:a,mode:c,allowClear:!0},n.map((function(e,n){return o.createElement(l,{key:n.toString(),value:e.value},e.label)})))};i.defaultProps={options:[],width:a.Z.selectComponentWidth,value:null,onChange:function(e){console.log(e)},mode:null}},2997:function(e,n,t){t.d(n,{AW:function(){return s},Dw:function(){return i},F$:function(){return c},Gc:function(){return m},IC:function(){return d},P8:function(){return u},SL:function(){return a},Wv:function(){return l}});var o=t(7294),r=t(2486),a=["id","len_title","len_refractivity","len_function","len_type","len_design","len_color","len_coat_color","len_price","len_sale_price","len_brand","image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5","image_cos_name6","image_cos_name7","image_cos_name8","detail_page_cos_name","contrast_lens_url","explains","add_time","update_time"],l=["id","image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5","image_cos_name6","image_cos_name7","image_cos_name8","detail_page_cos_name","add_time","update_time"],i=["id","image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5","image_cos_name6","image_cos_name7","image_cos_name8","detail_page_cos_name","add_time","update_time"],c={id:"ID",len_title:"镜片标题",len_refractivity:"折射率",len_function:" 功能",len_type:"种类",len_design:"设计",len_color:"颜色",len_coat_color:"膜层",len_price:"原价",len_sale_price:"优惠价",len_brand:"品牌",image_cos_name1:"主图1",image_cos_name2:"主图2",image_cos_name3:"主图3",image_cos_name4:"主图4",image_cos_name5:"主图5",image_cos_name6:"主图6",image_cos_name7:"主图7",image_cos_name8:"主图8",contrast_lens_url:"对比商品URL",explains:"说明",add_time:"创建日期",update_time:"更新日期"},s={len_function:o.createElement(r.A,{options:[{value:0,label:"未知"},{value:1,label:"防紫外线"},{value:2,label:"防辐射"},{value:3,label:"防蓝光"}]}),len_type:o.createElement(r.A,{options:[{value:0,label:"未知"},{value:1,label:"单焦"},{value:2,label:"多焦"}]}),len_design:o.createElement(r.A,{options:[{value:0,label:"未知"},{value:1,label:"球面"},{value:2,label:"非球面"}]}),len_color:o.createElement(r.A,{options:[{value:0,label:"未知"},{value:1,label:"透明"},{value:2,label:"彩片"}]}),len_coat_color:o.createElement(r.A,{options:[{value:0,label:"未知"},{value:1,label:"白晶膜"},{value:2,label:"绿膜"},{value:3,label:"黄绿膜"},{value:4,label:"蓝膜"},{value:5,label:"蓝绿双色膜"}]})},u=["image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5","image_cos_name6","image_cos_name7","image_cos_name8"],m=["len_title","len_refractivity","len_function","len_type","len_design","len_color","len_coat_color"],d={len_function:0,len_type:1,len_design:2,len_color:1,len_coat_color:2}},1878:function(e,n,t){t.d(n,{VV:function(){return i},iD:function(){return l}});var o=t(7294),r=t(5604),a=["lens-price/v1/lenspricelist","lens-price/v1/lensbrands"],l=function(e){var n=e.requestCount,t=e.reqParams,l=e.responseDataHandle,i=a[0];return o.createElement(r.Z,{responseDataHandle:l,api:i,method:"get",reqParams:t,reqObject:{},requestCount:n})};l.defaultProps={requestCount:0,reqParams:{},responseDataHandle:function(e){console.log(e)}};var i=function(e){var n=e.requestCount,t=e.reqObject,l=e.responseDataHandle,i=[].concat(a)[0];return o.createElement(r.Z,{responseDataHandle:l,api:i,method:"post",reqParams:{},reqObject:t,requestCount:n})};i.defaultProps={requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)}}},7147:function(e,n,t){var o=t(7294),r=t(4153),a=t(3308);t(7345);n.Z=function(e){var n=e.children,t=(0,o.useState)(0),l=t[0],i=t[1];return(0,o.useEffect)((function(){i(l+1)}),[]),o.createElement("div",{className:"flex-container"},o.createElement(a.Z,null),o.createElement(r.l,{requestCount:l}),o.createElement("div",{className:"flex-main-container"},n))}},2637:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var o=t(7294),r=t(7147),a=t(262),l=t(1597),i=t(7371),c=t(3299),s=t(6858),u=t(1135),m=t(8146),d=t(5071),f=t(2997);function p(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return v(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return v(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}var b=function(e){var n=e.drawerVisible,t=e.closeDrawer,r=e.sendQueryRequest,a=(0,o.useState)(0),l=a[0],i=a[1];return o.createElement(m.Z,{title:"Basic Drawer",placement:"top",closable:!1,visible:n},o.createElement(d.y,{columns:f.Gc,disabledKeys:f.Wv,notShowKeys:f.Dw,formKeyLabelObj:f.F$,formKeySelectComponentsObj:f.AW,onFinish:function(e){for(var n,t={},o=p(f.Gc);!(n=o()).done;){var a=n.value;(parseInt(e[a])>0||"string"==typeof e[a])&&(t[a]=e[a])}r(t)},cancelHandle:function(){i(l+1),t()},formInitialObj:f.IC,initFormCount:l}))},_=t(1878),g=function(){var e=(0,o.useState)(!1),n=e[0],t=e[1],r=(0,o.useState)(0),a=r[0],m=r[1],d=(0,o.useRef)({page:0}),f=(0,o.useRef)(!0),p=(0,o.useState)(!1),v=p[0],g=p[1],y=(0,o.useState)([]),h=y[0],C=y[1],E=function(){!v||f.current?(g(!0),console.log("reach end"),d.current=Object.assign({},d.current,{page:d.current.page+1}),m(a+1)):console.log("All loaded...")};return o.createElement("div",null,o.createElement(i.Z,null,o.createElement(c.Z,{onClick:function(){t(!0)},icon:o.createElement(s.Z,null)},"搜索"),o.createElement(c.Z,{onClick:function(){(0,l.navigate)("/lenscreate")}},"新建镜片")),o.createElement(b,{drawerVisible:n,closeDrawer:function(){t(!1)},sendQueryRequest:function(e){C([]),t(!1),d.current=Object.assign({},d.current,e),E()}}),o.createElement(u.Z,{productsData:h,loadMore:E,loading:v,hasMore:f.current}),o.createElement(_.iD,{requestCount:a,reqParams:d.current,responseDataHandle:function(e){!function(e){g(!1);for(var n=Object.keys(e),t=0,o=["code","results"];t<o.length;t++){var r=o[t];if(!n.includes(r))return!1}return!(1e3!==e.code||!Array.isArray(e.results))}(e)?(f.current=!0,d.current=Object.assign({},d.current,{page:d.current.page-1})):(C(h.concat(e.results)),f.current=!!e.next)}}))},y=function(){return o.createElement(r.Z,null,o.createElement(a.Z,{title:"Lens manage"}),o.createElement(g,null))}}}]);
//# sourceMappingURL=component---src-pages-lensmanagelist-js-6ed02c3665e3e662d211.js.map