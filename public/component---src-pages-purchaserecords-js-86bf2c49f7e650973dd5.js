(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"+6Fa":function(e,t,a){"use strict";a("DNiP"),a("f3/d"),a("a1Th"),a("h7Nl"),a("I5cv"),a("HAE/"),a("WLL4"),a("jm62"),a("8+KV"),a("0l/t"),a("ioFf"),a("rGqo"),a("yt8O"),a("Btvt"),a("RW0V");var n=a("wx14"),r=a("Ff2n"),o=a("rePB"),c=a("1OyB"),l=a("vuIU"),s=a("Ji7U"),i=a("md7G"),u=a("foSv"),d=a("q1tI"),m=a.n(d),p=a("TSYQ"),f=a.n(p);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(i.a)(this,a)}}var g=function(e){Object(s.a)(a,e);var t=_(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=n.props,a=t.disabled,r=t.onChange;a||("checked"in n.props||n.setState({checked:e.target.checked}),r&&r({target:v(v({},n.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},n.saveInput=function(e){n.input=e};var r="checked"in e?e.checked:e.defaultChecked;return n.state={checked:r},n}return Object(l.a)(a,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,t=this.props,a=t.prefixCls,c=t.className,l=t.style,s=t.name,i=t.id,u=t.type,d=t.disabled,p=t.readOnly,b=t.tabIndex,v=t.onClick,_=t.onFocus,g=t.onBlur,h=t.autoFocus,O=t.value,y=t.required,j=Object(r.a)(t,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","autoFocus","value","required"]),E=Object.keys(j).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=j[t]),e}),{}),C=this.state.checked,x=f()(a,c,(e={},Object(o.a)(e,"".concat(a,"-checked"),C),Object(o.a)(e,"".concat(a,"-disabled"),d),e));return m.a.createElement("span",{className:x,style:l},m.a.createElement("input",Object(n.a)({name:s,id:i,type:u,required:y,readOnly:p,disabled:d,tabIndex:b,className:"".concat(a,"-input"),checked:!!C,onClick:v,onFocus:_,onBlur:g,onChange:this.handleChange,autoFocus:h,ref:this.saveInput,value:O},E)),m.a.createElement("span",{className:"".concat(a,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?v(v({},t),{},{checked:e.checked}):null}}]),a}(d.Component);g.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){}},t.a=g},"4iqU":function(e,t,a){},"6+Zk":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),o=a("W9HT"),c=(a("4iqU"),function(e){var t=e.spinning,a=Object(n.useState)(!1),c=a[0],l=a[1],s={display:c?"block":"none"};return Object(n.useEffect)((function(){l(t)}),[t]),r.a.createElement("div",{className:"overall-loading",style:s},r.a.createElement(o.a,{spinning:t,size:"large"}))});c.defaultProps={spinning:!1},t.a=c},I5AO:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("q1tI"),r=a.n(n),o=function(e){var t=e.visible,a=Object(n.useState)(0),o=a[0],c=a[1];return Object(n.useEffect)((function(){if(t>0){var e="undefined"!=typeof document?document.documentElement.scrollTop||document.body.scrollTop:0;c(e)}var a;0===t&&(a=o,"undefined"!=typeof window&&setTimeout((function(){window.scrollTo({top:parseInt(a),behavior:"smooth"})}),500))}),[t]),r.a.createElement(r.a.Fragment,null)};o.defaultProps={visible:0}},"ID/q":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a("8+KV");var n=a("cDf5"),r=a.n(n);function o(e,t){"function"==typeof e?e(t):"object"===r()(e)&&e&&"current"in e&&(e.current=t)}function c(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){t.forEach((function(t){o(t,e)}))}}},oY6d:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),o=a("9qUX"),c=(a("91GP"),a("BMrR")),l=a("kPKH"),s=a("zeV3"),i=a("3S7+"),u=a("2/Rp"),d=a("rLCj"),m=a("l+S1"),p=(a("VRzm"),a("a1Th"),a("rGqo"),a("yt8O"),a("Btvt"),a("RW0V"),a("Z2Ku"),a("L9s1"),a("o0o1")),f=a.n(p),b=(a("ls82"),a("2fM7")),v=a("tsqr"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},g=a("6VBw"),h=function(e,t){return n.createElement(g.a,Object.assign({},e,{ref:t,icon:_}))};h.displayName="RedoOutlined";var O,y=n.forwardRef(h),j=a("8Kyq"),E=function(){return new Promise((function(e,t){var a=!1;if("undefined"!=typeof document&&(a="complete"===document.readyState),a)if(O=Object(j.a)()){for(var n=O.GET_PRINTER_COUNT(),r=[],o=0;o<n;o++)r.push(O.GET_PRINTER_NAME(o));e(r)}else v.b.error("连接打印服务器失败..."),t("LODOP server connect error...");else v.b.error("请等待页面加载完成, 再刷新打印机..."),t("LODOP server connecting...")}))},C=a("7BUj"),x=a("oG67"),S=a("Sm+g"),k=a("kO4H"),P=["printer-admin/v1/defaultprinter"],R=a("dAhA");function D(e,t,a,n,r,o,c){try{var l=e[o](c),s=l.value}catch(i){return void a(i)}l.done?t(s):Promise.resolve(s).then(n,r)}var w=b.a.Option,q=function(e){var t=e.onChange,a=e.purchaseRecordsList,o=e.hasAllPrintCount,c=e.setHasAllPrintCount,l=Object(n.useState)(null),d=l[0],m=l[1],p=Object(n.useRef)(""),_=Object(n.useState)([]),g=_[0],h=_[1],O=Object(n.useState)([]),j=O[0],S=O[1],q=function(){Object(x.a)(),E().then(function(){var e,t=(e=f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=[],n=0;n<t.length;n++)a.push({label:t[n],value:n});h(a),v.b.info("打印机列表刷新成功!");case 4:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function c(e){D(o,n,r,c,l,"next",e)}function l(e){D(o,n,r,c,l,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e),h([])}))};Object(n.useEffect)((function(){"undefined"!=typeof document&&"complete"===document.readyState?q():v.b.info("请网页加载完成后刷新打印机!!!")}),[]),Object(n.useEffect)((function(){var e,t=C.a.pagesName.purchaseRecords;(e=t,new Promise((function(t,a){var n=[].concat(P)[0];Object(k.a)(n,"get",{},{}).then((function(n){if(Object.keys(n).includes("results")&&n.results.length>0){for(var r=n.results,o=0;o<r.length;o++){var c=r[o];if(c.page_name===e)return void t(c.printer_name)}a("None default printer...")}else a("Error network...")})).catch((function(e){console.log(e),a(e)}))}))).then((function(e){e&&g.length>0&&I(function(e,t){for(var a=0;a<e.length;a++){var n=e[a];if(n.label===t)return n.value}return null}(g,e))})).catch((function(e){return console.log(e)}))}),[g]),Object(n.useEffect)((function(){S(function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];n.has_print||t.push(n)}return console.log(t),t}(a))}),[a]);var I=function(e){console.log(e),m(e),g.length>e&&g[e]instanceof Object&&Object.keys(g[e]).includes("label")&&(p.current=g[e].label),t(e)},H=function(e){c(o+1)};return r.a.createElement("div",{style:{width:"100%",height:"auto",margin:"10px 2px"}},r.a.createElement(s.b,null,r.a.createElement(b.a,{placeholder:"请选择打印机",onChange:I,value:d,style:{minWidth:120,maxWidth:220}},g.map((function(e,t){return r.a.createElement(w,{key:t.toString(),value:e.value},e.label)}))),r.a.createElement(u.a,{disabled:j.length<1,onClick:function(){var e,t={page_name:C.a.pagesName.purchaseRecords,printer_name:p.current};(e=t,new Promise((function(t,a){var n=[].concat(P)[0];Object(k.a)(n,"post",{},e).then((function(e){t(e)})).catch((function(e){console.log(e),a(e)}))}))).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),Object(R.b)(j,d,H)},type:"primary"},"打印(未打印)"),r.a.createElement(i.a,{title:"刷新打印机"},r.a.createElement(u.a,{shape:"circle",icon:r.a.createElement(y,null),onClick:q}))))};q.defaultProps={onChange:function(e){return console.log(e)},purchaseRecordsList:[],hasAllPrintCount:0,setHasAllPrintCount:function(e){return console.log(e)}};a("f3/d");var I=a("kLXV"),H=a("PArb"),L=a("uZ9c"),A=function(e){var t=e.modalState,a=e.setModalState,n=e.selectCustomerHandle;e.clickCreatedCustomerHandle;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{visible:t,title:"选择顾客",closable:!1,footer:[r.a.createElement(u.a,{key:"back",onClick:function(){a(!1)}},"取消")]},r.a.createElement(L.a,{selectButtonOnClick:n})))};A.defaultProps={modalState:!1,setModalState:function(e){return console.log(e)},selectCustomerHandle:function(e){console.log(e)},clickCreatedCustomerHandle:function(e){console.log(e)}};a("KKXr"),a("pIFo");var N=a("Vl3Y"),F=(a("ioFf"),a("V+eJ"),a("lSNA")),M=a.n(F),T=a("pVnL"),K=a.n(T),V=a("+6Fa"),B=a("TSYQ"),Y=a.n(B),U=a("H84U"),G=n.createContext(null),z=G.Provider,W=G,$=a("ID/q"),J=a("uaoM"),Q=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},X=function(e,t){var a,r=n.useContext(W),o=n.useContext(U.b),c=o.getPrefixCls,l=o.direction,s=n.useRef(),i=Object($.a)(t,s);n.useEffect((function(){Object(J.a)(!("optionType"in e),"Radio","`optionType` is only support in Radio.Group.")}),[]);var u=e.prefixCls,d=e.className,m=e.children,p=e.style,f=Q(e,["prefixCls","className","children","style"]),b=c("radio",u),v=K()({},f);r&&(v.name=r.name,v.onChange=function(t){e.onChange&&e.onChange(t),(null==r?void 0:r.onChange)&&r.onChange(t)},v.checked=e.value===r.value,v.disabled=e.disabled||r.disabled);var _=Y()("".concat(b,"-wrapper"),(a={},M()(a,"".concat(b,"-wrapper-checked"),v.checked),M()(a,"".concat(b,"-wrapper-disabled"),v.disabled),M()(a,"".concat(b,"-wrapper-rtl"),"rtl"===l),a),d);return n.createElement("label",{className:_,style:p,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},n.createElement(V.a,K()({},v,{prefixCls:b,ref:i})),void 0!==m?n.createElement("span",null,m):null)},Z=n.forwardRef(X);Z.displayName="Radio",Z.defaultProps={type:"radio"};var ee=Z,te=(a("bWfx"),a("J4zp")),ae=a.n(te);a("LK8F"),a("rE2o"),a("XfO3"),a("HEwt"),a("h7Nl");function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(s){r=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var oe=a("3Nzz"),ce=n.forwardRef((function(e,t){var a=n.useContext(U.b),r=a.getPrefixCls,o=a.direction,c=n.useContext(oe.b),l=function(e,t){var a=t||{},r=a.defaultValue,o=a.value,c=a.onChange,l=a.postState,s=ne(n.useState((function(){return void 0!==o?o:void 0!==r?"function"==typeof r?r():r:"function"==typeof e?e():e})),2),i=s[0],u=s[1],d=void 0!==o?o:i;l&&(d=l(d));var m=n.useRef(!0);return n.useEffect((function(){m.current?m.current=!1:void 0===o&&u(o)}),[o]),[d,function(e){u(e),d!==e&&c&&c(e,d)}]}(e.defaultValue,{value:e.value}),s=ae()(l,2),i=s[0],u=s[1];return n.createElement(z,{value:{onChange:function(t){var a=i,n=t.target.value;"value"in e||u(n);var r=e.onChange;r&&n!==a&&r(t)},value:i,disabled:e.disabled,name:e.name}},function(){var a,l=e.prefixCls,s=e.className,u=void 0===s?"":s,d=e.options,m=e.optionType,p=e.buttonStyle,f=e.disabled,b=e.children,v=e.size,_=e.style,g=e.id,h=e.onMouseEnter,O=e.onMouseLeave,y=r("radio",l),j="".concat(y,"-group"),E=b;if(d&&d.length>0){var C="button"===m?"".concat(y,"-button"):y;E=d.map((function(e){return"string"==typeof e?n.createElement(ee,{key:e,prefixCls:C,disabled:f,value:e,checked:i===e},e):n.createElement(ee,{key:"radio-group-value-options-".concat(e.value),prefixCls:C,disabled:e.disabled||f,value:e.value,checked:i===e.value,style:e.style},e.label)}))}var x=v||c,S=Y()(j,"".concat(j,"-").concat(p),(a={},M()(a,"".concat(j,"-").concat(x),x),M()(a,"".concat(j,"-rtl"),"rtl"===o),a),u);return n.createElement("div",{className:S,style:_,onMouseEnter:h,onMouseLeave:O,id:g,ref:t},E)}())}));ce.defaultProps={buttonStyle:"outline"};var le=n.memo(ce),se=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},ie=function(e,t){var a=n.useContext(W),r=n.useContext(U.b).getPrefixCls,o=e.prefixCls,c=se(e,["prefixCls"]),l=r("radio-button",o);return a&&(c.checked=e.value===a.value,c.disabled=e.disabled||a.disabled),n.createElement(ee,K()({prefixCls:l},c,{type:"radio",ref:t}))},ue=n.forwardRef(ie),de=ee;de.Button=ue,de.Group=le;var me=de,pe=a("fyUT"),fe=a("5rEg"),be=b.a.Option,ve={width:180},_e={1:["negative","negative"],2:["negative","positive"],3:["positive","negative"],4:["positive","positive"]},ge=function(e){var t=null,a=null,n=null,r=null;if(!e)return{sph:t,cyl:a,axi:n,add:r};var o=e.replace(/(^\s*)|(\s*$)/g,"");if(o.indexOf("ADD")>1){var c=o.split("ADD");r=c[1].replace(/(^\s*)|(\s*$)/g,"").replace(":",""),o=c[0].replace(/(^\s*)|(\s*$)/g,"")}if(o.length>0)if(o.indexOf("-",4)>5){t=o.slice(0,o.indexOf("-",4)).replace(/(^\s*)|(\s*$)/g,"");var l=o.slice(o.indexOf("-",4)).split("*");a=l[0].replace(/(^\s*)|(\s*$)/g,""),n=parseInt(l[1].replace(/(^\s*)|(\s*$)/g,""))}else t=o.replace(/(^\s*)|(\s*$)/g,"");return{sph:t,cyl:a,axi:n,add:r}},he=function(e){return e&&Math.abs(parseFloat(e))>0},Oe=function(e){var t={lackPd:0,lackAxiR:0,lackAxiL:0};e.pd.toString().length<2&&(t.lackPd=1);var a=e.axiR,n=e.axiL;return e.cylR&&Math.abs(parseFloat(e.cylR))>0&&(a?(""!==a&&null!=a||(t.lackAxiR=1),isNaN(a)&&(t.lackAxiR=1)):t.lackAxiR=1),e.cylL&&Math.abs(parseFloat(e.cylL))>0&&(n?(""!==n&&null!=n||(t.lackAxiL=1),isNaN(n)&&(t.lackAxiL=1)):t.lackAxiL=1),t},ye=function(e){var t=e.value,a=e.onChange,n=e.selectType,o=void 0===n?0:n,c=e.positiveNegative,l=void 0===c?"negative":c,s=e.placeholder,i=void 0===s?"请选择球镜":s,u=function(e,t){void 0===e&&(e="negative"),void 0===t&&(t=90);for(var a=[],n="negative"===e?"-":"+",r=0;r<t;r++){var o=n+(.25*r).toFixed(2);a.push({label:o,value:o})}return a}(l,[90,25,17][o]);return r.a.createElement(b.a,{style:ve,value:t,onChange:a,placeholder:i},u.map((function(e){return r.a.createElement(be,{key:e.value,value:e.value},e.label)})))},je=["取消 重新输入, 确认 直接提交!","取消 重新输入, 确认 直接提交!(删除散光光度)"],Ee=["未输入瞳距","未输入散光轴位","未输入瞳距和散光轴位"],Ce=function(e){var t=e.sourceDiopterObj,a=e.selectedHandle,o=e.cancelHandle,c=N.a.useForm()[0],l=Object(n.useState)(!1),i=l[0],d=l[1],m=Object(n.useState)(1),p=m[0],f=m[1],b=Object(n.useState)("negative"),v=b[0],_=b[1],g=Object(n.useState)("negative"),h=g[0],O=g[1],y=Object(n.useState)(je[0]),j=y[0],E=y[1],x=Object(n.useState)(Ee[0]),S=x[0],k=x[1],P=Object(n.useState)(!1),R=P[0],D=P[1],w=Object(n.useRef)({diopter_l:"",diopter_r:"",pupillary_distance:""});Object(n.useEffect)((function(){D(!1);var e=ge(t.diopter_r),a=ge(t.diopter_l),n=e.add?e.add:a.add;n&&D(!0);var r={sphR:e.sph,cylR:e.cyl,axiR:e.axi,sphL:a.sph,cylL:a.cyl,axiL:a.axi,add:n,pd:t.pupillary_distance};c.setFieldsValue(r)}),[t]);var q=r.a.createElement(N.a.Item,{label:"ADD",name:"add"},r.a.createElement(ye,{selectType:2,positiveNegative:"positive",placeholder:"请选择ADD"})),L=r.a.createElement(N.a.Item,null,r.a.createElement(u.a,{type:"link",onClick:function(){return D(!0)}},"ADD..."));return r.a.createElement("div",null,r.a.createElement("h6",null,"正负光度:  ",r.a.createElement(me.Group,{onChange:function(e){console.log(e.target.value),f(e.target.value);var t=_e[e.target.value];_(t[0]),O(t[1])},value:p},r.a.createElement(me,{value:1},"-/-"),r.a.createElement(me,{value:2},"-/+"),r.a.createElement(me,{value:3},"+/-"),r.a.createElement(me,{value:4},"+/+"))),r.a.createElement(H.a,null),r.a.createElement(N.a,Object.assign({form:c,name:"diopters-form",onFinish:function(e){var t,n,r,o;w.current=(n=(t=e).sphR?t.sphR:"",r=t.sphL?t.sphL:"",o=Oe(t),he(t.cylR)&&0===o.lackAxiR&&(n=(n=""===n?"-0.00":n)+" "+t.cylR+" * "+t.axiR),he(t.cylL)&&0===o.lackAxiR&&(r=(r=""===r?"-0.00":r)+" "+t.cylL+" * "+t.axiL),he(t.add)&&(n=n+" ADD:"+t.add,r=r+" ADD:"+t.add),{diopter_r:n,diopter_l:r,pupillary_distance:t.pd});var c=Oe(e),l=-1;if(c.lackPd>0||c.lackAxiR>0||c.lackAxiL>0){var s=c.lackPd>0,i=c.lackAxiR>0,u=c.lackAxiL>0;(l=(l=s?0:l)>-1?i||u?2:l:i||u?1:l)>-1&&(k(Ee[l]),E(0===l?je[0]:je[1]),d(!0))}else a(w.current)}},C.a.formCommonStyle.layoutForm),r.a.createElement(N.a.Item,{label:"光度R"},r.a.createElement(N.a.Item,{name:"sphR"},r.a.createElement(ye,{selectType:0,positiveNegative:v})),r.a.createElement(N.a.Item,{name:"cylR"},r.a.createElement(ye,{selectType:1,positiveNegative:h,placeholder:"请选择柱镜"})),r.a.createElement(N.a.Item,{name:"axiR"},r.a.createElement(pe.a,{min:1,max:180,style:{width:"8rem"},placeholder:"请输入轴位"}))),r.a.createElement(N.a.Item,{label:"光度L"},r.a.createElement(N.a.Item,{name:"sphL"},r.a.createElement(ye,{selectType:0,positiveNegative:v})),r.a.createElement(N.a.Item,{name:"cylL"},r.a.createElement(ye,{selectType:1,positiveNegative:h,placeholder:"请选择柱镜"})),r.a.createElement(N.a.Item,{name:"axiL"},r.a.createElement(pe.a,{min:1,max:180,style:{width:"8rem"},placeholder:"请输入轴位"}))),r.a.createElement(N.a.Item,{label:"PD",name:"pd"},r.a.createElement(fe.a,{placeholder:"请输入瞳距",style:{maxWidth:"10rem"}})),R?q:L,r.a.createElement(N.a.Item,C.a.formCommonStyle.tailFormItemLayout,r.a.createElement(s.b,null,r.a.createElement(u.a,{type:"primary",htmlType:"submit"},"确定"),r.a.createElement(u.a,{htmlType:"button",onClick:o},"取消")))),r.a.createElement(I.a,{title:S,visible:i,onOk:function(){d(!1),a(w.current)},onCancel:function(){return d(!1)},okText:"确认",cancelText:"取消"},r.a.createElement("p",null,j)))};Ce.defaultProps={sourceDiopterObj:{diopter_l:"",diopter_r:"",pupillary_distance:""},selectedHandle:function(e){return console.log(e)},cancelHandle:function(){return console.log("Cancel select diopters...")}};var xe=function(e){var t=e.sourceDiopterObj,a=e.modalState,n=e.setModalState,o=e.selectHandle;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{visible:a,title:"选择光度",closable:!1,footer:null},r.a.createElement(Ce,{sourceDiopterObj:t,selectedHandle:o,cancelHandle:function(){return n(!1)}})))};xe.defaultProps={sourceDiopterObj:{diopter_l:"",diopter_r:"",pupillary_distance:""},modalState:!1,setModalState:function(e){return console.log(e)},selectCustomerHandle:function(e){console.log(e)},clickCreatedCustomerHandle:function(e){console.log(e)}};var Se=a("g/of"),ke=a("+eQT"),Pe=a("vpoQ"),Re=(a("/a2Y"),ke.a.RangePicker),De=["id","input_staff_id","latest_modify_staff_id","customer_id","customer_name","group_purchase_commander_id","group_purchase_commander_name","product_title","diopter_r","diopter_l","pupillary_distance","receive_address","products_quantity","purchase_amount","products_cost","sale_platform","order_state","pay_table_id","pay_platform","add_time","update_time","explains","explains_customer","has_print","image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5"],we=["id","input_staff_id","latest_modify_staff_id","customer_name","group_purchase_commander_id","group_purchase_commander_name","diopter_r","diopter_l","pupillary_distance","receive_address","pay_table_id","add_time","update_time","has_print","image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5"],qe=["input_staff_id","latest_modify_staff_id","customer_id","group_purchase_commander_id","group_purchase_commander_name","receive_address","image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5"],Ie={id:"订单ID",input_staff_id:"订单创建管理员",latest_modify_staff_id:"最后修改管理员",customer_id:"顾客ID",customer_name:"顾客",group_purchase_commander_id:"团购团长ID",group_purchase_commander_name:"团购团长",product_title:"商品标题",diopter_r:"光度R",diopter_l:"光度L",pupillary_distance:"瞳距(PD)",receive_address:"收货地址",products_quantity:"商品数量",purchase_amount:"订单金额",products_cost:"商品成本",sale_platform:"销售平台",order_state:"订单状态",pay_table_id:"支付表ID",pay_platform:"支付方式",add_time:"新建时间",update_time:"更新时间",explains:"商家备注",explains_customer:"顾客留言",has_print:"打印状态",image_cos_name1:"订单图片1",image_cos_name2:"订单图片2",image_cos_name3:"订单图片3",image_cos_name4:"订单图片4",image_cos_name5:"订单图片5",range_add_time:"日期",add_time_start:"开始时间",add_time_end:"结束时间"},He=r.a.createElement(Re,null),Le=r.a.createElement(ke.a,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss"}),Ae={has_print:r.a.createElement(Pe.a,{options:[{value:0,label:"未打印"},{value:1,label:"已打印"},{value:2,label:"全部"}]}),sale_platform:r.a.createElement(Pe.a,{options:[{value:0,label:"未知或未输入"},{value:1,label:"门店"},{value:2,label:"淘宝"},{value:3,label:"小程序"},{value:4,label:"微信-方灵芝"},{value:5,label:"微信-展望眼镜"}]}),order_state:r.a.createElement(Pe.a,{options:[{value:0,label:"订单交易完成"},{value:1,label:"未付款"},{value:2,label:"定制中"},{value:3,label:"已发货"},{value:4,label:"售后处理中"}]}),pay_platform:r.a.createElement(Pe.a,{options:[{value:0,label:"未知"},{value:1,label:"微信支付"},{value:2,label:"支付宝支付"},{value:3,label:"刷卡"},{value:4,label:"现金"}]}),range_add_time:He,add_time_start:Le,add_time_end:Le},Ne=function(e){return{customer_name:{buttonTips:"选择顾客",clickMethod:function(){return e(1)}},group_purchase_commander_name:{buttonTips:"选择团长",clickMethod:function(){return e(2)}},pupillary_distance:{buttonTips:"选择光度瞳距",clickMethod:function(){return e(3)}}}},Fe=["id","customer_name","sale_platform","order_state","range_add_time","has_print"],Me={id:0,input_staff_id:0,latest_modify_staff_id:0,customer_id:0,customer_name:"",group_purchase_commander_id:0,product_title:"",diopter_r:"",diopter_l:"",pupillary_distance:"",receive_address:"",products_quantity:0,purchase_amount:0,products_cost:0,sale_platform:0,order_state:0,pay_table_id:0,pay_platform:0,add_time:"",update_time:"",explains:"",explains_customer:"",has_print:2,image_cos_name1:"",image_cos_name2:"",image_cos_name3:"",image_cos_name4:"",image_cos_name5:""},Te=["image_cos_name"],Ke=["records-admin/v1/purchaserecord","records-admin/v1/purchaserecordproducts","records-admin/v1/purchaserecorddeliveryaddress"],Ve=function(e){var t=e.requestCount,a=e.reqParams,n=e.responseDataHandle,o=Ke[0];return r.a.createElement(S.a,{responseDataHandle:n,api:o,method:"get",reqParams:a,reqObject:{},requestCount:t.length})};Ve.defaultProps={requestCount:0,reqParams:{},responseDataHandle:function(e){console.log(e)}};var Be=function(e){var t=e.requestCount,a=e.reqObject,n=e.responseDataHandle,o=[].concat(Ke)[0];return r.a.createElement(S.a,{responseDataHandle:n,api:o,method:"post",reqParams:{},reqObject:a,requestCount:t})};Be.defaultProps={requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)}};var Ye=function(e){var t=e.requestCount,a=e.reqObject,n=e.responseDataHandle,o=e.id,c=[].concat(Ke)[0]+"/"+o;return r.a.createElement(S.a,{responseDataHandle:n,api:c,method:"put",reqParams:{},reqObject:a,requestCount:t})};Ye.defaultProps={requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)},id:0};var Ue=function(e){var t=e.requestCount,a=e.responseDataHandle,n=e.id,o=[].concat(Ke)[0]+"/"+n;return r.a.createElement(S.a,{responseDataHandle:a,api:o,method:"delete",reqParams:{},reqObject:{},requestCount:t})};Ue.defaultProps={requestCount:0,responseDataHandle:function(e){console.log(e)},id:0};var Ge=a("p8V/"),ze=["id","group_purchase_commander_id","group_purchase_commander_name","pay_table_id","add_time","update_time","input_staff_id","latest_modify_staff_id","customer_id","receive_address","explains_customer","image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5","has_print"],We=function(e){var t=e.visible,a=e.setVisible,o=e.reloadListCount,c=e.setReloadListCount,l=Object(n.useRef)({}),s=Object(n.useRef)({createCount:0}),i=Object(n.useState)({diopter_l:"",diopter_r:"",pupillary_distance:""}),u=i[0],d=i[1],m=Object(n.useState)({}),p=m[0],f=m[1],b=Object(n.useState)(0),_=b[0],g=b[1],h=Object(n.useState)(0),O=h[0],y=h[1],j=Object(n.useRef)({}),E=Object(n.useRef)({}),C=Object(n.useState)(0),x=C[0],S=C[1];Object(n.useEffect)((function(){t&&(l.current={},E.current={},s.current={createCount:s.current.createCount+1},g(_+1),d({diopter_l:"",diopter_r:"",pupillary_distance:""}))}),[t]);var k=function(){a(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{visible:t,title:"PurchaseRecords 新建",closable:!1,footer:null},r.a.createElement("div",{style:{width:"100%",height:"auto",textAlign:"center"}},r.a.createElement(Se.b,{oldObj:s.current,maxImagesNum:5,imageKeyName:Te[0],onChange:function(e){l.current=Object.assign({},e)}})),r.a.createElement(H.a,null),r.a.createElement(Ge.a,{columns:De,disabledKeys:we,notShowKeys:ze,formKeyLabelObj:Ie,formKeySelectComponentsObj:Ae,formKeysItemButtonObj:Ne(S),onFinish:function(e){var t=Object.assign({},e,l.current,{customer_id:E.current.id});delete t.customer_name,j.current=t,console.log(j.current),y(O+1)},cancelHandle:k,showDeleteButton:!1,updateFormObj:p,formInitialObj:Me,initFormCount:_}),r.a.createElement(Be,{requestCount:O,reqObject:j.current,responseDataHandle:function(e){Object.keys(e).includes("code")&&1e3===e.code?(k(),c(o+1)):v.b.error("网络错误...")}}),r.a.createElement(A,{modalState:1===x,setModalState:S,selectCustomerHandle:function(e){console.log(e,e.name);var t=e.name;Object.keys(e).includes("wx_info")&&(t=t+"("+e.wx_info.wx_nickname+")"),E.current=e,f({customer_name:t}),S(!1)}}),r.a.createElement(xe,{sourceDiopterObj:u,modalState:3===x,setModalState:S,selectHandle:function(e){d(e),f(e),S(0)}})))};We.defaultProps={visible:!1,setVisible:function(e){return console.log(e)},reloadListCount:0,setReloadListCount:function(e){return console.log(e)}};var $e=We,Je=a("/wGt"),Qe=["customer_name"],Xe=function(e){var t=e.visible,a=e.setVisible,o=e.queryHandle,c=Object(n.useRef)(0),l=Object(n.useState)(0),s=l[0],i=l[1],u=Object(n.useState)({}),d=u[0],m=u[1],p=Object(n.useState)(!1),f=p[0],b=p[1],v=function(){i(s+1),a(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Je.a,{title:"销售记录查询",width:"100%",height:"400px",placement:"top",onClose:v,visible:t,bodyStyle:{paddingBottom:80},footer:null},r.a.createElement(Ge.a,{columns:Fe,disabledKeys:Qe,formKeyLabelObj:Ie,formKeySelectComponentsObj:Ae,formKeysItemButtonObj:Ne(b),onFinish:function(e){var t=Object.assign({},e),a={},n=e.id?parseInt(e.id):0;if(n>0)a.id=n;else{c.current>0&&(a.customer_id=c.current);var r=t.sale_platform;r>0&&r<6&&(a.sale_platform=r);var l=t.order_state;l>0&&l<5&&(a.order_state=l);var s=t.range_add_time;Array.isArray(s)&&2===s.length&&(a.add_time_start=s[0].format("YYYY-MM-DD"),a.add_time_end=s[1].format("YYYY-MM-DD"));var i=t.has_print;0!==i&&1!==i||(a.has_print=i)}o(a),setTimeout((function(){v()}),50)},cancelHandle:function(){return a(!1)},showDeleteButton:!1,formInitialObj:Me,initFormCount:s,updateFormObj:d})),r.a.createElement(A,{modalState:f,setModalState:b,selectCustomerHandle:function(e){console.log(e,e.name),c.current=e.id;var t=e.name;Object.keys(e).includes("wx_info")&&(t=t+"("+e.wx_info.wx_nickname+")"),m({customer_name:t}),b(!1)}}))};Xe.defaultProps={visible:!1,setVisible:function(e){console.log(e)},queryHandle:function(e){console.log(e)}};var Ze=Xe,et=(a("xfY5"),a("fN96"),a("6+Zk")),tt=a("SGsa"),at=function(e){var t=e.visible,a=e.setVisible,o=e.oldObj,c=e.successDeletedOrUpdated,l=Object(n.useState)(!1),s=l[0],i=l[1],u=Object(n.useRef)({}),d=Object(n.useState)({diopter_l:"",diopter_r:"",pupillary_distance:""}),m=d[0],p=d[1],f=Object(n.useState)({}),b=f[0],_=f[1],g=Object(n.useState)(0),h=g[0],O=g[1],y=Object(n.useState)(0),j=y[0],E=y[1],C=Object(n.useRef)({}),x=Object(n.useState)(0),S=x[0],k=x[1],P=Object(n.useState)(0),R=P[0],D=P[1];Object(n.useEffect)((function(){t>0&&w()}),[t,o]);var w=function(){O(h+1);var e="",t=0;try{Object.keys(o).includes("customer_info")&&(e=Object(tt.a)(o.customer_info)),t=o.has_print?1:0}catch(n){console.error(n),console.log(o)}var a=Object.assign({},o,{customer_name:e,has_print:t});_(a),p({diopter_r:a.diopter_r,diopter_l:a.diopter_l,pupillary_distance:a.pupillary_distance})};return r.a.createElement(I.a,{visible:t,title:"PurchaseRecords",closable:!1,footer:null},r.a.createElement(et.a,{spinning:s}),r.a.createElement("div",{style:{width:"100%",height:"auto",textAlign:"center"}},r.a.createElement(Se.b,{maxImagesNum:5,imageKeyName:"image_cos_name",oldObj:o,onChange:function(e){u.current=e}})),r.a.createElement(H.a,null),r.a.createElement(Ge.a,{columns:De,disabledKeys:we,notShowKeys:qe,formKeyLabelObj:Ie,formKeySelectComponentsObj:Ae,formKeysItemButtonObj:Ne(D),onFinish:function(e){var t=1===e.has_print,a=Object.assign({},e,u.current,{customer_id:b.customer_id,has_print:t});console.log(a),i(!0),C.current=a,E(j+1)},cancelHandle:function(){return a(0)},showDeleteButton:!0,deleteHandle:function(){Object.keys(o).includes("id")&&o.id>0?(k(S+1),c({method:"delete",result:null})):v.b.warn("修改顾客后不能直接删除, 关闭并重新打开再删除")},updateFormObj:b,formInitialObj:{},initFormCount:h}),r.a.createElement(Ye,{requestCount:j,reqObject:C.current,responseDataHandle:function(e){i(!1),Object.keys(e).includes("code")&&1e3===e.code?(v.b.success("修改成功"),c({method:"update",result:e}),a(0)):v.b.error("网络错误...")},id:C.current.id}),r.a.createElement(Ue,{requestCount:S,responseDataHandle:function(e){return a(0)},id:o.id}),r.a.createElement(A,{modalState:1===R,setModalState:D,selectCustomerHandle:function(e){console.log(e,e.name);var t=e.name;Object.keys(e).includes("wx_info")&&(t=t+"("+e.wx_info.wx_nickname+")"),_({customer_info:e,customer_id:e.id,customer_name:t}),D(!1)}}),r.a.createElement(xe,{sourceDiopterObj:m,modalState:3===R,setModalState:D,selectHandle:function(e){p(e),_(e),D(0)}}))};at.defaultProps={visible:!1,setVisible:function(e){return console.log(e)},oldObj:{}};var nt=at,rt=a("S0IU"),ot=a("ajnz"),ct=a("kunR"),lt=(a("TSQ7"),a("nUNa")),st=function(e){var t=e.initAreaList,a=e.selectedAreaHandle;return r.a.createElement(lt.AreaSelect,{onChange:function(e){console.log(e),a(e)},level:2,data:ct.pcaa,defaultArea:t})};st.defaultProps={initAreaObj:[],selectedAreaHandle:function(e){return console.log(e)}};var it=["id","express_company_code","express_number"],ut=[],dt=["password","id"],mt={id:"ID",express_company_code:"快递公司",express_number:"快递单号",add_time:"创建时间",update_time:"更新时间",explains:"说明"},pt=function(e){var t=e.value,a=void 0===t?"":t,o=e.onChange,c=void 0===o?function(e){return console.log(e)}:o,l=Object(n.useState)([]),s=l[0],i=l[1];return Object(n.useEffect)((function(){new Promise((function(e,t){Object(k.a)("kdniao-admin/v1/kdniaoexpresscompanycodes","get",{},{}).then((function(t){e(t)})).catch((function(e){console.log(e),t(e)}))})).then((function(e){for(var t=e.results,a=[],n=0;n<t.length;n++){var r=t[n];a.push({value:r.express_company_code,label:r.express_company_name})}i(a)})).catch((function(e){console.log(e),i([])}))}),[]),r.a.createElement(Pe.a,{options:s,value:a,onChange:c})},ft={express_company_code:r.a.createElement(pt,null)},bt={password:[{required:!0,message:"Please input Password!"}]},vt=["pic"],_t=["delivery-address/v1/customerdeliveryaddress"],gt=function(e){var t=e.requestCount,a=e.reqObject,n=e.responseDataHandle,o=e.id,c=[].concat(_t)[0]+"/"+o;return r.a.createElement(S.a,{responseDataHandle:n,api:c,method:"put",reqParams:{},reqObject:a,requestCount:t})};gt.defaultProps={requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)},id:0};var ht=function(e){var t=e.requestCount,a=e.responseDataHandle,n=e.id,o=[].concat(_t)[0]+"/"+n;return r.a.createElement(S.a,{responseDataHandle:a,api:o,method:"delete",reqParams:{},reqObject:{},requestCount:t})};ht.defaultProps={requestCount:0,responseDataHandle:function(e){console.log(e)},id:0};var Ot=function(e){e.visible;var t=e.setVisible,a=e.oldObj,o=e.purchaseRecordId,c=e.customerId,l=Object(n.useState)([]),s=(l[0],l[1]),i=(Object(n.useRef)({}),Object(n.useState)("")),u=(i[0],i[1],Object(n.useState)({})),d=u[0],m=u[1],p=Object(n.useState)(0),f=p[0],b=p[1],_=Object(n.useState)(0),g=_[0],h=(_[1],Object(n.useRef)({})),O=Object(n.useState)(0),y=O[0];O[1];Object(n.useEffect)((function(){j()}),[a]);var j=function(){b(f+1),m(Object.assign({},a));for(var e=[],t=vt[0],n=1;n<10;n++){var r=t+n,o=r+"_url",c=a[r],l=a[o];"string"==typeof c&&c.length>5&&e.push({cosNameKey:r,cosName:c,urlKey:o,url:l})}s(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,null),r.a.createElement(Ge.b,{columns:it,disabledKeys:ut,notShowKeys:dt,formKeyLabelObj:mt,formKeySelectComponentsObj:ft,onFinish:function(e){var a=Object.assign({},e,{purchase_record_id:o,customer_id:c});console.log(a),h.current=a,t(!1)},cancelHandle:function(){return t(!1)},showDeleteButton:!1,deleteHandle:function(){console.log("Delete handle")},updateFormObj:d,formInitialObj:{},rulesObj:bt,initFormCount:f}),r.a.createElement(gt,{requestCount:g,reqObject:h.current,responseDataHandle:function(e){Object.keys(e).includes("code")&&1e3===e.code?(v.b.success("修改成功"),t(!1)):v.b.error("网络错误...")},id:d.id}),r.a.createElement(ht,{requestCount:y,responseDataHandle:function(e){return t(!1)},id:d.id}))};Ot.defaultProps={visible:!1,setVisible:function(e){return console.log(e)},oldObj:{},purchaseRecordId:0,customerId:0};var yt=Ot,jt=function(e){e.selectButtonOnClick;var t=e.purchaseRecordId,a=void 0===t?0:t,o=e.customerId,c=void 0===o?0:o,l=(Object(n.useRef)({page:0}),Object(n.useState)(1)),s=(l[0],l[1],Object(n.useState)(!1)),i=s[0],d=s[1],m=Object(n.useState)({}),p=m[0],f=(m[1],Object(n.useState)(!1));f[0],f[1];return r.a.createElement("div",null,r.a.createElement(st,{selectedAreaHandle:function(e){console.log(e)}}),r.a.createElement(u.a,{onClick:function(){return d(!0)},type:"link"},"发货"),i?r.a.createElement(yt,{visible:i,setVisible:d,oldObj:p,purchaseRecordId:a,customerId:c}):null)},Et=a("I5AO"),Ct=function(e){return Object.keys(e).includes("next")&&"string"==typeof e.next&&e.next.length>5?2:1},xt=function(e){var t=e.reloadListCount,a=(e.setReloadListCount,e.requestParams),o=e.purchaseRecordsChange,c=e.printerIndex,l=e.hasAllPrintCount,s=Object(n.useRef)(2),i=Object(n.useState)(2),u=i[0],d=i[1],m=Object(n.useState)(!1),p=m[0],f=m[1],b=Object(n.useRef)({page:0}),v=Object(n.useState)([]),_=v[0],g=v[1],h=Object(n.useState)(0),O=h[0],y=h[1],j=Object(n.useState)(""),E=j[0],C=j[1],x=Object(n.useState)(!1),S=x[0],k=x[1],P=Object(n.useState)(0),R=P[0],D=P[1],w=Object(n.useState)({}),q=w[0],I=w[1];Object(n.useEffect)((function(){if(l>0){for(var e=[].concat(_),t=0;t<e.length;t++)e[t].has_print=!0;console.log(e),g(e),o(e)}}),[l]),Object(n.useEffect)((function(){b.current=Object.assign({},a),L()}),[t]),Object(n.useEffect)((function(){S&&!p&&s.current>1&&(k(!1),H())}),[S,s.current,p]);var H=function(){if(console.log("prqGetCount:",E,O,"; reqParams",b.current),s.current>1&&!p){s.current=1,f(!0),d(1);var e=Number.isInteger(b.current.page)?b.current.page+1:1;b.current=Object.assign({},b.current,{page:e}),console.log(b.current);var t=O+1;console.log(t),y(t),C(E+"n")}else console.log("Error state: hasMore is ",s.current,", loading is ",p)},L=function(){b.current=Object.assign({},b.current,{page:0}),g([]),s.current=2,d(2),f(!1),k(!0)},A=r.a.createElement(jt,null);return r.a.createElement("div",null,r.a.createElement(Et.a,{visible:R}),r.a.createElement(rt.a,{purchaseRecordsList:_,loadMore:H,hasMore:2===u,infoBottonTips:"详情编辑",infoBottonClick:function(e,t){var a=Object.assign({},e);console.log(a,t),I(a),D(1)},deliverComponent:A,printerIndex:c,successPrintCurrentRecordHandle:function(e,t){var a=[].concat(_);a[t]=e,g(a)}}),r.a.createElement(Ve,{requestCount:E,reqParams:b.current,responseDataHandle:function(e){if(console.log("prqCount: ",E),console.log("resp process...",e),f(!1),Object.keys(e).includes("code")&&1e3===e.code&&Object.keys(e).includes("results")){var t=_.concat(e.results);g(t),o(t),s.current=Ct(e),d(Ct(e)),console.log(O)}else console.log("Error: get data...")}}),r.a.createElement(nt,{visible:1===R,setVisible:D,oldObj:q,successDeletedOrUpdated:function(e){var t="update"===e.method?1:0,a=e.result?e.result:q;a=Object.assign({},q,a);var n=function(e,t,a){void 0===a&&(a=1);var n=t.id?t.id:0;if(n>0)for(var r=[].concat(e),o=r.length-1;o>-1;o--){if(r[o].id===n){if(1===a)return r[o]=t,console.log("update..."),r;if(0===a)return r.splice(o,1),console.log("delete..."),r}}return console.log("not handle..."),e}(_,a,t);console.log(n),g(n)}}),r.a.createElement(ot.a,{hasMore:2===s.current,onClick:H}))};xt.defaultProps={reloadListCount:1,setReloadListCount:function(e){console.log(e)},requestParams:{page:0},purchaseRecordsChange:function(e){return console.log(e)},printerIndex:-1,hasAllPrintCount:0};var St=xt,kt=function(e){var t=e.paramsObj,a=void 0===t?{}:t,o=Object(n.useState)(""),c=o[0],l=o[1];Object(n.useEffect)((function(){s()}),[a]);var s=function(){var e="";Object.keys(a).forEach((function(t){if(Object.keys(Ie).includes(t)){var n=" "+Ie[t]+" = "+a[t]+";";e+=n}})),e.length>2?l(e="查询条件:"+e):(console.log("查询条件为空"),l(""))};return r.a.createElement("div",{style:{height:"auto",width:"100%",padding:"0.1rem 0.2rem"}},c.length>2?r.a.createElement("p",null,c):null)},Pt=a("vtKD"),Rt=function(){var e=Object(n.useState)([]),t=e[0],a=e[1],o=Object(n.useState)(-1),p=o[0],f=o[1],b=Object(n.useRef)({page:0}),v=Object(n.useState)(1),_=v[0],g=v[1],h=Object(n.useState)(!1),O=h[0],y=h[1],j=Object(n.useState)(!1),E=j[0],C=j[1],x=Object(n.useState)(0),S=x[0],k=x[1];Object(n.useEffect)((function(){Object(Pt.a)()}),[]);return r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,{span:24},r.a.createElement(q,{onChange:f,purchaseRecordsList:t,setPurchaseRecordsList:a,hasAllPrintCount:S,setHasAllPrintCount:k}))),r.a.createElement(c.a,null,r.a.createElement(l.a,{span:14},r.a.createElement(s.b,null,r.a.createElement("h4",null,"PurchaseRecords"),r.a.createElement(i.a,{title:"刷新"},r.a.createElement(u.a,{onClick:function(){b.current={page:0},g(_+1)},shape:"circle",icon:r.a.createElement(d.a,null)})),r.a.createElement(i.a,{title:"搜索"},r.a.createElement(u.a,{onClick:function(){return y(!0)},shape:"circle",icon:r.a.createElement(m.a,null)})))),r.a.createElement(l.a,{span:10},r.a.createElement("div",{style:{width:"100%",height:"auto"}},r.a.createElement(u.a,{style:{float:"right"},type:"link",onClick:function(){return C(!0)}},"新建")))),r.a.createElement(c.a,null,r.a.createElement(l.a,{span:24},r.a.createElement(kt,{paramsObj:b.current}))),r.a.createElement(Ze,{visible:O,setVisible:y,queryHandle:function(e){b.current=Object.assign({},e),console.log(b.current),g(_+1),console.log("search...")}}),r.a.createElement(St,{reloadListCount:_,setReloadListCount:g,requestParams:b.current,purchaseRecordsChange:function(e){a(e)},printerIndex:p,hasAllPrintCount:S}),r.a.createElement($e,{visible:E,setVisible:C,reloadListCount:_,setReloadListCount:g}))},Dt=a("vrFN");t.default=function(){return r.a.createElement(o.a,null,r.a.createElement(Dt.a,{title:"Records"}),r.a.createElement(Rt,null))}}}]);
//# sourceMappingURL=component---src-pages-purchaserecords-js-86bf2c49f7e650973dd5.js.map