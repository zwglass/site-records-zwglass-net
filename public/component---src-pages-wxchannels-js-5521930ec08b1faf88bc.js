(self.webpackChunkzwglass_purchase_records=self.webpackChunkzwglass_purchase_records||[]).push([[6059],{30165:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var o=n(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},r=n(12112),a=function(e,t){return o.createElement(r.Z,Object.assign({},e,{ref:t,icon:l}))};a.displayName="ReloadOutlined";var s=o.forwardRef(a)},86257:function(e,t,n){"use strict";n.d(t,{y:function(){return p},p:function(){return y}});var o=n(67294),l=n(28130),r=n(23796),a=n(93299),s=n(77371),i=n(48428).Z.formCommonStyle,c=i.layoutForm,u=i.formItemLayout,m=i.tailFormItemLayout,d={width:260},f=function(e){var t=e.formKey,n=e.formKeyLabelObj,a=e.disabledKeys,s=e.updateFormObj,i=e.rulesObj,c=e.formKeySelectComponentsObj,m=e.passwordKeys,f=e.showLabelName,b=void 0===f||f,p=a.includes(t),y=n[t],g=s[t];return o.createElement(l.Z.Item,Object.assign({},u,{name:t,label:b?y:"",initialValue:g,rules:i[t]?i[t]:[]}),Object.keys(c).includes(t)?c[t]:m.includes(t)?o.createElement(r.Z.Password,{style:d}):o.createElement(r.Z,{style:d,placeholder:"请输入 "+y,disabled:p}))},b=function(e){var t=e.formKey,n=e.formKeyLabelObj,r=e.disabledKeys,s=e.updateFormObj,i=e.rulesObj,c=e.formKeySelectComponentsObj,m=e.passwordKeys,d=e.formKeysItemButtonObj,b=d[t].buttonTips,p=n[t];return o.createElement(l.Z.Item,Object.assign({},u,{label:p}),o.createElement(f,{formKey:t,formKeyLabelObj:n,disabledKeys:r,updateFormObj:s,rulesObj:i,formKeySelectComponentsObj:c,passwordKeys:m,showLabelName:!1}),o.createElement(a.Z,{type:"link",onClick:function(e){console.log(e);try{d[t].clickMethod()}catch(n){console.log(n)}}},b))},p=function(e){var t=e.columns,n=e.disabledKeys,r=e.notShowKeys,i=e.formKeyLabelObj,u=e.formKeySelectComponentsObj,d=e.formKeysItemButtonObj,p=e.onFinish,y=e.cancelHandle,g=e.deleteHandle,h=e.showDeleteButton,O=e.updateFormObj,j=e.formInitialObj,E=e.initFormCount,C=e.rulesObj,v=e.passwordKeys,K=l.Z.useForm()[0],Z=(0,o.useState)(!1),w=Z[0],_=Z[1];(0,o.useEffect)((function(){K.setFieldsValue(O),_(!1)}),[O]),(0,o.useEffect)((function(){E>0&&(K.setFieldsValue(j),_(!1))}),[E]);return o.createElement(l.Z,Object.assign({},c,{form:K,layout:"horizontal",onFinish:function(e){_(!0),p(e)},name:"adminer_info_edit"}),t.map((function(e,t){return r.includes(e)?null:Object.keys(d).includes(e)?o.createElement(b,{key:t.toString(),formKey:e,formKeyLabelObj:i,disabledKeys:n,updateFormObj:O,rulesObj:C,formKeySelectComponentsObj:u,passwordKeys:v,formKeysItemButtonObj:d}):o.createElement(f,{key:t.toString(),formKey:e,formKeyLabelObj:i,disabledKeys:n,updateFormObj:O,rulesObj:C,formKeySelectComponentsObj:u,passwordKeys:v})})),o.createElement(l.Z.Item,m,o.createElement(s.Z,null,o.createElement(a.Z,{loading:w,disabled:w,type:"primary",htmlType:"submit"},"提交"),o.createElement(a.Z,{onClick:y},"取消"),h?o.createElement(a.Z,{loading:w,disabled:w,onClick:function(){_(!0),g()}},"删除"):null)))};p.defaultProps={columns:[],disabledKeys:[],notShowKeys:[],formKeyLabelObj:{},formKeySelectComponentsObj:{},formKeysItemButtonObj:{},onFinish:function(e){console.log(e)},cancelHandle:function(){console.log("Cancel Handle")},deleteHandle:function(){console.log("Delete Handle")},showDeleteButton:!1,updateFormObj:{},formInitialObj:{},initFormCount:0,rulesObj:{},passwordKeys:[],getFieldsValueHandle:function(e){return console.log(e)}};var y=function(e){var t=e.columns,n=e.disabledKeys,i=e.notShowKeys,c=e.formKeyLabelObj,u=e.formKeySelectComponentsObj,m=e.onFinish,f=e.onFinishButtonTips,b=e.cancelHandle,p=e.showCancelButton,y=e.deleteHandle,g=e.showDeleteButton,h=e.updateFormObj,O=e.formInitialObj,j=e.initFormCount,E=e.rulesObj,C=e.passwordKeys,v=(e.getFieldsValueHandle,l.Z.useForm()[0]);(0,o.useEffect)((function(){v.setFieldsValue(h)}),[h]),(0,o.useEffect)((function(){v.setFieldsValue(O)}),[j]);var K=function(e){var t=e.formKey,a=n.includes(t),s=c[t],i=h[t];return o.createElement(l.Z.Item,{name:t,initialValue:i,rules:E[t]?E[t]:[]},Object.keys(u).includes(t)?u[t]:C.includes(t)?o.createElement(r.Z.Password,{style:d}):o.createElement(r.Z,{style:d,placeholder:"请输入 "+s,disabled:a}))};return o.createElement(l.Z,Object.assign({},{labelCol:{span:0},wrapperCol:{span:8}},{form:v,layout:"inline",onFinish:m,name:"adminer_info_edit"}),t.map((function(e,t){return i.includes(e)?null:o.createElement(K,{formKey:e,key:t.toString()})})),o.createElement(l.Z.Item,null,o.createElement(s.Z,null,o.createElement(a.Z,{type:"primary",htmlType:"submit"},f),p?o.createElement(a.Z,{onClick:b},"取消"):null,g?o.createElement(a.Z,{onClick:y},"删除"):null)))};y.defaultProps={columns:[],disabledKeys:[],notShowKeys:[],formKeyLabelObj:{},formKeySelectComponentsObj:{},onFinish:function(e){console.log(e)},onFinishButtonTips:"确定/修改",cancelHandle:function(){console.log("Cancel Handle")},showCancelButton:!1,deleteHandle:function(){console.log("Delete Handle")},showDeleteButton:!1,updateFormObj:{},formInitialObj:{},initFormCount:0,rulesObj:{},passwordKeys:[],getFieldsValueHandle:function(e){return console.log(e)}}},15169:function(e,t,n){"use strict";n.d(t,{A:function(){return s}});var o=n(67294),l=n(27188),r=n(48428),a=l.Z.Option,s=function(e){var t=e.options,n=e.width,r=e.value,s=e.onChange,i=e.mode;return o.createElement(l.Z,{style:{width:n},onChange:s,value:r,mode:i,allowClear:!0},t.map((function(e,t){return o.createElement(a,{key:t.toString(),value:e.value},e.label)})))};s.defaultProps={options:[],width:r.Z.selectComponentWidth,value:null,onChange:function(e){console.log(e)},mode:null}},35604:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return W}});var o=n(67294),l=n(93696),r=n(93751),a=n(23148),s=n(56452),i=n(77371),c=n(90579),u=n(93299),m=n(30165),d=n(24856),f=n(40977),b=n(94789),p=n(16306),y=n(98662),g=n(33328),h=n(15169),O=n(88175),j=["id","name","front_desc","front_name","icon","img","is_category","is_channel","is_show","keywords","level","p_height","parent_id","show_index","sort_order","add_time","update_time","explains"],E=["id","front_name","icon","img","is_category","is_channel","level"],C=["front_name","icon","img","is_category","is_channel","level","show_index","parent_id"],v={id:"ID",name:"名称",front_desc:"频道简介",front_name:"频道名称",icon:"图标",img:"背景图片",is_category:"是分类",is_channel:"是频道",is_show:"显示",keywords:"关键词",level:"级别",p_height:"背景图高",parent_id:"上级ID",show_index:"显示序号",sort_order:"排序序号",add_time:"创建时间",update_time:"更新时间",explains:"说明"},K={is_show:o.createElement(h.A,{options:[{value:0,label:"否"},{value:1,label:"是"}]})},Z=["name"],w={id:0,name:"",front_desc:"",front_name:"",icon:"",img:"",is_category:0,is_channel:1,is_show:1,keywords:"",level:"L1",p_height:"155",parent_id:0,show_index:0,sort_order:1,add_time:"",update_time:"",explains:""},_=["icon","img"],S=["channel-admin/v1/channels"],F=function(e){var t=e.item,n=e.index,l=e.itemDetailClick;return console.log(t),o.createElement("div",null,o.createElement(O.Z,{listsIndex:n,url:t.icon_url,productTitle:t.name,productEffects:"频道简介: "+t.front_desc,salePrice:0,clickDetailHandle:l}))},q=function(e){var t=e.requestCount,n=e.reqParams,l=e.responseDataHandle,r=S[0];return o.createElement(g.Z,{responseDataHandle:l,api:r,method:"get",reqParams:n,reqObject:{},requestCount:t})};q.defaultProps={requestCount:0,reqParams:{},responseDataHandle:function(e){console.log(e)}};var H=function(e){var t=e.requestCount,n=e.reqObject,l=e.responseDataHandle,r=[].concat(S)[0];return o.createElement(g.Z,{responseDataHandle:l,api:r,method:"post",reqParams:{},reqObject:n,requestCount:t})};H.defaultProps={requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)}};var k=function(e){var t=e.requestCount,n=e.reqObject,l=e.responseDataHandle,r=e.id,a=[].concat(S)[0]+"/"+r;return o.createElement(g.Z,{responseDataHandle:l,api:a,method:"put",reqParams:{},reqObject:n,requestCount:t})};k.defaultProps={requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)},id:0};var D=function(e){var t=e.requestCount,n=e.responseDataHandle,l=e.id,r=[].concat(S)[0]+"/"+l;return o.createElement(g.Z,{responseDataHandle:n,api:r,method:"delete",reqParams:{},reqObject:{},requestCount:t})};D.defaultProps={requestCount:0,responseDataHandle:function(e){console.log(e)},id:0};var L=n(86257),P=function(e){var t=e.visible,n=e.setVisible,l=e.reloadListCount,r=e.setReloadListCount,a=(0,o.useRef)({}),s=(0,o.useRef)({createCount:0}),i=(0,o.useState)(0),c=i[0],u=i[1],m=(0,o.useState)(0),d=m[0],g=m[1],h=(0,o.useRef)({}),O=function(){a.current={},s.current={createCount:s.current.createCount+1},u(c+1),n(!1)};return o.createElement(o.Fragment,null,o.createElement(b.Z,{visible:t,title:"Channels 新建",closable:!1,footer:null},o.createElement("div",{style:{width:"100%",height:"auto",textAlign:"center"}},o.createElement(y.DX,{oldObj:s.current,maxImagesNum:1,imageKeyName:_[0],onChange:function(e){a.current=Object.assign({},e)}})),o.createElement(p.Z,null),o.createElement(L.y,{columns:j,disabledKeys:E,notShowKeys:C,formKeyLabelObj:v,formKeySelectComponentsObj:K,onFinish:function(e){var t=Object.assign({},e,a.current);h.current=t,g(d+1)},cancelHandle:O,showDeleteButton:!1,formInitialObj:w,initFormCount:c}),o.createElement(H,{requestCount:d,reqObject:h.current,responseDataHandle:function(e){Object.keys(e).includes("code")&&1e3===e.code?(O(),r(l+1)):f.ZP.error("网络错误...")}})))};P.defaultProps={visible:!1,setVisible:function(e){return console.log(e)},reloadListCount:0,setReloadListCount:function(e){return console.log(e)}};var I=P,x=n(37011),R=function(e){var t=e.visible,n=e.setVisible,l=e.queryHandle,r=(0,o.useState)(0),a=r[0],s=r[1],i=function(){s(a+1),n(!1)};return o.createElement(x.Z,{title:"销售记录查询",width:"100%",height:"400px",placement:"top",onClose:i,visible:t,bodyStyle:{paddingBottom:80},footer:null},o.createElement(L.y,{columns:Z,formKeyLabelObj:v,formKeySelectComponentsObj:K,onFinish:function(e){var t=Object.assign({},e);console.log(t),l(t),setTimeout((function(){i()}),50)},cancelHandle:function(){return n(!1)},showDeleteButton:!1,formInitialObj:w,initFormCount:a}))};R.defaultProps={visible:!1,setVisible:function(e){console.log(e)},queryHandle:function(e){console.log(e)}};var V=R,B=n(45266),N=function(e){var t=e.visible,n=e.setVisible,l=e.oldObj,r=e.reloadListCount,a=e.setReloadListCount,s=(0,o.useRef)({}),i=(0,o.useRef)({}),c=(0,o.useState)({}),u=c[0],m=c[1],d=(0,o.useState)(0),g=d[0],h=d[1],O=(0,o.useState)(0),Z=O[0],w=O[1],S=(0,o.useRef)({}),F=(0,o.useState)(0),q=F[0],H=F[1];(0,o.useEffect)((function(){P()}),[t,l]);var P=function(){h(g+1),m(Object.assign({},l))};return o.createElement(b.Z,{visible:t,title:"Channels",closable:!1,footer:null},o.createElement("div",{style:{width:"100%",height:"auto",textAlign:"center"}},o.createElement("h4",null,"Logo"),o.createElement(y.DX,{maxImagesNum:1,imageKeyName:_[0],oldObj:l,onChange:function(e){s.current=e}})),o.createElement(p.Z,null),o.createElement("div",{style:{width:"100%",height:"auto",textAlign:"center"}},o.createElement("h4",null,"背景图片"),o.createElement(y.DX,{maxImagesNum:1,imageKeyName:_[1],oldObj:l,onChange:function(e){i.current=e}})),o.createElement(p.Z,null),o.createElement(L.y,{columns:j,disabledKeys:E,notShowKeys:C,formKeyLabelObj:v,formKeySelectComponentsObj:K,onFinish:function(e){var t=Object.assign({},e,s.current,i.current);console.log(t),S.current=t,w(Z+1)},cancelHandle:function(){return n(!1)},showDeleteButton:!0,deleteHandle:function(){H(q+1),a(r+1)},updateFormObj:u,formInitialObj:{},initFormCount:g}),o.createElement(k,{requestCount:Z,reqObject:S.current,responseDataHandle:function(e){Object.keys(e).includes("code")&&1e3===e.code?(f.ZP.success("修改成功"),a(r+1),n(!1)):f.ZP.error("网络错误...")},id:u.id}),o.createElement(D,{requestCount:q,responseDataHandle:function(e){return n(!1)},id:u.id}))};N.defaultProps={visible:!1,setVisible:function(e){return console.log(e)},oldObj:{}};var T=N,A=function(e){var t=e.reloadListCount,n=e.setReloadListCount,l=e.requestParams,r=(0,o.useRef)(!0),a=(0,o.useState)(!0),s=a[0],i=a[1],c=(0,o.useState)(!1),u=c[0],m=c[1],d=(0,o.useRef)({page:0}),f=(0,o.useState)([]),b=f[0],p=f[1],y=(0,o.useState)(0),g=y[0],h=y[1],O=(0,o.useState)(!1),j=O[0],E=O[1],C=(0,o.useState)({}),v=C[0],K=C[1];(0,o.useEffect)((function(){d.current=Object.assign({},l),w()}),[t]),(0,o.useEffect)((function(){i(r.current)}),[r.current]);var Z=function(){if(r.current&&!u){var e=Number.isInteger(d.current.page)?d.current.page+1:1;d.current=Object.assign({},d.current,{page:e}),console.log(d.current),h(g+1),m(!0)}else console.log("Error state: hasMore is ",r.current,", loading is ",u)},w=function(){d.current=Object.assign({},d.current,{page:0}),p([]),r.current=!0,m(!1),setTimeout((function(){Z(),console.log("end loadMore...")}),100)},_=function(e){var t=Object.assign({},b[e]);console.log(t),K(t),E(!0)};return o.createElement("div",null,o.createElement(q,{requestCount:g,reqParams:d.current,responseDataHandle:function(e){console.log("resp process..."),m(!1),Object.keys(e).includes("code")&&1e3===e.code&&Object.keys(e).includes("results")?(p(b.concat(e.results)),r.current=function(e){return!!(Object.keys(e).includes("next")&&"string"==typeof e.next&&e.next.length>5)}(e)):console.log("Error: get data...")}}),o.createElement(B.Z,{productsData:b,loadMore:Z,hasMore:s,ItemRendererComponent:function(e){var t=e.item,n=e.index;return o.createElement(F,{item:t,index:n,itemDetailClick:_})}}),o.createElement(T,{visible:j,setVisible:E,oldObj:v,reloadListCount:t,setReloadListCount:n}))};A.defaultProps={reloadListCount:1,setReloadListCount:function(e){console.log(e)},requestParams:{page:0}};var M=A,z=function(e){var t=e.paramsObj,n=void 0===t?{}:t,l=(0,o.useState)(""),r=l[0],a=l[1];(0,o.useEffect)((function(){s()}),[n]);var s=function(){var e="";Object.keys(n).forEach((function(t){if(Object.keys(v).includes(t)){var o=" "+v[t]+" = "+n[t]+";";e+=o}})),e.length>2?a(e="查询条件:"+e):(console.log("查询条件为空"),a(""))};return o.createElement("div",{style:{height:"auto",width:"100%",padding:"0.1rem 0.2rem"}},r.length>2?o.createElement("p",null,r):null)},X=function(){var e=(0,o.useRef)({page:0}),t=(0,o.useState)(1),n=t[0],l=t[1],r=(0,o.useState)(!1),f=r[0],b=r[1],p=(0,o.useState)(!1),y=p[0],g=p[1];return o.createElement("div",null,o.createElement(a.Z,null,o.createElement(s.Z,{span:14},o.createElement(i.Z,null,o.createElement("h4",null,"Channels"),o.createElement(c.Z,{title:"刷新"},o.createElement(u.Z,{onClick:function(){e.current={page:0},l(n+1)},shape:"circle",icon:o.createElement(m.Z,null)})),o.createElement(c.Z,{title:"搜索"},o.createElement(u.Z,{onClick:function(){return b(!0)},shape:"circle",icon:o.createElement(d.Z,null)})))),o.createElement(s.Z,{span:10},o.createElement("div",{style:{width:"100%",height:"auto"}},o.createElement(u.Z,{style:{float:"right"},type:"link",onClick:function(){return g(!0)}},"新建")))),o.createElement(a.Z,null,o.createElement(s.Z,{span:24},o.createElement(z,{paramsObj:e.current}))),o.createElement(V,{visible:f,setVisible:b,queryHandle:function(t){e.current=Object.assign({},t),l(n+1),console.log("search...")}}),o.createElement(M,{reloadListCount:n,setReloadListCount:l,requestParams:e.current}),o.createElement(I,{visible:y,setVisible:g,reloadListCount:n,setReloadListCount:l}))},W=function(){return o.createElement(l.Z,null,o.createElement(r.Z,{title:"WX Channels"}),o.createElement(X,null))}}}]);
//# sourceMappingURL=component---src-pages-wxchannels-js-5521930ec08b1faf88bc.js.map