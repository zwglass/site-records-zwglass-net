"use strict";(self.webpackChunkclient_admin_v102=self.webpackChunkclient_admin_v102||[]).push([[7342],{5071:function(e,n,t){t.d(n,{p:function(){return g},y:function(){return b}});var l=t(7294),a=t(1152),o=t(2184),r=t(3299),s=t(7371),c=t(5455).Z.formCommonStyle,i=c.layoutForm,u=c.formItemLayout,m=c.tailFormItemLayout,d={width:260},_=function(e){var n=e.formKey,t=e.formKeyLabelObj,r=e.disabledKeys,s=e.updateFormObj,c=e.rulesObj,i=e.formKeySelectComponentsObj,m=e.passwordKeys,_=e.showLabelName,f=void 0===_||_,b=r.includes(n),g=t[n],p=s[n];return l.createElement(a.Z.Item,Object.assign({},u,{name:n,label:f?g:"",initialValue:p,rules:c[n]?c[n]:[]}),Object.keys(i).includes(n)?i[n]:m.includes(n)?l.createElement(o.Z.Password,{style:d}):l.createElement(o.Z,{style:d,placeholder:"请输入 "+g,disabled:b}))},f=function(e){var n=e.formKey,t=e.formKeyLabelObj,o=e.disabledKeys,s=e.updateFormObj,c=e.rulesObj,i=e.formKeySelectComponentsObj,m=e.passwordKeys,d=e.formKeysItemButtonObj,f=d[n].buttonTips,b=t[n];return l.createElement(a.Z.Item,Object.assign({},u,{label:b}),l.createElement(_,{formKey:n,formKeyLabelObj:t,disabledKeys:o,updateFormObj:s,rulesObj:c,formKeySelectComponentsObj:i,passwordKeys:m,showLabelName:!1}),l.createElement(r.Z,{type:"link",onClick:function(e){console.log(e);try{d[n].clickMethod()}catch(t){console.log(t)}}},f))},b=function(e){var n=e.columns,t=e.disabledKeys,o=e.notShowKeys,c=e.formKeyLabelObj,u=e.formKeySelectComponentsObj,d=e.formKeysItemButtonObj,b=e.onFinish,g=e.cancelHandle,p=e.deleteHandle,y=e.showDeleteButton,O=e.updateFormObj,j=e.formInitialObj,v=e.initFormCount,E=e.rulesObj,K=e.passwordKeys,h=a.Z.useForm()[0],Z=(0,l.useState)(!1),C=Z[0],F=Z[1];(0,l.useEffect)((function(){h.setFieldsValue(O),F(!1)}),[O]),(0,l.useEffect)((function(){v>0&&(h.setFieldsValue(j),F(!1))}),[v]);return l.createElement(a.Z,Object.assign({},i,{form:h,layout:"horizontal",onFinish:function(e){F(!0),b(e)},name:"adminer_info_edit"}),n.map((function(e,n){return o.includes(e)?null:Object.keys(d).includes(e)?l.createElement(f,{key:n.toString(),formKey:e,formKeyLabelObj:c,disabledKeys:t,updateFormObj:O,rulesObj:E,formKeySelectComponentsObj:u,passwordKeys:K,formKeysItemButtonObj:d}):l.createElement(_,{key:n.toString(),formKey:e,formKeyLabelObj:c,disabledKeys:t,updateFormObj:O,rulesObj:E,formKeySelectComponentsObj:u,passwordKeys:K})})),l.createElement(a.Z.Item,m,l.createElement(s.Z,null,l.createElement(r.Z,{loading:C,disabled:C,type:"primary",htmlType:"submit"},"提交"),l.createElement(r.Z,{onClick:g},"取消"),y?l.createElement(r.Z,{loading:C,disabled:C,onClick:function(){F(!0),p()}},"删除"):null)))};b.defaultProps={columns:[],disabledKeys:[],notShowKeys:[],formKeyLabelObj:{},formKeySelectComponentsObj:{},formKeysItemButtonObj:{},onFinish:function(e){console.log(e)},cancelHandle:function(){console.log("Cancel Handle")},deleteHandle:function(){console.log("Delete Handle")},showDeleteButton:!1,updateFormObj:{},formInitialObj:{},initFormCount:0,rulesObj:{},passwordKeys:[],getFieldsValueHandle:function(e){return console.log(e)}};var g=function(e){var n=e.columns,t=e.disabledKeys,c=e.notShowKeys,i=e.formKeyLabelObj,u=e.formKeySelectComponentsObj,m=e.onFinish,_=e.onFinishButtonTips,f=e.cancelHandle,b=e.showCancelButton,g=e.deleteHandle,p=e.showDeleteButton,y=e.updateFormObj,O=e.formInitialObj,j=e.initFormCount,v=e.rulesObj,E=e.passwordKeys,K=(e.getFieldsValueHandle,a.Z.useForm()[0]);(0,l.useEffect)((function(){K.setFieldsValue(y)}),[y]),(0,l.useEffect)((function(){K.setFieldsValue(O)}),[j]);var h=function(e){var n=e.formKey,r=t.includes(n),s=i[n],c=y[n];return l.createElement(a.Z.Item,{name:n,initialValue:c,rules:v[n]?v[n]:[]},Object.keys(u).includes(n)?u[n]:E.includes(n)?l.createElement(o.Z.Password,{style:d}):l.createElement(o.Z,{style:d,placeholder:"请输入 "+s,disabled:r}))};return l.createElement(a.Z,Object.assign({},{labelCol:{span:0},wrapperCol:{span:8}},{form:K,layout:"inline",onFinish:m,name:"adminer_info_edit"}),n.map((function(e,n){return c.includes(e)?null:l.createElement(h,{formKey:e,key:n.toString()})})),l.createElement(a.Z.Item,null,l.createElement(s.Z,null,l.createElement(r.Z,{type:"primary",htmlType:"submit"},_),b?l.createElement(r.Z,{onClick:f},"取消"):null,p?l.createElement(r.Z,{onClick:g},"删除"):null)))};g.defaultProps={columns:[],disabledKeys:[],notShowKeys:[],formKeyLabelObj:{},formKeySelectComponentsObj:{},onFinish:function(e){console.log(e)},onFinishButtonTips:"确定/修改",cancelHandle:function(){console.log("Cancel Handle")},showCancelButton:!1,deleteHandle:function(){console.log("Delete Handle")},showDeleteButton:!1,updateFormObj:{},formInitialObj:{},initFormCount:0,rulesObj:{},passwordKeys:[],getFieldsValueHandle:function(e){return console.log(e)}}},1848:function(e,n,t){var l=t(7294),a=t(4325),o=function(e){var n=e.spinning,t=(0,l.useState)(!1),o=t[0],r=t[1],s={display:o?"block":"none"};return(0,l.useEffect)((function(){r(n)}),[n]),l.createElement("div",{className:"overall-loading",style:s},l.createElement(a.Z,{spinning:n,size:"large"}))};o.defaultProps={spinning:!1},n.Z=o},2486:function(e,n,t){t.d(n,{A:function(){return s}});var l=t(7294),a=t(6411),o=t(5455),r=a.Z.Option,s=function(e){var n=e.options,t=e.width,o=e.value,s=e.onChange,c=e.mode;return l.createElement(a.Z,{style:{width:t},onChange:s,value:o,mode:c,allowClear:!0},n.map((function(e,n){return l.createElement(r,{key:n.toString(),value:e.value},e.label)})))};s.defaultProps={options:[],width:o.Z.selectComponentWidth,value:null,onChange:function(e){console.log(e)},mode:null}},2997:function(e,n,t){t.d(n,{AW:function(){return i},Dw:function(){return s},F$:function(){return c},Gc:function(){return m},IC:function(){return d},P8:function(){return u},SL:function(){return o},Wv:function(){return r}});var l=t(7294),a=t(2486),o=["id","len_title","len_refractivity","len_function","len_type","len_design","len_color","len_coat_color","len_price","len_sale_price","len_brand","image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5","image_cos_name6","image_cos_name7","image_cos_name8","detail_page_cos_name","contrast_lens_url","explains","add_time","update_time"],r=["id","image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5","image_cos_name6","image_cos_name7","image_cos_name8","detail_page_cos_name","add_time","update_time"],s=["id","image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5","image_cos_name6","image_cos_name7","image_cos_name8","detail_page_cos_name","add_time","update_time"],c={id:"ID",len_title:"镜片标题",len_refractivity:"折射率",len_function:" 功能",len_type:"种类",len_design:"设计",len_color:"颜色",len_coat_color:"膜层",len_price:"原价",len_sale_price:"优惠价",len_brand:"品牌",image_cos_name1:"主图1",image_cos_name2:"主图2",image_cos_name3:"主图3",image_cos_name4:"主图4",image_cos_name5:"主图5",image_cos_name6:"主图6",image_cos_name7:"主图7",image_cos_name8:"主图8",contrast_lens_url:"对比商品URL",explains:"说明",add_time:"创建日期",update_time:"更新日期"},i={len_function:l.createElement(a.A,{options:[{value:0,label:"未知"},{value:1,label:"防紫外线"},{value:2,label:"防辐射"},{value:3,label:"防蓝光"}]}),len_type:l.createElement(a.A,{options:[{value:0,label:"未知"},{value:1,label:"单焦"},{value:2,label:"多焦"}]}),len_design:l.createElement(a.A,{options:[{value:0,label:"未知"},{value:1,label:"球面"},{value:2,label:"非球面"}]}),len_color:l.createElement(a.A,{options:[{value:0,label:"未知"},{value:1,label:"透明"},{value:2,label:"彩片"}]}),len_coat_color:l.createElement(a.A,{options:[{value:0,label:"未知"},{value:1,label:"白晶膜"},{value:2,label:"绿膜"},{value:3,label:"黄绿膜"},{value:4,label:"蓝膜"},{value:5,label:"蓝绿双色膜"}]})},u=["image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5","image_cos_name6","image_cos_name7","image_cos_name8"],m=["len_title","len_refractivity","len_function","len_type","len_design","len_color","len_coat_color"],d={len_function:0,len_type:1,len_design:2,len_color:1,len_coat_color:2}},1878:function(e,n,t){t.d(n,{VV:function(){return s},iD:function(){return r}});var l=t(7294),a=t(5604),o=["lens-price/v1/lenspricelist","lens-price/v1/lensbrands"],r=function(e){var n=e.requestCount,t=e.reqParams,r=e.responseDataHandle,s=o[0];return l.createElement(a.Z,{responseDataHandle:r,api:s,method:"get",reqParams:t,reqObject:{},requestCount:n})};r.defaultProps={requestCount:0,reqParams:{},responseDataHandle:function(e){console.log(e)}};var s=function(e){var n=e.requestCount,t=e.reqObject,r=e.responseDataHandle,s=[].concat(o)[0];return l.createElement(a.Z,{responseDataHandle:r,api:s,method:"post",reqParams:{},reqObject:t,requestCount:n})};s.defaultProps={requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)}}},7147:function(e,n,t){var l=t(7294),a=t(4153),o=t(3308);t(7345);n.Z=function(e){var n=e.children,t=(0,l.useState)(0),r=t[0],s=t[1];return(0,l.useEffect)((function(){s(r+1)}),[]),l.createElement("div",{className:"flex-container"},l.createElement(o.Z,null),l.createElement(a.l,{requestCount:r}),l.createElement("div",{className:"flex-main-container"},n))}},903:function(e,n,t){var l=t(7294),a=t(3765),o=t(7371),r=t(3148),s=t(6452),c=t(3606),i=t(3299),u=t(2210),m=t(845),d=t(9378),_=t(1563),f=t(47),b=function(e){var n=e.oldImageUrl,b=e.avatarSize,g=e.uploadedResponseHandle,p=e.fileKey,y=e.cleanFileListCount,O=(0,l.useRef)({}),j=(0,l.useRef)({}),v=(0,l.useRef)(""),E=(0,l.useState)(""),K=E[0],h=E[1],Z=(0,l.useState)(0),C=Z[0],F=Z[1],S=(0,l.useRef)({}),w=(0,l.useState)(!0),H=w[0],k=w[1],I=(0,l.useState)(!0),q=I[0],L=I[1];(0,l.useEffect)((function(){T()}),[y]),(0,l.useEffect)((function(){O.current={},h(""),k(!0)}),[n]),(0,l.useEffect)((function(){L(0===Object.keys(O.current).length)}),[O.current]);var P=function(e,n){var t=Object.assign({},j.current),l=t.credentials;n({TmpSecretId:l.tmpSecretId,TmpSecretKey:l.tmpSecretKey,XCosSecurityToken:l.sessionToken,StartTime:t.startTime,ExpiredTime:t.expiredTime})},D={fileList:[],beforeUpload:function(e){return O.current=e,F(C+1),!1}},T=function(){g({},p),h(""),O.current={},k(!1)};return l.createElement("div",null,l.createElement(o.Z,{direction:"vertical"},l.createElement(d.Z,{src:H?n:K,width:b}),l.createElement(r.Z,{gutter:10},l.createElement(s.Z,{span:12},l.createElement("div",{style:{textAlign:"left"}},l.createElement(c.Z,D,q?l.createElement(i.Z,{size:"small"},l.createElement(u.Z,null)," 更新"):null))),l.createElement(s.Z,{span:12},K.length>10||n.length>10?l.createElement(i.Z,{onClick:T,size:"small"},l.createElement(m.Z,null)," 删除"):null)),l.createElement(_.G,{requestCount:C,reqObject:S.current,responseDataHandle:function(e){(console.log(e),Object.keys(e).includes("image_cos_name")||Object.keys(e).includes("sts_obj"))?(j.current=e.sts_obj,v.current=e.image_cos_name,"undefined"!=typeof window&&new(t(4525))({getAuthorization:P}).putObject(Object.assign({},f.D1,{Key:v.current,Body:O.current,onProgress:function(e){console.log(JSON.stringify(e))}}),(function(n,t){console.log(n||t),t?(console.log(t),h(e.image_cos_name_url),k(!1),g(e,p),a.ZP.success("图片上传成功!")):(T(),a.ZP.error("图片上传失败..."))}))):console.log("Get temporary key error...")}})))};b.defaultProps={oldImageUrl:"",avatarSize:96,uploadedResponseHandle:function(e,n){console.log(e,n)},fileKey:"image1",cleanFileListCount:0},n.Z=b},3526:function(e,n,t){var l=t(7294),a=t(7371),o=t(903),r=function(e){var n=e.multipleObjKeys,t=e.oldImageUrlsObj,r=e.uploadedHandle,s=(0,l.useRef)({});(0,l.useEffect)((function(){s.current={}}),[t]);var c=function(e,n){var t=Object.keys(e);t.includes("id")&&t.includes("image_cos_name")&&function(e,n){console.log(n);var t=Object.assign({},s.current);t[n]=e,s.current=t,r(t)}({id:e.id,image_cos_name:e.image_cos_name,image_cos_name_url:e.image_cos_name_url},n)};return l.createElement("div",{style:{width:"100%",height:"auto",textAlign:"center",margin:"0.5rem",border:"medium double rgb(250,0,255)",padding:"0.5rem"}},l.createElement(a.Z,{direction:"vertical",size:"middle"},n.map((function(e){return l.createElement(o.Z,{key:e.toString(),oldImageUrl:Object.keys(t).includes(e)?t[e]:"",avatarSize:"96px",uploadedResponseHandle:c,fileKey:e})}))),l.createElement("br",null))};r.defaultProps={multipleObjKeys:["image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5"],oldImageUrlsObj:{},uploadedHandle:function(e){console.log(e)}},n.Z=r},2420:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var l=t(7294),a=t(7147),o=t(262),r=t(1597),s=t(1848),c=t(1878),i=t(5071),u=t(2997),m=t(3526),d=["image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5","image_cos_name6","image_cos_name7","image_cos_name8"],_=function(e){var n=e.createOrEdit,t=e.oldImageUrlsObj,a=e.requestHandle,o=e.closeFormHandle,r=e.lensFormOldObj,s=(0,l.useState)([]),c=s[0],_=s[1],f=((0,l.useRef)(""),(0,l.useRef)({})),b=(0,l.useState)(0),g=b[0],p=b[1];(0,l.useEffect)((function(){_([].concat(n>0?d:u.Dw))}),[n]);return l.createElement("div",null,l.createElement(m.Z,{multipleObjKeys:u.P8,oldImageUrlsObj:t,uploadedHandle:function(e){f.current=Object.assign({},e)}}),l.createElement(i.y,{columns:u.SL,disabledKeys:u.Wv,notShowKeys:c,formKeyLabelObj:u.F$,formKeySelectComponentsObj:u.AW,onFinish:function(e){var n=Object.assign({},e,f.current);a(n)},cancelHandle:function(){p(g+1),setTimeout((function(){o()}),500)},updateFormObj:r,formInitialObj:u.IC,initFormCount:g}))};_.defaultProps={createOrEdit:0,oldImageUrlsObj:{},requestHandle:function(e){console.log(e)},closeFormHandle:function(){console.log("close lens form...")},lensFormOldObj:{}};var f=_,b=function(){var e=(0,l.useState)(!1),n=e[0],t=e[1],a=(0,l.useState)(0),o=a[0],i=a[1],u=(0,l.useRef)({});return l.createElement("div",null,l.createElement(s.Z,{spinning:n}),l.createElement("h2",null,"新建镜片"),l.createElement(f,{createOrEdit:0,requestHandle:function(e){t(!0),console.log(e),i(o+1)},closeFormHandle:function(){(0,r.navigate)("/lensmanagelist")}}),l.createElement(c.VV,{requestCount:o,reqObject:u.current,responseDataHandle:function(e){t(!1)}}))},g=function(){return l.createElement(a.Z,null,l.createElement(o.Z,{title:"LensCreate"}),l.createElement(b,null))}}}]);
//# sourceMappingURL=component---src-pages-lenscreate-js-27bd28d9b3e5065d6f03.js.map