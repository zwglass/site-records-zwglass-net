{"version":3,"sources":["webpack:///./src/components/customers/customers_columns_label_config.jsx","webpack:///./src/components/customers/customers_requests.jsx","webpack:///./src/components/customers/create_customers.jsx","webpack:///./src/components/customers/customers_query_form.jsx","webpack:///./src/components/customers/update_customers.jsx","webpack:///./src/components/customers/customers_list.jsx","webpack:///./src/components/customers/customers_query_params_display.jsx","webpack:///./src/components/customers/index.jsx"],"names":["formKeys","formDisabledKeys","formNotShowKeys","formKeysLabelsObj","formKeySelectComponentsObj","is_valid","options","value","label","custormer_category","formKeysHandleButtonObj","setOptGroupPurchaseCommanderModalState","group_purchase_commander_name","buttonTips","clickMethod","formGetRequestParamsKeys","formInitialObj","imageKeyNames","apiLists","ItemRendererComponent","item","index","itemDetailClick","selectButtonOnClick","useState","customerName","setCustomerName","avatarUrl","setAvatarUrl","useEffect","name","id","wxNickname","customerAvatar","avatar_url","wxAvatar","Object","keys","includes","wx_info","wx_nickname","wx_avatar","length","customButtons","setCustomButtons","buttonLabel","onClick","listIndex","listsIndex","url","productTitle","productEffects","mobile","salePrice","clickDetailHandle","CustomersRequestGet","requestCount","reqParams","responseDataHandle","api","method","reqObject","defaultProps","respObj","console","log","CustomersRequestPost","concat","CustomersRequestPut","CustomersRequestDelete","CreateCustomers","visible","setVisible","reloadListCount","setReloadListCount","customersImageObj","useRef","oldObj","createCount","initFormCount","setInitFormCount","postRequestCount","setPostRequestCount","current","updateFormObj","setUpdateFormObj","groupPurchaseConnanderOptModalState","setGroupPurchaseConnanderOptModalState","choseGroupPurchaseCommanderId","closeModal","title","closable","footer","style","width","height","textAlign","maxImagesNum","imageKeyName","onChange","imagesObj","modalState","setModalState","selectHandle","groupPurchaseCommanderObj","showName","columns","disabledKeys","notShowKeys","formKeyLabelObj","formKeysItemButtonObj","onFinish","values","upObj","group_purchase_commander_id","cancelHandle","showDeleteButton","code","message","error","val","booleanVal","CustomersQueryDrawerForm","queryHandle","closeDrawer","placement","onClose","bodyStyle","paddingBottom","formObj","queryObj","queryId","parseInt","wx_nick_name","setTimeout","booleanValue","queryParamsObj","UpdateCustomers","setOldCustomersHomeImages","oldFormObj","setOldFormObj","putRequestCount","setPutRequestCount","deleteRequestCount","setDeleteRequestCount","initImgAndForm","customersHomeImgs","imgKey","currentCosNameKey","currentUrlKey","currentCosName","currentUrl","push","cosNameKey","cosName","urlKey","deleteHandle","success","judgeHasMore","resp","next","CustomersList","requestParams","hasMore","hasMoreState","setHasMoreState","loading","setLoading","page","customersData","setCustomersData","customersRequestGetCount","setCustomersRequestGetCount","updateCustomersVisible","setUpdateCustomersVisible","selectedObj","setSelectedObj","reloadListsHandle","loadMore","current_page","Number","isInteger","selObj","results","productsData","addedNum","CustomersQueryParams","paramsObj","displayQueryFactorStr","setDisplayQueryFactorStr","displayStr","retDisplayStr","forEach","element","currentFactor","padding","CustomersComponent","drawerVisible","setDrawerVisible","createCustomersVisible","setCreateCustomersVisible","span","shape","icon","ReloadOutlined","SearchOutlined","float","type","currentRequestParams"],"mappings":"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","file":"cb8b892e3c1cd0094906d82e3c73cbb99ac9ca76-557d887e086188961763.js","sourcesContent":["import React from 'react';\n// import { DatePicker } from 'antd';\nimport { CustomSelect } from '../base_components/select_component';\nimport ListsItem from '../base_components/list_item';\nimport { useState } from 'react';\nimport { useEffect } from 'react';\n// import { expressCompanyRequestGet } from './custom_select_requests';\n\n// Customers 列 配置\n\n// ~~~~~~ 表单列, 需添加 ~~~~~~\nconst formKeys = [\"id\", \"group_purchase_commander_name\", \"name\", \"mobile\", \"email\", \"wx_nick_name\", \"wx_openid\", \"password\", \"people_id\", \"address\", \"custormer_category\", \"avatar\", \"add_time\", \"update_time\", \"explains\", \"is_valid\", \"purchase_total_counts\"];\n\n// ~~~~~~ 表单不能编辑列, 根据实际添加 ~~~~~~\nconst formDisabledKeys = [\"id\", \"group_purchase_commander_name\", \"wx_nick_name\", \"wx_openid\", \"avatar\", \"avatar_url\", \"add_time\", \"update_time\",];\n\n// ~~~~~~ 表单不显示列, 根据实际添加 ~~~~~~\nconst formNotShowKeys = [\"password\", \"avatar\", \"avatar_url\",];\n\n// ~~~~~~ 表单列名称 label, 需添加 ~~~~~~\nconst formKeysLabelsObj = {\n  \"id\": \"顾客ID\", \"group_purchase_commander_id\": \"团购团ID\", \"group_purchase_commander_name\": \"团购团长\", \"name\": \"顾客姓名\", \"mobile\": \"顾客手机\", \"email\": \"E-Mail\", \"wx_nick_name\": \"微信昵称\", \"wx_openid\": \"微信openid\",\n  \"password\": \"顾客密码\", \"people_id\": \"身份证号\", \"address\": \"地址\", \"custormer_category\": \"顾客级别\", \"avatar\": \"顾客头像\",\n  \"add_time\": \"创建时间\", \"update_time\": \"更新时间\", \"explains\": \"说明\", \"is_valid\": \"有效\", \"purchase_total_counts\": \"购物总次数\"\n};\n\n//  ~~~~~~ 选择框, 根据实际添加 ~~~~~~\n// const SelectExpressCompany = ({ value = '', onChange = e => console.log(e) }) => {\n//   const [selectOptions, setSelectOptions] = useState([]);\n//   useEffect(() => {\n//     expressCompanyRequestGet().then(respObj => {\n//         const resList = respObj.results;\n//         let updateOptions = [];\n//         for (let index = 0; index < resList.length; index++) {\n//           const element = resList[index];\n//           updateOptions.push({\n//             value: element.express_company_code,\n//             label: element.express_company_name\n//           })\n//         }\n//         setSelectOptions(updateOptions);\n//       }).catch(error => {\n//         console.log(error);\n//         setSelectOptions([]);\n//       });\n//   }, []);\n//   return (<CustomSelect options={selectOptions} value={value} onChange={onChange}></CustomSelect>)\n// };\n// const SelectEndTime = (<DatePicker showTime format=\"YYYY-MM-DD HH:mm:ss\" />);\nconst SelectBoolean = (<CustomSelect options={[{ value: false, label: '否' }, { value: true, label: '是' }]} />);\nconst SelectCustomerCategory = (<CustomSelect options={[{ value: 1, label: '一般顾客' }, { value: 2, label: '优质顾客' }, { value: 3, label: 'VIP顾客' }, { value: 4, label: '团购团长' }]} />)\nconst formKeySelectComponentsObj = {\n  // 'express_company_code': <SelectExpressCompany />,\n  // exampleColumn: SelectBoolean,\n  is_valid: SelectBoolean,\n  custormer_category: SelectCustomerCategory\n};\n\n//  ~~~~~~ 表单自定义操作按钮, 根据实际添加 ~~~~~~\nconst formKeysHandleButtonObj = (setOptGroupPurchaseCommanderModalState) => {\n  return {\n    group_purchase_commander_name: {buttonTips: '选择团长', clickMethod: () => setOptGroupPurchaseCommanderModalState(true)},\n  };\n};\n\n//  ~~~~~~ 表单是图片列, 根据实际添加 ~~~~~~\nconst formKeysIsImages = ['avatar'];\n\n//  ~~~~~~ 查询form keys, 根据实际添加 ~~~~~~\nconst formGetRequestParamsKeys = ['id', \"group_purchase_commander_name\", \"name\", \"mobile\",];\n\n//  ~~~~~~ 表单初始化值, 根据实际添加 ~~~~~~\nconst formInitialObj = {\n  \"id\": 0, \"group_purchase_commander_id\": 0, \"group_purchase_commander_name\": \"\", \"name\": \"\", \"mobile\": \"\", \"email\": \"\", \"wx_openid\": \"\",\n  \"password\": \"\", \"people_id\": \"\", \"address\": \"\", \"custormer_category\": 1, \"avatar\": \"顾客头像\",\n  \"add_time\": \"创建时间\", \"update_time\": \"更新时间\", \"explains\": \"说明\", \"is_valid\": true, \"purchase_total_counts\": 0\n}\n\n// ~~~~~~ 图片列名称, 根据实际修改 ~~~~~~\nconst imageKeyNames = ['avatar'];\n\n// ~~~~~~ 图片总数量, 默认设置为1, 根据实际修改 ~~~~~~\nconst maxImagesNum = 1;\n\n// ~~~~~~ api请求url apiLists, 根据实际修改 ~~~~~~\nconst apiLists = ['admin-customer/v1/customer', ];\n\n// 修改 ~~~~~~~ item keys ~~~~~~;\nconst ItemRendererComponent = ({ item, index, itemDetailClick, selectButtonOnClick }) => {\n  // 必须 每一行渲染 的组件, 修改 ~~~~~~~ item keys ~~~~~~;\n  const [customerName, setCustomerName] = useState('');\n  const [avatarUrl, setAvatarUrl] = useState('');\n\n  useEffect(() => {\n    // 显示姓名 + 微信昵称\n    let customerName = item.name ? `姓名: ${item.name}` : '';\n    customerName = `顾客ID: ${item.id}; ${customerName}`;\n    let wxNickname = '';\n\n    const customerAvatar = item.avatar_url ? item.avatar_url : '';\n    let wxAvatar = '';\n    if (Object.keys(item).includes('wx_info') && Object.keys(item.wx_info).includes('wx_nickname')) {\n      wxNickname = item.wx_info.wx_nickname;\n      wxAvatar = item.wx_info.wx_avatar;\n    }\n\n    setCustomerName(wxNickname.length > 0 ? `${customerName}(${wxNickname})` : customerName);\n    setAvatarUrl(customerAvatar.length > 0 ? customerAvatar : wxAvatar);\n  }, [item]);\n\n  const [customButtons, setCustomButtons] = useState([]);\n\n  useEffect(() => {\n    if (selectButtonOnClick) {\n      const selectButtonObj = {\n        buttonLabel: '选择',\n        onClick: (listIndex) => {\n          selectButtonOnClick(item, index);\n        },\n      };\n      setCustomButtons([selectButtonObj,]);\n    }\n    \n  }, [selectButtonOnClick]);\n\n  // console.log(item);\n  return (<div>\n    <ListsItem\n      listsIndex={index}\n      url={avatarUrl}\n      productTitle={customerName}\n      productEffects={`手机: ${item.mobile}`}\n      salePrice={0}\n      clickDetailHandle={itemDetailClick}\n      customButtons={customButtons}\n    ></ListsItem>\n  </div>);\n};\n\nexport {\n  formKeys,\n  formDisabledKeys,\n  formNotShowKeys,\n  formKeysLabelsObj,\n  formKeySelectComponentsObj,\n  formKeysHandleButtonObj,\n  formKeysIsImages,\n  formGetRequestParamsKeys,\n  formInitialObj,\n  imageKeyNames,\n  maxImagesNum,\n  apiLists,\n  ItemRendererComponent\n};\n","import React from 'react';\n\nimport AxiosRequest from '../apis';\nimport { apiLists } from './customers_columns_label_config';\n\n// Customers 的request请求\n\nconst CustomersRequestGet = ({ requestCount, reqParams, responseDataHandle }) => {\n  // Customers Get请求\n  const api = apiLists[0];\n  const method = 'get';\n  const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nCustomersRequestGet.defaultProps = {\n  requestCount: 0,\n  reqParams: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n};\n\nconst CustomersRequestPost = ({ requestCount, reqObject, responseDataHandle }) => {\n  // Customers post请求\n  const api = [].concat(apiLists)[0];\n  const method = 'post';\n  const reqParams = {};\n  // const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nCustomersRequestPost.defaultProps = {\n  requestCount: 0,\n  reqObject: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n}\n\nconst CustomersRequestPut = ({ requestCount, reqObject, responseDataHandle, id }) => {\n  // Customers put请求\n  const api = [].concat(apiLists)[0] + `/${id}`;\n  const method = 'put';\n  const reqParams = {};\n  // const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nCustomersRequestPut.defaultProps = {\n  requestCount: 0,\n  reqObject: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n  id: 0\n}\n\nconst CustomersRequestDelete = ({ requestCount, responseDataHandle, id }) => {\n  // Customers delete请求\n  const api = [].concat(apiLists)[0] + `/${id}`;\n  const method = 'delete';\n  const reqParams = {};\n  const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nCustomersRequestDelete.defaultProps = {\n  requestCount: 0,\n  responseDataHandle: (respObj) => { console.log(respObj); },\n  id: 0\n}\n\nexport {\n  CustomersRequestGet,\n  CustomersRequestPost,\n  CustomersRequestPut,\n  CustomersRequestDelete\n};\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Modal, Divider, message } from 'antd';\n\nimport { StsUploadImagesList } from '../upload_files/sts_upload_files_list';\nimport { CustomersRequestPost } from './customers_requests';\nimport { CustomForm } from '../base_components/form_component';\nimport { GroupPurchaseCommanderOptModal } from '../modals/group_purchase_commander_opt'\n\nimport {\n  formKeys,\n  formDisabledKeys,\n  // formNotShowKeys,\n  formKeysLabelsObj,\n  formKeySelectComponentsObj,\n  formKeysHandleButtonObj,\n  formInitialObj,\n  imageKeyNames,\n  maxImagesNum\n} from './customers_columns_label_config';\n\nconst formNotShowKeys = [\"id\", \"password\", \"avatar\", \"avatar_url\"];\n\n// 新建 Modal\n\nconst CreateCustomers = ({ visible, setVisible, reloadListCount, setReloadListCount }) => {\n\n  const customersImageObj = useRef({});\n  const oldObj = useRef({ createCount: 0 });\n\n  const [initFormCount, setInitFormCount] = useState(0);\n\n  const [postRequestCount, setPostRequestCount] = useState(0);\n  const reqObject = useRef({});\n\n  useEffect(() => {\n    if (visible) {\n      // 显示表单时初始化表单\n      setInitFormCount(initFormCount + 1);\n      oldObj.current = { createCount: oldObj.current.createCount + 1 };  // 初始化图片\n    }\n  }, [visible]);\n\n  // 选择团购团长 modal\n  const [updateFormObj, setUpdateFormObj] = useState({});\n  const [groupPurchaseConnanderOptModalState, setGroupPurchaseConnanderOptModalState] = useState(false);\n  const choseGroupPurchaseCommanderId = useRef(0);\n  const selectGroupPurchaseConnanderHandle = (groupPurchaseCommanderObj) => {\n    // 选择顾客操作\n    // console.log(groupPurchaseCommanderObj);\n    let showName = groupPurchaseCommanderObj.name;\n    setUpdateFormObj({ group_purchase_commander_name: showName });\n    if (groupPurchaseCommanderObj.id > 0) {\n      choseGroupPurchaseCommanderId.current = groupPurchaseCommanderObj.id;\n    }\n    setGroupPurchaseConnanderOptModalState(false);\n  };\n\n  const postResponseDataHandle = (respObj) => {\n    // 表单提交后的操作\n    if (Object.keys(respObj).includes('code')\n      && respObj.code === 1000) {\n      closeModal();\n      setReloadListCount(reloadListCount + 1)\n    } else {\n      message.error('网络错误...');\n    }\n  }\n\n  const closeModal = () => {\n    // 初始化表单和图片 并关闭Modal\n    customersImageObj.current = {};  // 清空图片数据\n    setVisible(false);\n  }\n\n  const customersImageUploaded = (imagesObj) => {\n    // 图片上传后操作\n    customersImageObj.current = { ...imagesObj };\n  }\n\n  const onFinish = (values) => {\n    // 提交表单\n    let upObj = { ...values, ...customersImageObj.current };\n    // let newDate = new Date(upObj.end_time);\n    // upObj.end_time = parseInt(newDate.getTime());    // 时间转时间戳\n\n    // 删除购物团长名称，加入购物团长id\n    if (upObj.group_purchase_commander_name.length > 0) {\n      upObj.group_purchase_commander_id = choseGroupPurchaseCommanderId.current;\n    }\n    delete upObj.group_purchase_commander_name;\n\n    reqObject.current = upObj;\n    console.log(upObj);\n    setPostRequestCount(postRequestCount + 1);\n  }\n\n  return (\n    <>\n      <Modal visible={visible}\n        title=\"Customers 新建\"\n        closable={false}\n        footer={null}\n      >\n        <div style={{ width: '100%', height: 'auto', textAlign: 'center' }}>\n          <StsUploadImagesList\n            oldObj={oldObj.current}\n            maxImagesNum={maxImagesNum}\n            imageKeyName={imageKeyNames[0]}\n            onChange={customersImageUploaded}></StsUploadImagesList>\n        </div>\n        <Divider></Divider>\n\n        <GroupPurchaseCommanderOptModal\n          modalState={groupPurchaseConnanderOptModalState}\n          setModalState={setGroupPurchaseConnanderOptModalState}\n          selectHandle={selectGroupPurchaseConnanderHandle}\n        ></GroupPurchaseCommanderOptModal>\n\n        <CustomForm\n          columns={formKeys}\n          disabledKeys={formDisabledKeys}\n          notShowKeys={formNotShowKeys}\n          formKeyLabelObj={formKeysLabelsObj}\n          formKeySelectComponentsObj={formKeySelectComponentsObj}\n          formKeysItemButtonObj={formKeysHandleButtonObj(setGroupPurchaseConnanderOptModalState)}\n          onFinish={onFinish}\n          cancelHandle={closeModal}\n          showDeleteButton={false}\n          formInitialObj={formInitialObj}\n          initFormCount={initFormCount}\n          updateFormObj={updateFormObj}\n        ></CustomForm>\n\n        <CustomersRequestPost\n          requestCount={postRequestCount}\n          reqObject={reqObject.current}\n          responseDataHandle={postResponseDataHandle}></CustomersRequestPost>\n      </Modal>\n    </>\n  )\n}\n\nCreateCustomers.defaultProps = {\n  visible: false,\n  setVisible: (val) => console.log(val),\n  reloadListCount: 0,\n  setReloadListCount: (booleanVal) => console.log(booleanVal)\n}\n\nexport default CreateCustomers;\n","import React, { useState, useRef } from 'react';\nimport { Drawer } from 'antd';\n\nimport { CustomForm } from '../base_components/form_component';\nimport { GroupPurchaseCommanderOptModal } from '../modals/group_purchase_commander_opt';\n\nimport {\n    formKeysLabelsObj,\n    formKeySelectComponentsObj,\n    formKeysHandleButtonObj,\n    formGetRequestParamsKeys,\n    formInitialObj\n} from './customers_columns_label_config';\n// 列表查询 form\n\nconst formDisabledKeys = [\"group_purchase_commander_name\", \"wx_nick_name\", \"wx_openid\", \"avatar\", \"avatar_url\", \"add_time\", \"update_time\",];\n\nconst CustomersQueryDrawerForm = ({ visible, setVisible, queryHandle }) => {\n    const [initFormCount, setInitFormCount] = useState(0);\n    const [updateFormObj, setUpdateFormObj] = useState({});\n\n    // 选择团购团长 modal\n    const [groupPurchaseConnanderOptModalState, setGroupPurchaseConnanderOptModalState] = useState(false);\n    const choseGroupPurchaseCommanderId = useRef(0);\n    const selectGroupPurchaseConnanderHandle = (groupPurchaseCommanderObj) => {\n        // 选择顾客操作\n        // console.log(groupPurchaseCommanderObj);\n        let showName = groupPurchaseCommanderObj.name;\n        setUpdateFormObj({ group_purchase_commander_name: showName });\n        if (groupPurchaseCommanderObj.id > 0) {\n            choseGroupPurchaseCommanderId.current = groupPurchaseCommanderObj.id;\n        }\n        setGroupPurchaseConnanderOptModalState(false);\n    };\n\n    const closeDrawer = () => {\n        // 关闭查询抽屉\n        setInitFormCount(initFormCount + 1);\n        setVisible(false);\n    };\n\n    const onFinish = (formObj) => {\n        // 提交查询 根据具体情况更新 fromObj\n        // ~~~~~~~ 具体情况更新 fromObj ~~~~~~\n        const queryObj = {};\n        const queryId = formObj.id ? parseInt(formObj.id) : 0;\n        if (queryId > 0) {\n            queryHandle({id: queryId});\n        }else {\n            if (choseGroupPurchaseCommanderId.current > 0) {\n                queryObj.group_purchase_commander_id = choseGroupPurchaseCommanderId.current;\n            }\n            if (formObj.name && formObj.name.length > 0) {\n                queryObj.name = formObj.name;\n                queryObj.wx_nick_name = formObj.name;\n            }\n            if (formObj.mobile && formObj.mobile.length > 0) {\n                queryObj.mobile = formObj.mobile;\n            }\n            // console.log(queryObj);\n            queryHandle(queryObj);\n        }\n        setTimeout(() => {\n            closeDrawer();\n        }, 50);\n    };\n\n    return (\n        <>\n            <Drawer\n                title=\"销售记录查询\"\n                width=\"100%\"\n                height=\"400px\"\n                placement=\"top\"\n                onClose={closeDrawer}\n                visible={visible}\n                bodyStyle={{ paddingBottom: 80 }}\n                footer={null}\n            >\n                <CustomForm\n                    columns={formGetRequestParamsKeys}\n                    disabledKeys={formDisabledKeys}\n                    formKeyLabelObj={formKeysLabelsObj}\n                    formKeySelectComponentsObj={formKeySelectComponentsObj}\n                    formKeysItemButtonObj={formKeysHandleButtonObj(setGroupPurchaseConnanderOptModalState)}\n                    onFinish={onFinish}\n                    cancelHandle={() => setVisible(false)}\n                    showDeleteButton={false}\n                    formInitialObj={formInitialObj}\n                    initFormCount={initFormCount}\n                    updateFormObj={updateFormObj}\n                ></CustomForm>\n            </Drawer>\n\n            <GroupPurchaseCommanderOptModal\n                modalState={groupPurchaseConnanderOptModalState}\n                setModalState={setGroupPurchaseConnanderOptModalState}\n                selectHandle={selectGroupPurchaseConnanderHandle}\n            ></GroupPurchaseCommanderOptModal>\n        </>\n    );\n};\n\nCustomersQueryDrawerForm.defaultProps = {\n  visible: false,\n  setVisible: (booleanValue) => { console.log(booleanValue); },\n  queryHandle: (queryParamsObj) => { console.log(queryParamsObj); }\n};\n\nexport default CustomersQueryDrawerForm;\n","import React, { useRef, useState, useEffect } from 'react';\nimport { Modal, Divider, message } from 'antd';\n\n// import StsUploadFile from '../upload_files/sts_upload_file';\nimport { StsUploadImagesList } from '../upload_files/sts_upload_files_list';\nimport { CustomersRequestPut, CustomersRequestDelete  } from './customers_requests';\nimport { CustomForm } from '../base_components/form_component';\nimport { GroupPurchaseCommanderOptModal } from '../modals/group_purchase_commander_opt';\n\nimport {\n  formKeys,\n  formDisabledKeys,\n  formNotShowKeys,\n  formKeysLabelsObj,\n  formKeySelectComponentsObj,\n  formKeysHandleButtonObj,\n  formGetRequestParamsKeys,\n  formInitialObj,\n  imageKeyNames,\n  maxImagesNum\n} from './customers_columns_label_config';\n\n// 编辑 Customers\n\nconst UpdateCustomers = ({ visible, setVisible, oldObj, reloadListCount, setReloadListCount }) => {\n  const [oldCustomersHomeImages, setOldCustomersHomeImages] = useState([]);\n  const customersImageObj = useRef({});\n\n  const [oldCustomersImageUrl, setOldCustomersImageUrl] = useState('');\n  const [oldFormObj, setOldFormObj] = useState({});\n\n  const [initFormCount, setInitFormCount] = useState(0);\n\n  const [putRequestCount, setPutRequestCount] = useState(0);\n  const reqObject = useRef({});\n  const putResponseDataHandle = (respObj) => {\n    if (Object.keys(respObj).includes('code')\n      && respObj.code === 1000) {\n      message.success('修改成功');\n      setReloadListCount(reloadListCount + 1);\n      setVisible(false);\n    } else {\n      message.error('网络错误...');\n    }\n  }\n\n  const [deleteRequestCount, setDeleteRequestCount] = useState(0);\n  const deleteCustomers = () => {\n    // 删除当前对象\n    setDeleteRequestCount(deleteRequestCount + 1);\n    setReloadListCount(reloadListCount + 1);\n  };\n\n  // 选择团购团长 modal\n  const [groupPurchaseConnanderOptModalState, setGroupPurchaseConnanderOptModalState] = useState(false);\n  const choseGroupPurchaseCommanderId = useRef(0);\n  const selectGroupPurchaseConnanderHandle = (groupPurchaseCommanderObj) => {\n    // 选择顾客操作\n    // console.log(groupPurchaseCommanderObj);\n    let showName = groupPurchaseCommanderObj.name;\n    setOldFormObj({ group_purchase_commander_name: showName });\n    if (groupPurchaseCommanderObj.id > 0) {\n      choseGroupPurchaseCommanderId.current = groupPurchaseCommanderObj.id;\n    }\n    setGroupPurchaseConnanderOptModalState(false);\n  };\n\n  useEffect(() => {\n    initImgAndForm();   // 初始化表格和图片\n  }, [visible, oldObj]);\n\n  const initImgAndForm = () => {\n    // 初始化表格和图片\n    setInitFormCount(initFormCount + 1);  // 初始化表格\n    setOldFormObj({ ...oldObj });  // 给表格赋值\n\n    // 生成图片列表\n    let customersHomeImgs = [];\n    const imgKey = imageKeyNames[0];\n    for (let index = 1; index < 10; index++) {\n      const currentCosNameKey = imgKey + index;\n      const currentUrlKey = currentCosNameKey + '_url';\n      const currentCosName = oldObj[currentCosNameKey];\n      const currentUrl = oldObj[currentUrlKey];\n      if (typeof currentCosName === 'string' && currentCosName.length > 5) {\n        customersHomeImgs.push({\n          cosNameKey: currentCosNameKey,\n          cosName: currentCosName,\n          urlKey: currentUrlKey,\n          url: currentUrl\n        });\n      }\n    }\n    // console.log(customersHomeImgs);\n    setOldCustomersHomeImages(customersHomeImgs);   // 更新图片列表\n  }\n\n  const customersImageUploaded = (imagesObj) => {\n    // 轮播图上传后操作\n    customersImageObj.current = imagesObj;\n  }\n\n  const onFinish = (values) => {\n    // 提交表单\n    let upObj = { ...values, ...customersImageObj.current };\n    console.log(upObj);\n    // 时间转时间戳\n    // let newDate = new Date(upObj.end_time);\n    // upObj.end_time = parseInt(newDate.getTime());    // 时间转时间戳\n    // console.log(upObj.end_time);\n    \n    if (upObj.group_purchase_commander_name\n      && upObj.group_purchase_commander_name.length > 0\n      && choseGroupPurchaseCommanderId.current > 0) {\n      // 删除团购名称，加入团购id\n      upObj.group_purchase_commander_id = choseGroupPurchaseCommanderId.current;\n    }\n    delete upObj.group_purchase_commander_name;\n\n    reqObject.current = upObj;\n    setPutRequestCount(putRequestCount + 1);\n  }\n\n  return (\n    <Modal visible={visible}\n      title=\"Customers\"\n      closable={false}\n      footer={null}\n    >\n      <div style={{width: '100%', height: 'auto', textAlign: 'center'}}>\n        <StsUploadImagesList\n          maxImagesNum={maxImagesNum}\n          imageKeyName={imageKeyNames[0]}\n          oldObj={oldObj}\n          onChange={customersImageUploaded}\n        ></StsUploadImagesList>\n      </div>\n      <Divider></Divider>\n\n      <CustomForm\n        columns={formKeys}\n        disabledKeys={formDisabledKeys}\n        notShowKeys={formNotShowKeys}\n        formKeyLabelObj={formKeysLabelsObj}\n        formKeySelectComponentsObj={formKeySelectComponentsObj}\n        formKeysItemButtonObj={formKeysHandleButtonObj(setGroupPurchaseConnanderOptModalState)}\n        onFinish={onFinish}\n        cancelHandle={() => setVisible(false)}\n        showDeleteButton={true}\n        deleteHandle={deleteCustomers}\n        updateFormObj={oldFormObj}\n        formInitialObj={{}}\n        initFormCount={initFormCount}\n      ></CustomForm>\n      <GroupPurchaseCommanderOptModal\n        modalState={groupPurchaseConnanderOptModalState}\n        setModalState={setGroupPurchaseConnanderOptModalState}\n        selectHandle={selectGroupPurchaseConnanderHandle}\n      ></GroupPurchaseCommanderOptModal>\n\n      <CustomersRequestPut\n        requestCount={putRequestCount}\n        reqObject={reqObject.current}\n        responseDataHandle={putResponseDataHandle}\n        id={oldFormObj.id}></CustomersRequestPut>\n      <CustomersRequestDelete\n        requestCount={deleteRequestCount}\n        responseDataHandle={(respObj) => setVisible(false)}\n        id={oldFormObj.id}></CustomersRequestDelete>\n    </Modal>\n  )\n}\n\nUpdateCustomers.defaultProps = {\n  visible: false,\n  setVisible: (val) => console.log(val),\n  oldObj: {}\n}\n\nexport default UpdateCustomers;\n","import React, { useState, useEffect, useRef } from 'react';\n\nimport ProductsList from '../base_components/products_list';\nimport { CustomersRequestGet } from './customers_requests';\n// import CreateCustomers from './create_customers';\nimport UpdateCustomers from './update_customers';\nimport { ItemRendererComponent } from './customers_columns_label_config';\n\nconst judgeHasMore = resp => {\n  if (Object.keys(resp).includes('next')\n    && typeof resp.next === 'string'\n    && resp.next.length > 5) {\n    return true;\n  }\n  return false;\n};\n\n// 列表编辑 页面\n\nconst CustomersList = ({ reloadListCount, setReloadListCount, requestParams, selectButtonOnClick }) => {\n  const hasMore = useRef(true);\n  const [hasMoreState, setHasMoreState] = useState(true);\n  const [loading, setLoading] = useState(false);\n  const reqParams = useRef({ page: 0 });\n\n  const [customersData, setCustomersData] = useState([]);\n  const [customersRequestGetCount, setCustomersRequestGetCount] = useState(0);\n\n  // const [createCustomersVisible, setCreateCustomersVisible] = useState(false);\n  const [updateCustomersVisible, setUpdateCustomersVisible] = useState(false);\n  const [selectedObj, setSelectedObj] = useState({});\n\n  useEffect(() => {\n    // 加载、更新或创建数据后 重新读取列表\n    reqParams.current = { ...requestParams };\n    reloadListsHandle();\n  }, [reloadListCount]);\n\n  const loadMore = () => {\n    // 读取更多列表\n    if (hasMore.current && !loading) {\n      const current_page = Number.isInteger(reqParams.current.page) ? reqParams.current.page + 1 : 1;\n      reqParams.current = { ...reqParams.current, page: current_page };\n      console.log(reqParams.current);\n      setCustomersRequestGetCount(customersRequestGetCount + 1);\n      setLoading(true);\n    } else {\n      console.log('Error state: hasMore is ', hasMore.current, ', loading is ', loading);\n    }\n  };\n\n  const reloadListsHandle = () => {\n    // 重新读取数据\n    reqParams.current = { ...reqParams.current, page: 0 };\n    // console.log(reqParams.current);\n    setCustomersData([]);\n    // setHasMore(true);\n    hasMore.current = true;\n    setLoading(false);\n    setTimeout(() => {\n      loadMore();\n      console.log('end loadMore...');\n    }, 100);\n  };\n\n  const customersGetResponse = resp => {\n    console.log('resp process...');\n    setLoading(false);\n    if (Object.keys(resp).includes('code')\n      && resp.code === 1000\n      && Object.keys(resp).includes('results')) {\n      setCustomersData(customersData.concat(resp.results));\n      // setHasMore(judgeHasMore(resp));   // 判断是否还有更多\n      hasMore.current = judgeHasMore(resp);\n      setHasMoreState(judgeHasMore(resp));\n    } else {\n      console.log('Error: get data...');\n    }\n  };\n\n  const itemDetailClick = (index) => {\n    // 打开详情编辑窗口\n    // console.log(customersData[index]);\n    let selObj = { ...customersData[index] };\n    console.log(selObj);\n    // 日期转 moment 时间\n    // selObj.end_time = moment(dateFormat(selObj.end_time), 'YYYY-MM-DD HH:mm:ss');\n    setSelectedObj(selObj);\n    setUpdateCustomersVisible(true);\n  };\n\n  const CurrentItemRendererComponent = ({ item, index }) => {\n    // 每一行渲染 的组件\n\n    return (\n      <ItemRendererComponent\n        item={item}\n        index={index}\n        itemDetailClick={itemDetailClick}\n        selectButtonOnClick={selectButtonOnClick} />\n    )\n  }\n\n  return (\n    <div>\n      <CustomersRequestGet requestCount={customersRequestGetCount}\n        reqParams={reqParams.current}\n        responseDataHandle={customersGetResponse}></CustomersRequestGet>\n      <ProductsList\n        productsData={customersData}\n        loadMore={loadMore}\n        hasMore={hasMoreState}\n        ItemRendererComponent={CurrentItemRendererComponent}></ProductsList>\n\n      <UpdateCustomers\n        visible={updateCustomersVisible}\n        setVisible={setUpdateCustomersVisible}\n        oldObj={selectedObj}\n        reloadListCount={reloadListCount}\n        setReloadListCount={setReloadListCount}\n      ></UpdateCustomers>\n    </div>\n  );\n}\n\nCustomersList.defaultProps = {\n  reloadListCount: 1,\n  setReloadListCount: (addedNum) => { console.log(addedNum); },\n  requestParams: { page: 0 },\n  selectButtonOnClick: null,\n}\n\nexport default CustomersList;\n","import React, { useState, useEffect } from 'react';\n\nimport { formKeysLabelsObj } from './customers_columns_label_config';\n\n// 显示查询条件组件\n\nconst CustomersQueryParams = ({ paramsObj={} }) => {\n  const [displayQueryFactorStr, setDisplayQueryFactorStr] = useState('');\n\n  useEffect(() => {\n    displayStr();\n  }, [paramsObj])\n\n  const displayStr = () => {\n    // 显示的查询条件 字符串\n    // let retDisplayStr = '查询条件:';\n    let retDisplayStr = '';\n    Object.keys(paramsObj).forEach(element => {\n      if (Object.keys(formKeysLabelsObj).includes(element)) {\n        // 只显示 formKeysLabelsObj 包含的key\n        const currentFactor = ' ' + formKeysLabelsObj[element] + ' = ' + paramsObj[element] + ';';\n        retDisplayStr = retDisplayStr + currentFactor\n      }\n    });\n    if (retDisplayStr.length > 2) {\n      retDisplayStr = '查询条件:' + retDisplayStr;\n      setDisplayQueryFactorStr(retDisplayStr);\n    } else {\n      console.log('查询条件为空')\n      setDisplayQueryFactorStr('');\n    }\n  }\n  return (\n    <div style={{ height: 'auto', width: '100%', padding: '0.1rem 0.2rem' }}>\n      {displayQueryFactorStr.length > 2\n        ? (<p>{displayQueryFactorStr}</p>)\n        : null}\n    </div>\n  )\n};\n\nexport default CustomersQueryParams;\n","import React, { useState, useRef } from 'react';\n// import { navigate, Link } from 'gatsby';\nimport { Button, Row, Col, Space, Tooltip } from 'antd';\nimport { ReloadOutlined, SearchOutlined, LeftOutlined } from '@ant-design/icons';\n\nimport CreateCustomers from './create_customers';\nimport CustomersQueryDrawerForm from './customers_query_form';\nimport CustomersList from './customers_list';\nimport CustomersQueryParams from './customers_query_params_display';\n// Customers 入口组件\n\nconst CustomersComponent = ({ selectButtonOnClick = null }) => {\n  const reqParams = useRef({ page: 0 });\n\n  const [reloadListCount, setReloadListCount] = useState(1);\n\n  const [drawerVisible, setDrawerVisible] = useState(false);\n\n  const [createCustomersVisible, setCreateCustomersVisible] = useState(false);\n\n  const queryHandle = (currentRequestParams) => {\n    // 查询操作\n    reqParams.current = { ...currentRequestParams };\n    // 触发重新读取数据\n    setReloadListCount(reloadListCount + 1)\n    console.log('search...');\n  };\n\n  const initReloadList = () => {\n    // 刷新列表, 删除所有查询条件\n    reqParams.current = { page: 0 };\n    setReloadListCount(reloadListCount + 1);\n  }\n\n  // const selectButtonOnClick = (item, index) => {\n  // 选择按钮点击事件\n  //   console.log(index, item);\n  // }\n\n  return (\n    <div>\n      <Row>\n        <Col span={14}>\n          <Space>\n            {/* <Tooltip title=\"返回\">\n              <Link to=\"/logistic\"><LeftOutlined /></Link>\n            </Tooltip> */}\n            <h4>Customers</h4>\n            <Tooltip title=\"刷新\">\n              <Button onClick={initReloadList} shape=\"circle\" icon={<ReloadOutlined />}></Button>\n            </Tooltip>\n            <Tooltip title=\"搜索\">\n              <Button onClick={() => setDrawerVisible(true)} shape=\"circle\" icon={<SearchOutlined />}></Button>\n            </Tooltip>\n          </Space>\n        </Col>\n        <Col span={10}>\n          <div style={{ width: '100%', height: 'auto' }}>\n            {/* <Button style={{ float: 'right' }} type=\"link\" onClick={() => navigate('/sendexpressaccount')}>快递帐号设置</Button> */}\n            <Button style={{ float: 'right' }} type=\"link\" onClick={() => setCreateCustomersVisible(true)}>新建</Button>\n          </div>\n        </Col>\n      </Row>\n      <Row>\n        <Col span={24}><CustomersQueryParams paramsObj={reqParams.current}></CustomersQueryParams></Col>\n      </Row>\n      <CustomersQueryDrawerForm\n        visible={drawerVisible}\n        setVisible={setDrawerVisible}\n        queryHandle={queryHandle}\n      ></CustomersQueryDrawerForm>\n\n      <CustomersList\n        reloadListCount={reloadListCount}\n        setReloadListCount={setReloadListCount}\n        requestParams={reqParams.current}\n        selectButtonOnClick={selectButtonOnClick}\n      ></CustomersList>\n\n      <CreateCustomers\n        visible={createCustomersVisible}\n        setVisible={setCreateCustomersVisible}\n        reloadListCount={reloadListCount}\n        setReloadListCount={setReloadListCount}\n      ></CreateCustomers>\n    </div>\n  )\n};\n\nexport default CustomersComponent;\n"],"sourceRoot":""}