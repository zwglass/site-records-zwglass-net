(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{uZ9c:function(e,t,a){"use strict";a("91GP");var n=a("q1tI"),r=a.n(n),o=a("BMrR"),c=a("kPKH"),u=a("zeV3"),s=a("3S7+"),l=a("2/Rp"),i=a("rLCj"),m=a("l+S1"),d=(a("rGqo"),a("yt8O"),a("Btvt"),a("RW0V"),a("Z2Ku"),a("L9s1"),a("f3/d"),a("tsqr")),b=a("kLXV"),p=a("PArb"),f=a("g/of"),_=a("Sm+g"),O=a("vpoQ"),g=a("/a2Y"),j=["id","group_purchase_commander_name","name","mobile","email","wx_nick_name","wx_openid","password","people_id","address","custormer_category","avatar","add_time","update_time","explains","is_valid","purchase_total_counts"],v=["id","group_purchase_commander_name","wx_nick_name","wx_openid","avatar","avatar_url","add_time","update_time"],h=["password","avatar","avatar_url"],E={id:"顾客ID",group_purchase_commander_id:"团购团ID",group_purchase_commander_name:"团购团长",name:"顾客姓名",mobile:"顾客手机",email:"E-Mail",wx_nick_name:"微信昵称",wx_openid:"微信openid",password:"顾客密码",people_id:"身份证号",address:"地址",custormer_category:"顾客级别",avatar:"顾客头像",add_time:"创建时间",update_time:"更新时间",explains:"说明",is_valid:"有效",purchase_total_counts:"购物总次数"},C={is_valid:r.a.createElement(O.a,{options:[{value:!1,label:"否"},{value:!0,label:"是"}]}),custormer_category:r.a.createElement(O.a,{options:[{value:1,label:"一般顾客"},{value:2,label:"优质顾客"},{value:3,label:"VIP顾客"},{value:4,label:"团购团长"}]})},y=function(e){return{group_purchase_commander_name:{buttonTips:"选择团长",clickMethod:function(){return e(!0)}}}},q=["id","group_purchase_commander_name","name","mobile"],S={id:0,group_purchase_commander_id:0,group_purchase_commander_name:"",name:"",mobile:"",email:"",wx_openid:"",password:"",people_id:"",address:"",custormer_category:1,avatar:"顾客头像",add_time:"创建时间",update_time:"更新时间",explains:"说明",is_valid:!0,purchase_total_counts:0},w=["avatar"],k=["admin-customer/v1/customer"],x=function(e){var t=e.item,a=e.index,o=e.itemDetailClick,c=e.selectButtonOnClick,u=Object(n.useState)(""),s=u[0],l=u[1],i=Object(n.useState)(""),m=i[0],d=i[1];Object(n.useEffect)((function(){var e=t.name?"姓名: "+t.name:"";e="顾客ID: "+t.id+"; "+e;var a="",n=t.avatar_url?t.avatar_url:"",r="";Object.keys(t).includes("wx_info")&&Object.keys(t.wx_info).includes("wx_nickname")&&(a=t.wx_info.wx_nickname,r=t.wx_info.wx_avatar),l(a.length>0?e+"("+a+")":e),d(n.length>0?n:r)}),[t]);var b=Object(n.useState)([]),p=b[0],f=b[1];return Object(n.useEffect)((function(){c&&f([{buttonLabel:"选择",onClick:function(e){c(t,a)}}])}),[c]),r.a.createElement("div",null,r.a.createElement(g.a,{listsIndex:a,url:m,productTitle:s,productEffects:"手机: "+t.mobile,salePrice:0,clickDetailHandle:o,customButtons:p}))},H=function(e){var t=e.requestCount,a=e.reqParams,n=e.responseDataHandle,o=k[0];return r.a.createElement(_.a,{responseDataHandle:n,api:o,method:"get",reqParams:a,reqObject:{},requestCount:t})};H.defaultProps={requestCount:0,reqParams:{},responseDataHandle:function(e){console.log(e)}};var D=function(e){var t=e.requestCount,a=e.reqObject,n=e.responseDataHandle,o=[].concat(k)[0];return r.a.createElement(_.a,{responseDataHandle:n,api:o,method:"post",reqParams:{},reqObject:a,requestCount:t})};D.defaultProps={requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)}};var L=function(e){var t=e.requestCount,a=e.reqObject,n=e.responseDataHandle,o=e.id,c=[].concat(k)[0]+"/"+o;return r.a.createElement(_.a,{responseDataHandle:n,api:c,method:"put",reqParams:{},reqObject:a,requestCount:t})};L.defaultProps={requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)},id:0};var P=function(e){var t=e.requestCount,a=e.responseDataHandle,n=e.id,o=[].concat(k)[0]+"/"+n;return r.a.createElement(_.a,{responseDataHandle:a,api:o,method:"delete",reqParams:{},reqObject:{},requestCount:t})};P.defaultProps={requestCount:0,responseDataHandle:function(e){console.log(e)},id:0};var R=a("p8V/"),K=a("tW9P"),I=["id","password","avatar","avatar_url"],B=function(e){var t=e.visible,a=e.setVisible,o=e.reloadListCount,c=e.setReloadListCount,u=Object(n.useRef)({}),s=Object(n.useRef)({createCount:0}),l=Object(n.useState)(0),i=l[0],m=l[1],_=Object(n.useState)(0),O=_[0],g=_[1],h=Object(n.useRef)({});Object(n.useEffect)((function(){t&&(m(i+1),s.current={createCount:s.current.createCount+1})}),[t]);var q=Object(n.useState)({}),k=q[0],x=q[1],H=Object(n.useState)(!1),L=H[0],P=H[1],B=Object(n.useRef)(0),V=function(){u.current={},a(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{visible:t,title:"Customers 新建",closable:!1,footer:null},r.a.createElement("div",{style:{width:"100%",height:"auto",textAlign:"center"}},r.a.createElement(f.b,{oldObj:s.current,maxImagesNum:1,imageKeyName:w[0],onChange:function(e){u.current=Object.assign({},e)}})),r.a.createElement(p.a,null),r.a.createElement(K.a,{modalState:L,setModalState:P,selectHandle:function(e){var t=e.name;x({group_purchase_commander_name:t}),e.id>0&&(B.current=e.id),P(!1)}}),r.a.createElement(R.a,{columns:j,disabledKeys:v,notShowKeys:I,formKeyLabelObj:E,formKeySelectComponentsObj:C,formKeysItemButtonObj:y(P),onFinish:function(e){var t=Object.assign({},e,u.current);t.group_purchase_commander_name.length>0&&(t.group_purchase_commander_id=B.current),delete t.group_purchase_commander_name,h.current=t,console.log(t),g(O+1)},cancelHandle:V,showDeleteButton:!1,formInitialObj:S,initFormCount:i,updateFormObj:k}),r.a.createElement(D,{requestCount:O,reqObject:h.current,responseDataHandle:function(e){Object.keys(e).includes("code")&&1e3===e.code?(V(),c(o+1)):d.b.error("网络错误...")}})))};B.defaultProps={visible:!1,setVisible:function(e){return console.log(e)},reloadListCount:0,setReloadListCount:function(e){return console.log(e)}};var V=B,F=a("/wGt"),M=["group_purchase_commander_name","wx_nick_name","wx_openid","avatar","avatar_url","add_time","update_time"],N=function(e){var t=e.visible,a=e.setVisible,o=e.queryHandle,c=Object(n.useState)(0),u=c[0],s=c[1],l=Object(n.useState)({}),i=l[0],m=l[1],d=Object(n.useState)(!1),b=d[0],p=d[1],f=Object(n.useRef)(0),_=function(){s(u+1),a(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{title:"销售记录查询",width:"100%",height:"400px",placement:"top",onClose:_,visible:t,bodyStyle:{paddingBottom:80},footer:null},r.a.createElement(R.a,{columns:q,disabledKeys:M,formKeyLabelObj:E,formKeySelectComponentsObj:C,formKeysItemButtonObj:y(p),onFinish:function(e){var t={},a=e.id?parseInt(e.id):0;a>0?o({id:a}):(f.current>0&&(t.group_purchase_commander_id=f.current),e.name&&e.name.length>0&&(t.name=e.name,t.wx_nick_name=e.name),e.mobile&&e.mobile.length>0&&(t.mobile=e.mobile),o(t)),setTimeout((function(){_()}),50)},cancelHandle:function(){return a(!1)},showDeleteButton:!1,formInitialObj:S,initFormCount:u,updateFormObj:i})),r.a.createElement(K.a,{modalState:b,setModalState:p,selectHandle:function(e){var t=e.name;m({group_purchase_commander_name:t}),e.id>0&&(f.current=e.id),p(!1)}}))};N.defaultProps={visible:!1,setVisible:function(e){console.log(e)},queryHandle:function(e){console.log(e)}};var T=N,A=(a("xfY5"),a("fN96"),a("lN2L")),G=function(e){var t=e.visible,a=e.setVisible,o=e.oldObj,c=e.reloadListCount,u=e.setReloadListCount,s=Object(n.useState)([]),l=(s[0],s[1]),i=Object(n.useRef)({}),m=Object(n.useState)(""),_=(m[0],m[1],Object(n.useState)({})),O=_[0],g=_[1],q=Object(n.useState)(0),S=q[0],k=q[1],x=Object(n.useState)(0),H=x[0],D=x[1],I=Object(n.useRef)({}),B=Object(n.useState)(0),V=B[0],F=B[1],M=Object(n.useState)(!1),N=M[0],T=M[1],A=Object(n.useRef)(0);Object(n.useEffect)((function(){G()}),[t,o]);var G=function(){k(S+1),g(Object.assign({},o));for(var e=[],t=w[0],a=1;a<10;a++){var n=t+a,r=n+"_url",c=o[n],u=o[r];"string"==typeof c&&c.length>5&&e.push({cosNameKey:n,cosName:c,urlKey:r,url:u})}l(e)};return r.a.createElement(b.a,{visible:t,title:"Customers",closable:!1,footer:null},r.a.createElement("div",{style:{width:"100%",height:"auto",textAlign:"center"}},r.a.createElement(f.b,{maxImagesNum:1,imageKeyName:w[0],oldObj:o,onChange:function(e){i.current=e}})),r.a.createElement(p.a,null),r.a.createElement(R.a,{columns:j,disabledKeys:v,notShowKeys:h,formKeyLabelObj:E,formKeySelectComponentsObj:C,formKeysItemButtonObj:y(T),onFinish:function(e){var t=Object.assign({},e,i.current);console.log(t),t.group_purchase_commander_name&&t.group_purchase_commander_name.length>0&&A.current>0&&(t.group_purchase_commander_id=A.current),delete t.group_purchase_commander_name,I.current=t,D(H+1)},cancelHandle:function(){return a(!1)},showDeleteButton:!0,deleteHandle:function(){F(V+1),u(c+1)},updateFormObj:O,formInitialObj:{},initFormCount:S}),r.a.createElement(K.a,{modalState:N,setModalState:T,selectHandle:function(e){var t=e.name;g({group_purchase_commander_name:t}),e.id>0&&(A.current=e.id),T(!1)}}),r.a.createElement(L,{requestCount:H,reqObject:I.current,responseDataHandle:function(e){Object.keys(e).includes("code")&&1e3===e.code?(d.b.success("修改成功"),u(c+1),a(!1)):d.b.error("网络错误...")},id:O.id}),r.a.createElement(P,{requestCount:V,responseDataHandle:function(e){return a(!1)},id:O.id}))};G.defaultProps={visible:!1,setVisible:function(e){return console.log(e)},oldObj:{}};var J=G,W=function(e){return!!(Object.keys(e).includes("next")&&"string"==typeof e.next&&e.next.length>5)},Y=function(e){var t=e.reloadListCount,a=e.setReloadListCount,o=e.requestParams,c=e.selectButtonOnClick,u=Object(n.useRef)(!0),s=Object(n.useState)(!0),l=s[0],i=s[1],m=Object(n.useState)(!1),d=m[0],b=m[1],p=Object(n.useRef)({page:0}),f=Object(n.useState)([]),_=f[0],O=f[1],g=Object(n.useState)(0),j=g[0],v=g[1],h=Object(n.useState)(!1),E=h[0],C=h[1],y=Object(n.useState)({}),q=y[0],S=y[1];Object(n.useEffect)((function(){p.current=Object.assign({},o),k()}),[t]);var w=function(){if(u.current&&!d){var e=Number.isInteger(p.current.page)?p.current.page+1:1;p.current=Object.assign({},p.current,{page:e}),console.log(p.current),v(j+1),b(!0)}else console.log("Error state: hasMore is ",u.current,", loading is ",d)},k=function(){p.current=Object.assign({},p.current,{page:0}),O([]),u.current=!0,b(!1),setTimeout((function(){w(),console.log("end loadMore...")}),100)},D=function(e){var t=Object.assign({},_[e]);console.log(t),S(t),C(!0)};return r.a.createElement("div",null,r.a.createElement(H,{requestCount:j,reqParams:p.current,responseDataHandle:function(e){console.log("resp process..."),b(!1),Object.keys(e).includes("code")&&1e3===e.code&&Object.keys(e).includes("results")?(O(_.concat(e.results)),u.current=W(e),i(W(e))):console.log("Error: get data...")}}),r.a.createElement(A.a,{productsData:_,loadMore:w,hasMore:l,ItemRendererComponent:function(e){var t=e.item,a=e.index;return r.a.createElement(x,{item:t,index:a,itemDetailClick:D,selectButtonOnClick:c})}}),r.a.createElement(J,{visible:E,setVisible:C,oldObj:q,reloadListCount:t,setReloadListCount:a}))};Y.defaultProps={reloadListCount:1,setReloadListCount:function(e){console.log(e)},requestParams:{page:0},selectButtonOnClick:null};var Z=Y,z=function(e){var t=e.paramsObj,a=void 0===t?{}:t,o=Object(n.useState)(""),c=o[0],u=o[1];Object(n.useEffect)((function(){s()}),[a]);var s=function(){var e="";Object.keys(a).forEach((function(t){if(Object.keys(E).includes(t)){var n=" "+E[t]+" = "+a[t]+";";e+=n}})),e.length>2?u(e="查询条件:"+e):(console.log("查询条件为空"),u(""))};return r.a.createElement("div",{style:{height:"auto",width:"100%",padding:"0.1rem 0.2rem"}},c.length>2?r.a.createElement("p",null,c):null)};t.a=function(e){var t=e.selectButtonOnClick,a=void 0===t?null:t,d=Object(n.useRef)({page:0}),b=Object(n.useState)(1),p=b[0],f=b[1],_=Object(n.useState)(!1),O=_[0],g=_[1],j=Object(n.useState)(!1),v=j[0],h=j[1];return r.a.createElement("div",null,r.a.createElement(o.a,null,r.a.createElement(c.a,{span:14},r.a.createElement(u.b,null,r.a.createElement("h4",null,"Customers"),r.a.createElement(s.a,{title:"刷新"},r.a.createElement(l.a,{onClick:function(){d.current={page:0},f(p+1)},shape:"circle",icon:r.a.createElement(i.a,null)})),r.a.createElement(s.a,{title:"搜索"},r.a.createElement(l.a,{onClick:function(){return g(!0)},shape:"circle",icon:r.a.createElement(m.a,null)})))),r.a.createElement(c.a,{span:10},r.a.createElement("div",{style:{width:"100%",height:"auto"}},r.a.createElement(l.a,{style:{float:"right"},type:"link",onClick:function(){return h(!0)}},"新建")))),r.a.createElement(o.a,null,r.a.createElement(c.a,{span:24},r.a.createElement(z,{paramsObj:d.current}))),r.a.createElement(T,{visible:O,setVisible:g,queryHandle:function(e){d.current=Object.assign({},e),f(p+1),console.log("search...")}}),r.a.createElement(Z,{reloadListCount:p,setReloadListCount:f,requestParams:d.current,selectButtonOnClick:a}),r.a.createElement(V,{visible:v,setVisible:h,reloadListCount:p,setReloadListCount:f}))}}}]);
//# sourceMappingURL=cb8b892e3c1cd0094906d82e3c73cbb99ac9ca76-33ee53b9d9d6be7ca1e2.js.map