"use strict";(self.webpackChunkclient_admin_v102=self.webpackChunkclient_admin_v102||[]).push([[6903],{4167:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(1413),l=n(7294),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},r=n(7041),s=function(e,t){return l.createElement(r.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:o}))};s.displayName="ReloadOutlined";var c=l.forwardRef(s)},5071:function(e,t,n){n.d(t,{p:function(){return E},y:function(){return b}});var a=n(7294),l=n(1152),o=n(2184),r=n(3299),s=n(7371),c=n(5455).Z.formCommonStyle,i=c.layoutForm,u=c.formItemLayout,d=c.tailFormItemLayout,m={width:260},f=function(e){var t=e.formKey,n=e.formKeyLabelObj,r=e.disabledKeys,s=e.updateFormObj,c=e.rulesObj,i=e.formKeySelectComponentsObj,d=e.passwordKeys,f=e.showLabelName,p=void 0===f||f,b=r.includes(t),E=n[t],v=s[t];return a.createElement(l.Z.Item,Object.assign({},u,{name:t,label:p?E:"",initialValue:v,rules:c[t]?c[t]:[]}),Object.keys(i).includes(t)?i[t]:d.includes(t)?a.createElement(o.Z.Password,{style:m}):a.createElement(o.Z,{style:m,placeholder:"请输入 "+E,disabled:b}))},p=function(e){var t=e.formKey,n=e.formKeyLabelObj,o=e.disabledKeys,s=e.updateFormObj,c=e.rulesObj,i=e.formKeySelectComponentsObj,d=e.passwordKeys,m=e.formKeysItemButtonObj,p=m[t].buttonTips,b=n[t];return a.createElement(l.Z.Item,Object.assign({},u,{label:b}),a.createElement(f,{formKey:t,formKeyLabelObj:n,disabledKeys:o,updateFormObj:s,rulesObj:c,formKeySelectComponentsObj:i,passwordKeys:d,showLabelName:!1}),a.createElement(r.Z,{type:"link",onClick:function(e){console.log(e);try{m[t].clickMethod()}catch(n){console.log(n)}}},p))},b=function(e){var t=e.columns,n=e.disabledKeys,o=e.notShowKeys,c=e.formKeyLabelObj,u=e.formKeySelectComponentsObj,m=e.formKeysItemButtonObj,b=e.onFinish,E=e.cancelHandle,v=e.deleteHandle,y=e.showDeleteButton,g=e.updateFormObj,Z=e.formInitialObj,j=e.initFormCount,O=e.rulesObj,S=e.passwordKeys,C=l.Z.useForm()[0],h=(0,a.useState)(!1),P=h[0],K=h[1];(0,a.useEffect)((function(){C.setFieldsValue(g),K(!1)}),[g]),(0,a.useEffect)((function(){j>0&&(C.setFieldsValue(Z),K(!1))}),[j]);return a.createElement(l.Z,Object.assign({},i,{form:C,layout:"horizontal",onFinish:function(e){K(!0),b(e)},name:"adminer_info_edit"}),t.map((function(e,t){return o.includes(e)?null:Object.keys(m).includes(e)?a.createElement(p,{key:t.toString(),formKey:e,formKeyLabelObj:c,disabledKeys:n,updateFormObj:g,rulesObj:O,formKeySelectComponentsObj:u,passwordKeys:S,formKeysItemButtonObj:m}):a.createElement(f,{key:t.toString(),formKey:e,formKeyLabelObj:c,disabledKeys:n,updateFormObj:g,rulesObj:O,formKeySelectComponentsObj:u,passwordKeys:S})})),a.createElement(l.Z.Item,d,a.createElement(s.Z,null,a.createElement(r.Z,{loading:P,disabled:P,type:"primary",htmlType:"submit"},"提交"),a.createElement(r.Z,{onClick:E},"取消"),y?a.createElement(r.Z,{loading:P,disabled:P,onClick:function(){K(!0),v()}},"删除"):null)))};b.defaultProps={columns:[],disabledKeys:[],notShowKeys:[],formKeyLabelObj:{},formKeySelectComponentsObj:{},formKeysItemButtonObj:{},onFinish:function(e){console.log(e)},cancelHandle:function(){console.log("Cancel Handle")},deleteHandle:function(){console.log("Delete Handle")},showDeleteButton:!1,updateFormObj:{},formInitialObj:{},initFormCount:0,rulesObj:{},passwordKeys:[],getFieldsValueHandle:function(e){return console.log(e)}};var E=function(e){var t=e.columns,n=e.disabledKeys,c=e.notShowKeys,i=e.formKeyLabelObj,u=e.formKeySelectComponentsObj,d=e.onFinish,f=e.onFinishButtonTips,p=e.cancelHandle,b=e.showCancelButton,E=e.deleteHandle,v=e.showDeleteButton,y=e.updateFormObj,g=e.formInitialObj,Z=e.initFormCount,j=e.rulesObj,O=e.passwordKeys,S=(e.getFieldsValueHandle,l.Z.useForm()[0]);(0,a.useEffect)((function(){S.setFieldsValue(y)}),[y]),(0,a.useEffect)((function(){S.setFieldsValue(g)}),[Z]);var C=function(e){var t=e.formKey,r=n.includes(t),s=i[t],c=y[t];return a.createElement(l.Z.Item,{name:t,initialValue:c,rules:j[t]?j[t]:[]},Object.keys(u).includes(t)?u[t]:O.includes(t)?a.createElement(o.Z.Password,{style:m}):a.createElement(o.Z,{style:m,placeholder:"请输入 "+s,disabled:r}))};return a.createElement(l.Z,Object.assign({},{labelCol:{span:0},wrapperCol:{span:8}},{form:S,layout:"inline",onFinish:d,name:"adminer_info_edit"}),t.map((function(e,t){return c.includes(e)?null:a.createElement(C,{formKey:e,key:t.toString()})})),a.createElement(l.Z.Item,null,a.createElement(s.Z,null,a.createElement(r.Z,{type:"primary",htmlType:"submit"},f),b?a.createElement(r.Z,{onClick:p},"取消"):null,v?a.createElement(r.Z,{onClick:E},"删除"):null)))};E.defaultProps={columns:[],disabledKeys:[],notShowKeys:[],formKeyLabelObj:{},formKeySelectComponentsObj:{},onFinish:function(e){console.log(e)},onFinishButtonTips:"确定/修改",cancelHandle:function(){console.log("Cancel Handle")},showCancelButton:!1,deleteHandle:function(){console.log("Delete Handle")},showDeleteButton:!1,updateFormObj:{},formInitialObj:{},initFormCount:0,rulesObj:{},passwordKeys:[],getFieldsValueHandle:function(e){return console.log(e)}}},2486:function(e,t,n){n.d(t,{A:function(){return s}});var a=n(7294),l=n(6411),o=n(5455),r=l.Z.Option,s=function(e){var t=e.options,n=e.width,o=e.value,s=e.onChange,c=e.mode;return a.createElement(l.Z,{style:{width:n},onChange:s,value:o,mode:c,allowClear:!0},t.map((function(e,t){return a.createElement(r,{key:t.toString(),value:e.value},e.label)})))};s.defaultProps={options:[],width:o.Z.selectComponentWidth,value:null,onChange:function(e){console.log(e)},mode:null}},570:function(e,t,n){n.d(t,{Y:function(){return m},d:function(){return d}});var a=n(3433),l=n(7294),o=n(3765),r=n(8654),s=n(3299),c=n(3606),i=n(2210),u=n(8102),d=function(e){var t=e.visible,n=e.setVisible,d=e.visibleNum,m=e.uploadedHandle,f=(0,l.useState)([]),p=f[0],b=f[1],E=(0,l.useState)(""),v=E[0],y=E[1],g=(0,l.useState)(!1),Z=g[0],j=g[1],O={onRemove:function(e){var t=[].concat(p),n=t.indexOf(e);t.splice(n,1),b(t),console.log(t)},onChange:function(e){var t=(0,a.Z)(e.fileList),n=[];t.map((function(e){n.push(e.originFileObj)})),b(n)},beforeUpload:function(e){return!1},filesList:[]};return l.createElement(r.Z,{visible:t===d,title:"上传淘宝订单CSV文件",closable:!1,footer:[l.createElement(s.Z,{key:"upload_csv",onClick:function(){if(y(""),2===p.length){var e=new FormData,t=1;return p.forEach((function(n){e.append("file"+t,n),t+=1})),j(!0),new Promise((function(t,a){(0,u.H)("records-admin/v1/taobaopurchaserecord","post",{},e,5e5).then((function(e){console.log(e),e.code&&1e3===e.code?(o.ZP.success("淘宝订单 CSV 文件上传成功!"),n(0),t(!0)):(o.ZP.error("淘宝订单 CSV 文件上传失败..."),a(!1)),j(!1),m()})).catch((function(e){o.ZP.error("淘宝订单 CSV 文件上传失败, 请检查网络或文件..."),console.log(e),a(!1),j(!1)}))}))}y("必须选择淘宝 订单、商品 2个csv文件")},loading:Z},"上传"),l.createElement(s.Z,{key:"cancel_modal",onClick:function(){n(0)},loading:Z},"取消")]},l.createElement(c.Z,Object.assign({},O,{maxCount:2,multiple:!0,accept:".csv"}),l.createElement(s.Z,{icon:l.createElement(i.Z,null)},"Select Csv File")),v.length>0?l.createElement("div",null,l.createElement("br",null),l.createElement("p",{style:{color:"red"}},"* ",v)):null)};d.defaultProps={visible:0,setVisible:function(e){return console.log(e)},visibleNum:1,uploadedHandle:function(){return console.log("Uploaded")}};var m=function(e){var t=e.visible,n=e.setVisible,d=e.visibleNum,m=e.uploadedHandle,f=(0,l.useState)([]),p=f[0],b=f[1],E=(0,l.useState)(""),v=E[0],y=E[1],g=(0,l.useState)(!1),Z=g[0],j=g[1],O={onRemove:function(e){var t=[].concat(p),n=t.indexOf(e);t.splice(n,1),b(t),console.log(t)},onChange:function(e){var t=(0,a.Z)(e.fileList),n=[];t.map((function(e){n.push(e.originFileObj)})),b(n)},beforeUpload:function(e){return!1},filesList:[]};return l.createElement(r.Z,{visible:t===d,title:"上传淘宝订单CSV文件",closable:!1,footer:[l.createElement(s.Z,{key:"upload_csv",onClick:function(){if(y(""),2===p.length){var e=new FormData,t=1;return p.forEach((function(n){e.append("file"+t,n),t+=1})),j(!0),new Promise((function(t,a){(0,u.H)("records-admin/v1/inittaobaopurchaserecord","post",{},e,2e5).then((function(e){console.log(e),e.code&&1e3===e.code?(o.ZP.success("初始化批量上传淘宝订单 CSV 文件成功!"),n(0),t(!0)):(o.ZP.error("淘宝订单 CSV 文件上传失败..."),a(!1)),j(!1),m()})).catch((function(e){o.ZP.error("淘宝订单 CSV 文件上传失败, 请检查网络或文件..."),console.log(e),a(!1),j(!1)}))}))}y("必须选择淘宝 订单、商品 2个csv文件")},loading:Z},"上传"),l.createElement(s.Z,{key:"cancel_modal",onClick:function(){n(0)},loading:Z},"取消")]},l.createElement(c.Z,Object.assign({},O,{maxCount:2,multiple:!0,accept:".csv"}),l.createElement(s.Z,{icon:l.createElement(i.Z,null)},"Select Csv File")),v.length>0?l.createElement("div",null,l.createElement("br",null),l.createElement("p",{style:{color:"red"}},"* ",v)):null)};m.defaultProps={visible:0,setVisible:function(e){return console.log(e)},visibleNum:1,uploadedHandle:function(){return console.log("Uploaded")}}},8338:function(e,t,n){var a=n(7294),l=n(4325),o=function(e){var t=e.spinning,n=(0,a.useState)(!1),o=n[0],r=n[1],s={display:o?"block":"none"};return(0,a.useEffect)((function(){r(t)}),[t]),a.createElement("div",{className:"overall-loading",style:s},a.createElement(l.Z,{spinning:t,size:"large"}))};o.defaultProps={spinning:!1},t.Z=o},903:function(e,t,n){var a=n(7294),l=n(3765),o=n(7371),r=n(3148),s=n(6452),c=n(3606),i=n(3299),u=n(2210),d=n(845),m=n(9378),f=n(1563),p=n(47),b=function(e){var t=e.oldImageUrl,b=e.avatarSize,E=e.uploadedResponseHandle,v=e.fileKey,y=e.cleanFileListCount,g=(0,a.useRef)({}),Z=(0,a.useRef)({}),j=(0,a.useRef)(""),O=(0,a.useState)(""),S=O[0],C=O[1],h=(0,a.useState)(0),P=h[0],K=h[1],_=(0,a.useRef)({}),w=(0,a.useState)(!0),k=w[0],q=w[1],H=(0,a.useState)(!0),F=H[0],I=H[1];(0,a.useEffect)((function(){R()}),[y]),(0,a.useEffect)((function(){g.current={},C(""),q(!0)}),[t]),(0,a.useEffect)((function(){I(0===Object.keys(g.current).length)}),[g.current]);var D=function(e,t){var n=Object.assign({},Z.current),a=n.credentials;t({TmpSecretId:a.tmpSecretId,TmpSecretKey:a.tmpSecretKey,XCosSecurityToken:a.sessionToken,StartTime:n.startTime,ExpiredTime:n.expiredTime})},L={fileList:[],beforeUpload:function(e){return g.current=e,K(P+1),!1}},R=function(){E({},v),C(""),g.current={},q(!1)};return a.createElement("div",null,a.createElement(o.Z,{direction:"vertical"},a.createElement(m.Z,{src:k?t:S,width:b}),a.createElement(r.Z,{gutter:10},a.createElement(s.Z,{span:12},a.createElement("div",{style:{textAlign:"left"}},a.createElement(c.Z,L,F?a.createElement(i.Z,{size:"small"},a.createElement(u.Z,null)," 更新"):null))),a.createElement(s.Z,{span:12},S.length>10||t.length>10?a.createElement(i.Z,{onClick:R,size:"small"},a.createElement(d.Z,null)," 删除"):null)),a.createElement(f.G,{requestCount:P,reqObject:_.current,responseDataHandle:function(e){(console.log(e),Object.keys(e).includes("image_cos_name")||Object.keys(e).includes("sts_obj"))?(Z.current=e.sts_obj,j.current=e.image_cos_name,"undefined"!=typeof window&&new(n(4525))({getAuthorization:D}).putObject(Object.assign({},p.D1,{Key:j.current,Body:g.current,onProgress:function(e){console.log(JSON.stringify(e))}}),(function(t,n){console.log(t||n),n?(console.log(n),C(e.image_cos_name_url),q(!1),E(e,v),l.ZP.success("图片上传成功!")):(R(),l.ZP.error("图片上传失败..."))}))):console.log("Get temporary key error...")}})))};b.defaultProps={oldImageUrl:"",avatarSize:96,uploadedResponseHandle:function(e,t){console.log(e,t)},fileKey:"image1",cleanFileListCount:0},t.Z=b},6318:function(e,t,n){var a=n(7294),l=n(3765),o=n(7371),r=n(3148),s=n(6452),c=n(3606),i=n(3299),u=n(2210),d=n(845),m=n(9378),f=n(5455),p=n(7864),b=function(e){var t=e.oldImageUrl,n=e.avatarSize,b=e.uploadedResponseHandle,E=e.fileKey,v=e.cleanFileListCount,y=(0,a.useState)(!0),g=y[0],Z=y[1],j=(0,a.useState)([]),O=j[0],S=j[1],C=(0,a.useState)(""),h=C[0],P=C[1],K=(0,a.useState)(!0),_=K[0],w=K[1];(0,a.useEffect)((function(){Z(0===O.length)}),[O]),(0,a.useEffect)((function(){S([])}),[v]),(0,a.useEffect)((function(){S([]),P(""),w(!0)}),[t]);var k={name:"upload-single-file",action:f.Z.apiBaseUrl+"/files-handle/v1/uploadfiles",headers:{authorization:(0,p.LP)()},fileList:O,onChange:function(e){if(S(e.fileList.slice()),w(!1),"done"===e.file.status){l.ZP.success(e.file.name+" file uploaded successfully");var t=Object.assign({},e.file.response);b(t,E),Object.keys(t).includes("image_cos_name_url")&&t.image_cos_name_url.length>10&&P(t.image_cos_name_url)}else"error"===e.file.status&&(l.ZP.error("Error: "+e.file.name+" file upload failed."),l.ZP.error("Error: "+e.file.name+" 文件上传失败..."),S([]))}};return a.createElement("div",null,a.createElement(o.Z,{direction:"vertical"},a.createElement(m.Z,{src:_?t:h,width:n}),a.createElement(r.Z,{gutter:10},a.createElement(s.Z,{span:12},a.createElement("div",{style:{textAlign:"left"}},a.createElement(c.Z,k,g?a.createElement(i.Z,{size:"small"},a.createElement(u.Z,null)," 更新"):null))),a.createElement(s.Z,{span:12},h.length>10||t.length>10?a.createElement(i.Z,{onClick:function(){b({},E),P(""),S([]),w(!1)},size:"small"},a.createElement(d.Z,null)," 删除"):null))))};b.defaultProps={oldImageUrl:"",avatarSize:96,uploadedResponseHandle:function(e,t){console.log(e,t)},fileKey:"image1",cleanFileListCount:0},t.Z=b},325:function(e,t,n){n.r(t),n.d(t,{default:function(){return ee}});var a=n(7294),l=n(262),o=n(4564),r=n(3765),s=n(7371),c=n(3148),i=n(6452),u=n(3299),d=n(2889),m=n(4167),f=n(6643),p=function(e){var t=e.sendRequest;return e.showLoadMoreButton?a.createElement("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"}},a.createElement(u.Z,{onClick:t},"loading more")):null},b=n(9378),E=n(8654),v=n(8338),y=n(5604),g=["adminer/v1/admin","adminer/v1/createadmin"],Z=function(e){var t=e.requestCount,n=e.reqObject,l=e.responseDataHandle,o=[].concat(g)[1];return a.createElement(y.Z,{responseDataHandle:l,api:o,method:"post",reqParams:{},reqObject:n,requestCount:t})};Z.defaultProps={requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)}};var j=function(e){var t=e.adminerId,n=e.requestCount,l=e.reqObject,o=e.responseDataHandle,r=[].concat(g)[0]+"/"+t;return a.createElement(y.Z,{responseDataHandle:o,api:r,method:"put",reqParams:{},reqObject:l,requestCount:n})};j.defaultProps={adminerId:0,requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)}};var O=function(e){var t=e.requestCount,n=e.reqParams,l=e.responseDataHandle,o=[].concat(g)[0]+"/1";return a.createElement(y.Z,{responseDataHandle:l,api:o,method:"get",reqParams:n,reqObject:{},requestCount:t})};O.defaultProps={requestCount:0,reqParams:{},responseDataHandle:function(e){console.log(e)}};var S=function(e){var t=e.requestCount,n=e.adminId,l=e.responseDataHandle,o=[].concat(g)[1]+"/"+n;return a.createElement(y.Z,{responseDataHandle:l,api:o,method:"delete",reqParams:{},reqObject:{},requestCount:t})};S.defaultProps={requestCount:0,adminId:0,responseDataHandle:function(e){console.log(e)}};var C=function(e){var t=e.requestCount,n=e.reqParams,l=e.responseDataHandle,o=[].concat(g)[1];return a.createElement(y.Z,{responseDataHandle:l,api:o,method:"get",reqParams:n,reqObject:{},requestCount:t})};C.defaultProps={requestCount:0,reqParams:{},responseDataHandle:function(e){console.log(e)}};var h=function(e){var t=e.adminerId,n=e.requestCount,l=e.reqObject,o=e.responseDataHandle,r=[].concat(g)[1]+"/"+t;return a.createElement(y.Z,{responseDataHandle:o,api:r,method:"put",reqParams:{},reqObject:l,requestCount:n})};h.defaultProps={adminerId:0,requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)}};var P=n(5071),K=n(2486),_=["id","name","mobile","email","wx_openid","password","people_id","address","title","avatar","add_time","update_time","on_job"],w={id:"0",name:"",mobile:"",email:"",password:"",people_id:"",address:"",title:"",add_time:"",update_time:"",on_job:!0},k=["id","wx_openid","mobile","avatar","add_time","update_time"],q=["avatar","wx_openid","title","password"],H=["password"],F={mobile:[{required:!0,min:10,message:"请输入正确的手机"}],password:[{required:!0,min:6,message:"密码最少6位"}]},I={id:"ID",name:"名称",mobile:"手机",email:"E-Mail",password:"密码",people_id:"身份证",address:"地址",title:"职务",add_time:"加入日期",update_time:"更新日期",on_job:"在职"},D={on_job:a.createElement(K.A,{options:[{value:!0,label:"在职"},{value:!1,label:"离职"}]}),title:a.createElement(K.A,{options:[{value:1,label:"super_admin"},{value:2,label:"admin"}]})},L=n(903),R=function(e){var t=e.adminObj,n=e.modalState,l=e.setModalState,o=(0,a.useState)(!1),s=o[0],c=o[1],i=(0,a.useState)(0),u=i[0],d=i[1],m=(0,a.useState)(0),f=m[0],p=m[1],b=(0,a.useState)(0),y=b[0],g=b[1],Z=(0,a.useRef)({}),O=(0,a.useRef)({}),S=function(){console.log("Cancel.."),d(u+1),O.current={},g(y+1),l(!1)};return a.createElement(E.Z,{title:"管理员详情",getContainer:!1,visible:n,footer:null,closable:!1},a.createElement(v.Z,{spinning:s}),a.createElement("div",{className:"avatar-box"},a.createElement(L.Z,{oldImageUrl:t.avatar,avatarSize:64,uploadedResponseHandle:function(e){console.log(e);var t=Object.assign({},e);Object.keys(t).includes("code")&&Object.keys(t).includes("image_cos_name")&&1e3===t.code?O.current={avatar:t.image_cos_name}:O.current={}},cleanFileListCount:u})),a.createElement(P.y,{columns:_,disabledKeys:k,notShowKeys:q,formKeyLabelObj:I,formKeySelectComponentsObj:D,onFinish:function(e){console.log(e),Z.current=Object.assign({},e,O.current),c(!0),p(f+1)},cancelHandle:S,updateFormObj:t,formInitialObj:w,initFormCount:y}),a.createElement(j,{adminerId:t.id,requestCount:f,reqObject:Z.current,responseDataHandle:function(e){c(!1),console.log(e),Object.keys(e).includes("code")&&1e3===e.code?(r.ZP.success("修改成功!"),S()):r.ZP.error("网络错误, 请检查...")}}))};R.defaultProps={adminObj:{},modalState:!1,setModalState:function(e){console.log("Close Modal "+e+"...")}};var M=R,V=["未知","super-admin","admin"],x=function(e){var t=e.selectAdminHandle,n=e.queryAdminsParams,l=(0,a.useState)([]),o=l[0],s=l[1],c=(0,a.useState)(!1),i=c[0],d=c[1],m=(0,a.useState)({}),E=m[0],v=m[1],y=(0,a.useState)(0),g=y[0],Z=y[1],j=(0,a.useState)(!0),S=j[0],C=j[1];(0,a.useEffect)((function(){s([]),h()}),[n]);var h=function(){Z(g+1),C(!1)};return a.createElement(a.Fragment,null,a.createElement(f.ZP,{itemLayout:"vertical",loadMore:a.createElement(p,{sendRequest:h,showLoadMoreButton:S}),dataSource:o,renderItem:function(e){return a.createElement(f.ZP.Item,{actions:[a.createElement(u.Z,{onClick:function(){return t(e)},type:"link"},"选择"),a.createElement(u.Z,{onClick:function(){return t=e,console.log(t),v(t),void d(!0);var t},type:"link"},"详情")]},a.createElement(f.ZP.Item.Meta,{avatar:a.createElement(b.Z,{src:e.avatar,width:64}),title:"姓名: "+e.name+", 手机: "+e.mobile+", 住址: "+e.address+";",description:"职务: "+V[e.title]}))}}),a.createElement(O,{requestCount:g,reqParams:n,responseDataHandle:function(e){Object.keys(e).includes("code")&&1e3===e.code&&Object.keys(e).includes("name")?(s([e]),C(!1)):(r.ZP.error("Error: 网络错误..."),s([]),C(!0))}}),a.createElement(M,{adminObj:E,modalState:i,setModalState:d}))};x.defaultProps={selectAdminHandle:function(e){console.log(e)},queryAdminsParams:{}};var A=x,B=function(e){var t=e.adminObj,n=e.modalState,l=e.setModalState,o=(0,a.useState)(!1),s=o[0],c=o[1],i=(0,a.useState)(0),u=i[0],d=i[1],m=(0,a.useState)(0),f=m[0],p=m[1],b=(0,a.useState)(0),y=b[0],g=b[1],Z=(0,a.useState)(0),j=Z[0],O=Z[1],C=(0,a.useRef)({}),K=(0,a.useRef)({}),q=function(){console.log("Cancel.."),d(u+1),K.current={},O(j+1),l(!1)};return a.createElement(E.Z,{title:"管理员详情",getContainer:!1,visible:n,footer:null,closable:!1},a.createElement(v.Z,{spinning:s}),a.createElement("div",{className:"avatar-box"},a.createElement(L.Z,{oldImageUrl:t.avatar,avatarSize:64,uploadedResponseHandle:function(e){console.log(e);var t=Object.assign({},e);Object.keys(t).includes("code")&&Object.keys(t).includes("image_cos_name")&&1e3===t.code?K.current={avatar:t.image_cos_name}:K.current={}},cleanFileListCount:u})),a.createElement(P.y,{columns:_,disabledKeys:k,notShowKeys:["avatar","wx_openid"],formKeyLabelObj:I,formKeySelectComponentsObj:D,onFinish:function(e){console.log(e),C.current=Object.assign({},e,K.current),c(!0),p(f+1)},cancelHandle:q,deleteHandle:function(e){g(y+1)},showDeleteButton:!0,updateFormObj:t,formInitialObj:w,initFormCount:j}),a.createElement(h,{adminerId:t.id,requestCount:f,reqObject:C.current,responseDataHandle:function(e){c(!1),console.log(e),Object.keys(e).includes("code")&&1e3===e.code?(r.ZP.success("Success update admin!"),r.ZP.success("修改成功!"),q()):(r.ZP.error("Error..."),r.ZP.error("网络错误, 请检查..."))}}),a.createElement(S,{adminId:t.id,requestCount:y,responseDataHandle:function(e){console.log(e),q()}}))};B.defaultProps={adminObj:{},modalState:!1,setModalState:function(e){console.log("Close Modal "+e+"...")}};var z=B,T=["未知","super-admin","admin"],N=function(e){var t=e.selectAdminHandle,n=e.queryAdminsParams,l=(0,a.useState)([]),o=l[0],s=l[1],c=(0,a.useState)(!1),i=c[0],d=c[1],m=(0,a.useState)({}),E=m[0],v=m[1],y=(0,a.useState)(0),g=y[0],Z=y[1],j=(0,a.useState)(!0),O=j[0],S=j[1];(0,a.useEffect)((function(){s([]),h()}),[n]);var h=function(){Z(g+1),S(!1)};return a.createElement(a.Fragment,null,a.createElement(f.ZP,{itemLayout:"vertical",loadMore:a.createElement(p,{sendRequest:h,showLoadMoreButton:O}),dataSource:o,renderItem:function(e){return a.createElement(f.ZP.Item,{actions:[a.createElement(u.Z,{onClick:function(){return t(e)},type:"link"},"选择"),a.createElement(u.Z,{onClick:function(){return t=e,console.log(t),v(t),void d(!0);var t},type:"link"},"详情")]},a.createElement(f.ZP.Item.Meta,{avatar:a.createElement(b.Z,{src:e.avatar,width:64}),title:"姓名: "+e.name+", 手机: "+e.mobile+", 住址: "+e.address+";",description:"职务: "+T[e.title]}))}}),a.createElement(C,{requestCount:g,reqParams:n,responseDataHandle:function(e){if(Object.keys(e).includes("code")&&1e3===e.code&&Object.keys(e).includes("results")){var t=[].concat(e.results);s(t),e.next&&S(!0)}else r.ZP.error("Error: network..."),r.ZP.error("Error: 网络错误..."),s([]),S(!0)}}),a.createElement(z,{adminObj:E,modalState:i,setModalState:d}))};N.defaultProps={selectAdminHandle:function(e){console.log(e)},queryAdminsParams:{}};var U=N,G=n(6318),Y=["id","avatar","wx_openid","add_time","update_time","title","on_job"],J=["id","wx_openid","avatar","add_time","update_time"],W=function(e){var t=e.modalState,n=e.setModalState,l=(0,a.useState)(!1),o=l[0],s=l[1],c=(0,a.useRef)({}),i=(0,a.useRef)({}),u=(0,a.useState)(0),d=u[0],m=u[1],f=(0,a.useState)(0),p=f[0],b=f[1],y=(0,a.useState)(0),g=y[0],j=y[1],O=function(){c.current={},i.current={},j(g+1),b(p+1),n(!1)};return a.createElement(E.Z,{title:"创建管理员",getContainer:!1,visible:t,footer:null,closable:!1},a.createElement(v.Z,{spinning:o}),a.createElement("div",{className:"avatar-box"},a.createElement(G.Z,{avatarSize:64,uploadedResponseHandle:function(e,t){Object.keys(e).includes("code")&&1e3===e.code&&Object.keys(e).includes("image_cos_name")&&(c.current={avatar:e.image_cos_name})},cleanFileListCount:p})),a.createElement(P.y,{columns:_,disabledKeys:J,notShowKeys:Y,formKeyLabelObj:I,formKeySelectComponentsObj:D,onFinish:function(e){s(!0),i.current=Object.assign({},e,c.current),m(d+1)},cancelHandle:O,showDeleteButton:!1,formInitialObj:w,initFormCount:g,rulesObj:F,passwordKeys:H}),a.createElement(Z,{requestCount:d,reqObject:i.current,responseDataHandle:function(e){s(!1),Object.keys(e).includes("code")&&1e3===e.code?(r.ZP.success("Success"),r.ZP.success("创建管理员成功!"),O()):(r.ZP.success("Error..."),r.ZP.success("Error: 网络错误..."))}}))};W.defaultProps={modalState:!1,setModalState:function(e){console.log(e)}};var X=W,Q=n(570),$=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1],l=(0,a.useState)({}),o=l[0],f=l[1],p=(0,a.useState)(0),b=p[0],E=p[1],v=(0,a.useState)(2),y=v[0],g=v[1],Z=(0,a.useState)(0),j=Z[0],S=Z[1];(0,a.useEffect)((function(){setTimeout((function(){E(b+1)}),1e3)}),[]);return a.createElement(a.Fragment,null,a.createElement(s.Z,{direction:"vertical"},a.createElement(c.Z,null,a.createElement(i.Z,{span:24},a.createElement("h4",null,"Admins Manage"))),a.createElement(c.Z,null,a.createElement(i.Z,{span:14},a.createElement(s.Z,null,a.createElement(u.Z,{type:"default",onClick:function(){return n(!0)}},"创建管理员"),a.createElement(d.Z,{title:"刷新"},a.createElement(u.Z,{onClick:function(){f({id:0}),f({})},shape:"circle",icon:a.createElement(m.Z,null)})))),a.createElement(i.Z,{span:10},a.createElement("div",{style:{width:"100%",height:"auto"}},a.createElement(d.Z,{title:"初始化导入淘宝订单"},a.createElement(u.Z,{style:{float:"right"},type:"link",onClick:function(){return S(1)}},"淘宝csv文件")))))),a.createElement("br",null),a.createElement("hr",null),a.createElement(O,{requestCount:b,reqParams:{},responseDataHandle:function(e){Object.keys(e).includes("code")&&1e3===e.code&&Object.keys(e).includes("title")?g(e.title):(r.ZP.error("Error: 错误, 请登陆..."),g(2))}}),1===y?a.createElement(U,{queryAdminsParams:o}):a.createElement(A,null),a.createElement(X,{modalState:t,setModalState:n}),a.createElement(Q.Y,{visible:j,setVisible:S,visibleNum:1}))},ee=function(){return a.createElement(o.Z,null,a.createElement(l.Z,{title:"Admin"}),a.createElement($,null))}}}]);
//# sourceMappingURL=component---src-pages-adminers-js-6e3ca910b16c0e3eddb1.js.map