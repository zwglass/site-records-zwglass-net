{"version":3,"file":"component---src-pages-wxspecialgoods-js-5e28d7b24867486f3171.js","mappings":"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","sources":["webpack://client_admin_v102/./src/components/wx_store/special_goods/special_goods_columns_label_config.jsx","webpack://client_admin_v102/./src/components/wx_store/special_goods/special_goods_requests.jsx","webpack://client_admin_v102/./src/components/wx_store/special_goods/update_special_goods.jsx","webpack://client_admin_v102/./src/components/wx_store/special_goods/special_goods_list.jsx","webpack://client_admin_v102/./src/components/wx_store/special_goods/index.jsx","webpack://client_admin_v102/./src/pages/wxspecialgoods.js"],"sourcesContent":["import React from 'react';\nimport { Button, DatePicker } from 'antd';\nimport moment from 'moment';\nimport { CustomSelect } from '../../base_components/select_component';\n// import { expressCompanyRequestGet } from './custom_select_requests';\nimport { customRanderItem } from '../../base_components/lists/custom_list';\n\n// SpecialGoods 列 配置\n\n// ~~~~~~ 表单列, 需添加 ~~~~~~\nconst formKeys = [\n    \"id\", \"name\", \"special_sale\",\n];\n\n// ~~~~~~ 表单不能编辑列, 根据实际添加 ~~~~~~\nconst formDisabledKeys = [\n    \"id\", \"name\",];\n\n// ~~~~~~ 表单不显示列, 根据实际添加 ~~~~~~\nconst formNotShowKeys = [\n    \"image\",];\n\n// ~~~~~~ 表单列名称 label, 需添加 ~~~~~~\nconst formKeysLabelsObj = {\n    \"id\": \"ID\", \"name\": \"品名\", \"channel_id\": \"频道\", \"categories\": \"分类\", \"sort_order\": \"排序顺序\", \"freight_template_id\": \"快递模版ID\",\n    \"freight_type\": \"快递类别\", \"goods_brief\": \"商品简介\", \"goods_number\": \"商品数量\", \"goods_unit\": \"单位\", \"has_done\": \"有现货\", \"has_gallery\": \"已推广\",\n    \"is_delete\": \"已下架\", \"is_index\": \"在序列\", \"is_new\": \"是新品\", \"is_on_sale\": \"已上架\", \"keywords\": \"关键词\", \"cost_price\": \"成本价\",\n    \"min_cost_price\": \"最低成本价\", \"min_retail_price\": \"最低零售价\", \"retail_price\": \"零售价\", \"sell_volume\": \"销售数量\", \"https_pic\": \"链接图\",\n    \"goods_desc\": \"详情页\", \"list_pic\": \"主图\", \"home_pic1\": \"主图1\", \"home_pic2\": \"主图2\", \"home_pic3\": \"主图3\", \"home_pic4\": \"主图4\",\n    \"home_pic5\": \"主图5\", \"home_pic6\": \"主图6\", \"home_pic7\": \"主图7\", \"home_pic8\": \"主图8\", \"home_pic9\": \"主图9\", \"goods_video\": \"商品视频\",\n    \"handle_staff_id\": \"操作员ID\", \"add_time\": \"创建时间\", \"update_time\": \"更新时间\", \"explains\": \"说明\", \"special_sale\": \"今日特价商品\",\n};\n\n//  ~~~~~~ 选择框, 根据实际添加 ~~~~~~\n// const SelectBannerEnabled = (<CustomSelect\n//     options={[{ value: 0, label: '不可编辑' }, { value: 1, label: '可编辑' }]} />);\n// const SelectBannerLinkType = (<CustomSelect\n//     options={[{ value: 0, label: '无效' }, { value: 1, label: '有效' }]} />);\nconst SelectIsDelete = (<CustomSelect \n    options={[{ value: 0, label: '否'}, { value: 1, label: '是'}]} />)\n// const SelectEndTime = (<DatePicker showTime format=\"YYYY-MM-DD HH:mm:ss\" />);\nconst formKeySelectComponentsObj = {\n    // enabled: SelectBannerEnabled,\n    // end_time: SelectEndTime,\n    // is_delete: SelectIsDelete,\n    // link_type: SelectBannerLinkType,\n    special_sale: SelectIsDelete\n};\n\n// ~~~~~~ 表单自定义操作按钮, 根据实际添加 ~~~~~~\nconst formKeysHandleButtonObj = (setOptModalState) => {\n    return {\n        goods_id: {buttonTips: '选择商品', clickMethod: () => setOptModalState(1)},\n    };\n};\n\n// ~~~~~~ 表单是图片列, 根据实际添加(废弃, 改用 imageKeyNames) ~~~~~~\n// const formKeysIsImages = [];\n\n// ~~~~~~ 查询表单 get 请求条件keys, 根据实际添加 ~~~~~~\nconst formGetRequestParamsKeys = [\"id\", ];\n\n//  ~~~~~~ 表单初始化值, 根据实际添加 ~~~~~~\nconst formInitialObj = {\n    \"id\": 0, \"enabled\": 0, \"goods_id\": 0, \"end_time\": \"\", \"link\": \"\", \"link_type\": 0,\n    \"explains\": \"\", \"add_time\": \"\", \"update_time\": \"\"\n}\n\n// ~~~~~~ 表单值规则, 根据实际添加 ~~~~~~\n// formRulesList = {formKey: [{require: true, message: 'Please input Password!',}, ]};\nconst formRulesList = {\"password\": [{required: true, message: 'Please input Password!',}, ], }\n\n// ~~~~~~ 图片列名称, 根据实际修改(多张图片去掉最后序号数字) ~~~~~~\nconst imageKeyNames = ['home_pic'];\n\n// ~~~~~~ 图片总数量, 默认设置为1, 根据实际修改 ~~~~~~\nconst maxImagesNum = 9;\n\n// ~~~~~~ api请求url apiLists, 根据实际修改 ~~~~~~\nconst apiLists = ['goods-admin/v1/specialgoods', 'goods-admin/v1/goods', ];\n\nconst actionButtons = (item, setVisible, setSelectedObj, selectButtonOnClick) => {\n    const onClickInfo = () => {\n        setSelectedObj(item);\n        setVisible(2);\n    }\n    const btnList = [\n        <Button onClick={onClickInfo} type=\"link\">详情</Button>,\n    ];\n    if (selectButtonOnClick) {\n        btnList.push(<Button onClick={() => selectButtonOnClick(item)} type=\"link\">选择</Button>)\n    }\n    return btnList;\n}\n// 修改 ~~~~~~~ item keys ~~~~~~;\nconst renderItem = (item, setSelectedObj, selectButtonOnClick, setVisible, visible) => {\n    // 必须 每一行渲染 的组件, 修改 ~~~~~~~ item keys ~~~~~~;\n    const textsContent = (\n        <div>\n            <p>{`商品ID: ${item.id}`}</p>\n            <p>{`是今日特价商品: ${item.special_sale > 0 ? '是' : '否'}`}</p>\n        </div>\n    )\n    const updateItemObj = {\n        id: item.id,\n        actions: actionButtons(item, setVisible, setSelectedObj, selectButtonOnClick),\n        img: item.home_pic1_url,\n        avatar: '',\n        title: `商品标题:  ${item.name};`,\n        content: textsContent,\n    };\n    return customRanderItem(updateItemObj, 180);\n};\n\nconst judgeHasMore = (resp) => {\n    if (Object.keys(resp).includes('next')\n        && typeof resp.next === 'string'\n        && resp.next.length > 5) {\n        return true;\n    }\n    return false;\n};\n\nexport {\n    formKeys,\n    formDisabledKeys,\n    formNotShowKeys,\n    formKeysLabelsObj,\n    formKeySelectComponentsObj,\n    formKeysHandleButtonObj,\n    // formKeysIsImages,\n    formGetRequestParamsKeys,\n    formInitialObj,\n    formRulesList,\n    imageKeyNames,\n    maxImagesNum,\n    apiLists,\n    renderItem,\n    judgeHasMore\n};\n","import React from 'react';\n\nimport AxiosRequest from '../../apis';\nimport { sendAxiosRequest } from '../../apis/sendRequest.js';\n\nimport { apiLists } from './special_goods_columns_label_config';\n\n// SpecialGoods 的request请求\n\nconst SpecialGoodsRequestGet = ({ requestCount, reqParams, responseDataHandle }) => {\n  // SpecialGoods Get请求\n  const api = apiLists[0];\n  const method = 'get';\n  const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nSpecialGoodsRequestGet.defaultProps = {\n  requestCount: 0,\n  reqParams: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n};\n\nconst SpecialGoodsRequestPost = ({ requestCount, reqObject, responseDataHandle }) => {\n  // SpecialGoods post请求\n  const api = [].concat(apiLists)[0];\n  const method = 'post';\n  const reqParams = {};\n  // const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nSpecialGoodsRequestPost.defaultProps = {\n  requestCount: 0,\n  reqObject: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n}\n\nconst SpecialGoodsRequestPut = ({ requestCount, reqObject, responseDataHandle, id }) => {\n  // SpecialGoods put请求\n  const api = [].concat(apiLists)[0] + `/${id}`;\n  const method = 'put';\n  const reqParams = {};\n  // const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nSpecialGoodsRequestPut.defaultProps = {\n  requestCount: 0,\n  reqObject: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n  id: 0\n}\n\nconst SpecialGoodsRequestDelete = ({ requestCount, responseDataHandle, id }) => {\n  // SpecialGoods delete请求\n  const api = [].concat(apiLists)[0] + `/${id}`;\n  const method = 'delete';\n  const reqParams = {};\n  const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nSpecialGoodsRequestDelete.defaultProps = {\n  requestCount: 0,\n  responseDataHandle: (respObj) => { console.log(respObj); },\n  id: 0\n}\n\nconst updateSpecialGoods = (goodsId) => {\n  // 更新为今日特价商品\n  return new Promise((resolve, reject) => {\n    let api = [].concat(apiLists)[0] + `/${goodsId}`;\n    let method = 'put';\n    let reqParams = {};\n    let reqObject = {'special_sale': 1};\n    sendAxiosRequest(api, method, reqParams, reqObject)\n      .then((response) => {\n          // console.log('Success request:', response);\n          if (response.code === 1000) {\n            resolve(response);\n          } else {\n            reject(response);\n          }\n      })\n      .catch((err) => {\n        console.log(err);  \n        reject(err);\n      });\n  })\n}\n\nexport {\n  SpecialGoodsRequestGet,\n  SpecialGoodsRequestPost,\n  SpecialGoodsRequestPut,\n  SpecialGoodsRequestDelete,\n  updateSpecialGoods\n};\n","import React, { useRef, useState, useEffect } from 'react';\nimport { Modal, Divider, message } from 'antd';\nimport moment from 'moment';\n\n// import StsUploadFile from '../../upload_files/sts_upload_file';\nimport { StsUploadImagesList } from '../../upload_files/sts_upload_files_list';\nimport { SpecialGoodsRequestPut, SpecialGoodsRequestDelete  } from './special_goods_requests';\nimport { CustomForm } from '../../base_components/form_component';\nimport { GoodsOptModal } from '../../modals/goods_opt';\n\nimport {\n    formKeys,\n    formDisabledKeys,\n    formNotShowKeys,\n    formKeysLabelsObj,\n    formKeySelectComponentsObj,\n    formKeysHandleButtonObj,\n    // formInitialObj,\n    formRulesList,\n    imageKeyNames,\n    maxImagesNum\n} from './special_goods_columns_label_config';\n\n// 编辑 SpecialGoods\n\nconst UpdateSpecialGoods = ({ visible, setVisible, oldObj, reloadListCount, setReloadListCount }) => {\n\n    const specialGoodsImageObj = useRef({});\n\n    const [putRequestCount, setPutRequestCount] = useState(0);\n    const reqObject = useRef({});\n    const putResponseDataHandle = (respObj) => {\n        if (Object.keys(respObj).includes('code') && respObj.code === 1000) {\n            message.success('修改成功');\n            setReloadListCount(reloadListCount + 1);\n            setVisible(0);\n        } else {\n            message.error('网络错误...');\n        }\n    }\n\n    const [deleteRequestCount, setDeleteRequestCount] = useState(0);\n    const deleteSpecialGoods = () => {\n        // 删除当前对象\n        setDeleteRequestCount(deleteRequestCount + 1);\n        setReloadListCount(reloadListCount + 1);\n    };\n\n    // 选择 modal\n    const [optModalState, setOptModalState] = useState(0);\n    const [updateFormObj, setUpdateFormObj] = useState({});\n    const selectGoodsHandle = (goodsObj) => {\n        // 选择商品操作\n        console.log(goodsObj);\n        setUpdateFormObj({\n            goods_id: goodsObj.id,\n        });\n        setOptModalState(0);\n    };\n\n    useEffect(() => {\n        if (visible > 0) {\n            console.log(oldObj);\n            setUpdateFormObj({id: -1});\n            let endTimeStamp = oldObj.end_time ? parseInt(oldObj.end_time) : 0;\n            if (endTimeStamp < 10000000000) {\n                endTimeStamp = parseInt(endTimeStamp * 1000);\n            }\n            const endTimeMoment = moment(endTimeStamp);\n            setUpdateFormObj({ ...oldObj, end_time: endTimeMoment });  // 给表格赋值\n        }\n    }, [visible, oldObj]);\n\n    const specialGoodsImageUploaded = (imagesObj) => {\n        // 轮播图上传后操作\n        specialGoodsImageObj.current = imagesObj;\n        console.log(imagesObj);\n    }\n\n    const onFinish = (values) => {\n        // 提交表单\n        let upObj = { ...values, ...specialGoodsImageObj.current };\n        console.log(upObj);\n        // 时间转时间戳\n        upObj.end_time = parseInt(moment.unix(upObj.end_time).unix() / 1000);  // 时间转时间戳\n        console.log(upObj.end_time);\n        reqObject.current = upObj;\n        setPutRequestCount(putRequestCount + 1);\n    }\n\n    return (\n        <Modal visible={visible === 2}\n            title=\"SpecialGoods\"\n            closable={false}\n            footer={null}\n        >\n            <div style={{width: '100%', height: 'auto', textAlign: 'center'}}>\n                <StsUploadImagesList\n                    maxImagesNum={maxImagesNum}\n                    imageKeyName={imageKeyNames[0]}\n                    oldObj={oldObj}\n                    onChange={specialGoodsImageUploaded}\n                ></StsUploadImagesList>\n            </div>\n            <Divider></Divider>\n\n            <CustomForm\n                columns={formKeys}\n                disabledKeys={formDisabledKeys}\n                notShowKeys={formNotShowKeys}\n                formKeyLabelObj={formKeysLabelsObj}\n                formKeySelectComponentsObj={formKeySelectComponentsObj}\n                formKeysItemButtonObj={formKeysHandleButtonObj(setOptModalState)}\n                onFinish={onFinish}\n                cancelHandle={() => setVisible(0)}\n                showDeleteButton={true}\n                deleteHandle={deleteSpecialGoods}\n                updateFormObj={updateFormObj}\n                rulesObj={formRulesList}\n            ></CustomForm>\n\n            <GoodsOptModal\n                modalState={optModalState === 1}\n                setModalState={setOptModalState}\n                selectHandle={selectGoodsHandle}\n            ></GoodsOptModal>\n\n            <SpecialGoodsRequestPut\n                requestCount={putRequestCount}\n                reqObject={reqObject.current}\n                responseDataHandle={putResponseDataHandle}\n                id={oldObj.id}></SpecialGoodsRequestPut>\n            <SpecialGoodsRequestDelete\n                requestCount={deleteRequestCount}\n                responseDataHandle={(respObj) => setVisible(0)}\n                id={oldObj.id}></SpecialGoodsRequestDelete>\n        </Modal>\n    )\n}\n\nUpdateSpecialGoods.defaultProps = {\n    visible: false,\n    setVisible: (val) => console.log(val),\n    oldObj: {}\n}\n\nexport default UpdateSpecialGoods;\n","import React, { useState, useEffect, useRef } from 'react';\n\nimport { CustomList } from '../../base_components/lists/custom_list';\nimport { SpecialGoodsRequestGet } from './special_goods_requests';\nimport UpdateSpecialGoods from './update_special_goods';\nimport { renderItem, judgeHasMore } from './special_goods_columns_label_config';\nimport { LoadMoreButton } from '../../base_components/load_more_button_conpoment';\n\n// 列表编辑 页面\n\nconst SpecialGoodsList = ({ reloadListCount, setReloadListCount, requestParams, selectButtonOnClick }) => {\n\n    const [visible, setVisible] = useState(0);\n\n    const [hasMoreState, setHasMoreState] = useState(true);\n    const [loading, setLoading] = useState(false);\n    // 设置为true 开始request请求, 解决useState异步\n    const [requesting, setRequesting] = useState(false);\n    const reqParams = useRef({ page: 0 });\n\n    const [specialGoodsData, setSpecialGoodsData] = useState([]);\n    const [specialGoodsRequestGetCount, setSpecialGoodsRequestGetCount] = useState(0);\n\n    const [selectedObj, setSelectedObj] = useState({});\n\n    useEffect(() => {\n        if (hasMoreState && !loading && requesting) {\n            // 使用useEffect 触发request 解决 useState 异步\n            loadMore();\n            setRequesting(false);\n        }\n    }, [requesting, hasMoreState, loading])\n\n    useEffect(() => {\n        // 加载、更新或创建数据后 重新读取列表\n        reqParams.current = { ...requestParams };\n        reloadListsHandle();\n    }, [reloadListCount]);\n\n    const loadMore = () => {\n        // 读取更多列表\n        if (hasMoreState && !loading) {\n            setLoading(true);\n            setHasMoreState(false);\n            const current_page = Number.isInteger(reqParams.current.page) ? reqParams.current.page + 1 : 1;\n            reqParams.current = { ...reqParams.current, page: current_page };\n            console.log(reqParams.current);\n            setSpecialGoodsRequestGetCount(specialGoodsRequestGetCount + 1);\n        } else {\n            console.log('Error state: hasMore is ', hasMoreState, ', loading is ', loading);\n        }\n    };\n\n    const reloadListsHandle = () => {\n        // 重新读取数据\n        reqParams.current = { ...reqParams.current, page: 0 };\n        // console.log(reqParams.current);\n        setSpecialGoodsData([]);\n        setHasMoreState(true);\n        setLoading(false);\n        setRequesting(true);    // useEffect 触发request请求，解决useState异步\n    };\n\n    const specialGoodsGetResponse = (resp) => {\n        // console.log('resp process...');\n        setLoading(false);\n        if (Object.keys(resp).includes('code')\n            && resp.code === 1000\n            && Object.keys(resp).includes('results')\n        ) {\n            setSpecialGoodsData(specialGoodsData.concat(resp.results));\n            setHasMoreState(judgeHasMore(resp));   // 判断是否还有更多\n        } else {\n            console.log('Error: get data...');\n        }\n    };\n\n    return (\n        <div>\n            <SpecialGoodsRequestGet requestCount={specialGoodsRequestGetCount}\n                reqParams={reqParams.current}\n                responseDataHandle={specialGoodsGetResponse}></SpecialGoodsRequestGet>\n            <CustomList\n                header=\"SpecialGoods List\"\n                listData={specialGoodsData}\n                visible={visible}\n                setVisible={setVisible}\n                randerItem={renderItem}\n                setSelectedItem={setSelectedObj}\n                selectButtonOnClick={selectButtonOnClick}\n            ></CustomList>\n\n            <UpdateSpecialGoods\n                visible={visible}\n                setVisible={setVisible}\n                oldObj={selectedObj}\n                reloadListCount={reloadListCount}\n                setReloadListCount={setReloadListCount}\n            ></UpdateSpecialGoods>\n\n            <LoadMoreButton hasMore={hasMoreState} onClick={loadMore}></LoadMoreButton>\n        </div>\n    );\n}\n\nSpecialGoodsList.defaultProps = {\n    reloadListCount: 1,\n    setReloadListCount: (addedNum) => { console.log(addedNum); },\n    requestParams: { page: 0 },\n    selectButtonOnClick: null,\n}\n\nexport default SpecialGoodsList;\n","import React, { useState, useRef } from 'react';\n// import { navigate, Link } from 'gatsby';\nimport { Button, Row, Col, Space, Tooltip, message } from 'antd';\nimport { ReloadOutlined, SearchOutlined, LeftOutlined } from '@ant-design/icons';\n\n// import CreateSpecialGoods from './create_special_goods';\n// import SpecialGoodsQueryDrawerForm from './special_goods_query_form';\nimport SpecialGoodsList from './special_goods_list';\nimport { GoodsOptModal } from '../../modals/goods_opt';\nimport { SpecialGoodsRequestPut, updateSpecialGoods } from './special_goods_requests';\n// SpecialGoods 入口组件\n\nconst SpecialGoodsComponent = ({ selectButtonOnClick = null }) => {\n  const reqParams = useRef({ page: 0 });\n\n  const [reloadListCount, setReloadListCount] = useState(1);\n\n  // const [drawerVisible, setDrawerVisible] = useState(false);\n  const [modalVisible, setModalVisible] = useState(0);\n\n  const selectSpecialGoodsHandle = (goodsObj) => {\n    // 设置商品为今日特价商品\n    setModalVisible(0);\n    // console.log(goodsObj.id);\n    updateSpecialGoods(goodsObj.id).then(resp => {\n      console.log(resp);\n      message.success(`设置 ${resp.name} 为今日特价商品成功!`);\n      setReloadListCount(reloadListCount + 1);    // 重新读取特价商品列表\n    }).catch(err => {\n      console.log(err);\n      message.error(`设置今日特价商品(ID=${goodsObj.id})失败...`)\n    })\n  }\n\n  const initReloadList = () => {\n    // 刷新列表, 删除所有查询条件\n    reqParams.current = { page: 0 };\n    setReloadListCount(reloadListCount + 1);\n  }\n\n  return (\n    <div>\n      <Row>\n        <Col span={14}>\n          <Space>\n            <h4>SpecialGoods</h4>\n            <Tooltip title=\"刷新\">\n              <Button onClick={initReloadList} shape=\"circle\" icon={<ReloadOutlined />}></Button>\n            </Tooltip>\n          </Space>\n        </Col>\n        <Col span={10}>\n          <div style={{ width: '100%', height: 'auto' }}>\n            <Button style={{ float: 'right' }} type=\"link\" onClick={() => setModalVisible(9)}>增加今日特价商品</Button>\n          </div>\n        </Col>\n      </Row>\n\n      <SpecialGoodsList\n        reloadListCount={reloadListCount}\n        setReloadListCount={setReloadListCount}\n        requestParams={reqParams.current}\n        selectButtonOnClick={selectButtonOnClick}\n      ></SpecialGoodsList>\n\n      <GoodsOptModal\n        visible={modalVisible}\n        setVisible={setModalVisible}\n        visibleNum={9}\n        selectHandle={selectSpecialGoodsHandle}\n      ></GoodsOptModal>\n    </div>\n  )\n};\n\nexport default SpecialGoodsComponent;\n","import React from \"react\";\n\nimport SiteLayout from '../components/site_layout';\nimport SEO from \"../components/seo\";\n\nimport SpecialGoodsComponent from '../components/wx_store/special_goods';\n\nconst SpecialGoodsManagePage = () => (\n  <SiteLayout>\n    <SEO title=\"WX SpecialGoods\" />\n    <SpecialGoodsComponent></SpecialGoodsComponent>\n  </SiteLayout>\n)\n\nexport default SpecialGoodsManagePage;\n"],"names":["formKeys","formDisabledKeys","formNotShowKeys","formKeysLabelsObj","formKeySelectComponentsObj","special_sale","options","value","label","formKeysHandleButtonObj","setOptModalState","goods_id","buttonTips","clickMethod","formRulesList","required","message","imageKeyNames","apiLists","actionButtons","item","setVisible","setSelectedObj","selectButtonOnClick","btnList","onClick","type","push","renderItem","visible","textsContent","id","updateItemObj","actions","img","home_pic1_url","avatar","title","name","content","customRanderItem","SpecialGoodsRequestGet","requestCount","reqParams","responseDataHandle","api","method","reqObject","defaultProps","respObj","console","log","SpecialGoodsRequestPut","concat","SpecialGoodsRequestDelete","UpdateSpecialGoods","oldObj","reloadListCount","setReloadListCount","specialGoodsImageObj","useRef","useState","putRequestCount","setPutRequestCount","deleteRequestCount","setDeleteRequestCount","optModalState","updateFormObj","setUpdateFormObj","useEffect","endTimeStamp","end_time","parseInt","endTimeMoment","moment","closable","footer","style","width","height","textAlign","maxImagesNum","imageKeyName","onChange","imagesObj","current","columns","disabledKeys","notShowKeys","formKeyLabelObj","formKeysItemButtonObj","onFinish","values","upObj","unix","cancelHandle","showDeleteButton","deleteHandle","rulesObj","modalState","setModalState","selectHandle","goodsObj","Object","keys","includes","code","val","SpecialGoodsList","requestParams","hasMoreState","setHasMoreState","loading","setLoading","requesting","setRequesting","page","specialGoodsData","setSpecialGoodsData","specialGoodsRequestGetCount","setSpecialGoodsRequestGetCount","selectedObj","loadMore","reloadListsHandle","current_page","Number","isInteger","resp","results","next","length","judgeHasMore","header","listData","randerItem","setSelectedItem","hasMore","addedNum","modalVisible","setModalVisible","span","shape","icon","ReloadOutlined","float","visibleNum","goodsId","Promise","resolve","reject","sendAxiosRequest","then","response","catch","err"],"sourceRoot":""}