{"version":3,"sources":["webpack:///./node_modules/antd/node_modules/rc-checkbox/es/index.js","webpack:///./src/components/base_components/page_is_loading.js","webpack:///./node_modules/antd/es/_util/ref.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/RedoOutlined.js","webpack:///./node_modules/@ant-design/icons/es/icons/RedoOutlined.js","webpack:///./src/components/base_components/lodop/load_printer.js","webpack:///./src/components/base_components/lodop/printer_requests.jsx","webpack:///./src/components/base_components/lodop/select_printer_component.jsx","webpack:///./src/components/modals/customer_opt.jsx","webpack:///./node_modules/antd/es/radio/context.js","webpack:///./node_modules/antd/es/radio/radio.js","webpack:///./node_modules/antd/node_modules/rc-util/es/hooks/useMergedState.js","webpack:///./node_modules/antd/es/radio/group.js","webpack:///./node_modules/antd/es/radio/radioButton.js","webpack:///./node_modules/antd/es/radio/index.js","webpack:///./src/components/base_components/diopter_component/select_diopter.jsx","webpack:///./src/components/modals/diopters_opt.jsx","webpack:///./src/components/purchase_records/purchase_records_columns_label_config.jsx","webpack:///./src/components/purchase_records/purchase_records_requests.jsx","webpack:///./src/components/purchase_records/create_purchase_records.jsx","webpack:///./src/components/purchase_records/purchase_records_query_form.jsx","webpack:///./src/components/purchase_records/update_purchase_records.jsx","webpack:///./src/components/deliver/deliver_area_select.jsx","webpack:///./src/components/deliver/custom_select_requests.jsx","webpack:///./src/components/deliver/deliver_columns_label_config.jsx","webpack:///./src/components/deliver/deliver_requests.jsx","webpack:///./src/components/deliver/update_deliver.jsx","webpack:///./src/components/deliver/index.jsx","webpack:///./src/components/purchase_records/purchase_records_list.jsx","webpack:///./src/components/purchase_records/purchase_records_query_params_display.jsx","webpack:///./src/components/purchase_records/index.jsx","webpack:///./src/pages/purchaserecords.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","Checkbox","_Component","_super","props","_this","handleChange","_this$props","disabled","onChange","setState","checked","stopPropagation","preventDefault","nativeEvent","saveInput","node","input","defaultChecked","state","value","focus","blur","_classNames","_this$props2","prefixCls","className","style","name","id","type","readOnly","tabIndex","onClick","onFocus","onBlur","autoFocus","required","others","globalProps","reduce","prev","substr","classString","concat","createElement","ref","defaultProps","PageIsLoading","spinning","useState","showLoading","setShowLoading","divStyle","display","useEffect","size","fillRef","current","composeRef","_len","refs","Array","_key","AntdIcon","assign","icon","displayName","LODOP","loadPrinter","Promise","resolve","reject","hasComplete","document","readyState","getLodop","printerNum","GET_PRINTER_COUNT","printerArr","index","GET_PRINTER_NAME","message","error","apiLists","Option","Select","SelectPrinterComponent","purchaseRecordsList","hasAllPrintCount","setHasAllPrintCount","selectedPrinterIndex","setSelectedPrinterIndex","selectedPrinterName","useRef","printers","setPrinters","notPrintRecords","setNotPrintRecords","loadPrintersListHandle","appendMetaContentSecurityPolicy","then","results","a","printersOptions","console","log","label","catch","err","info","pageName","currentPageName","customConfig","pagesName","purchaseRecords","api","sendAxiosRequest","respObj","includes","printersList","element","page_name","printer_name","defaultPrinter","selectedPrinterHandle","printerName","printerNameQueryIndex","notPrintRecordsList","has_print","computeNotPrintRecords","selectedIndex","updateHasPrint","hasPrintRecordsList","width","height","margin","placeholder","minWidth","maxWidth","map","obj","reqObject","saveDefaultPrinter","printMultiplePurchaseRecordsHandle","title","shape","val","CustomerOptModal","modalState","setModalState","selectCustomerHandle","clickCreatedCustomerHandle","visible","closable","footer","selectButtonOnClick","booleanValue","customerObj","createdCustomerResponseObj","RadioGroupContext","RadioGroupContextProvider","Provider","__rest","s","t","p","hasOwnProperty","indexOf","propertyIsEnumerable","context","_React$useContext","getPrefixCls","direction","innerRef","mergedRef","devWarning","customizePrefixCls","children","restProps","radioProps","wrapperClassString","onMouseEnter","onMouseLeave","undefined","Radio","_slicedToArray","arr","isArray","_arrayWithHoles","Symbol","iterator","_arr","_n","_d","_e","_s","_i","next","done","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","slice","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","len","arr2","RadioGroup","SizeContext","_useMergedState","defaultStateValue","option","_ref","defaultValue","postState","_React$useState2","innerValue","setInnerValue","mergedValue","firstRenderRef","newValue","_useMergedState2","setValue","ev","lastValue","_props$className","options","optionType","buttonStyle","customizeSize","groupPrefixCls","childrenToRender","optionsPrefixCls","mergedSize","renderGroup","radioGroupContext","Button","Group","formSelectStyle","diopterSignsObj","1","2","3","4","splitDiopters","diopterStr","sph","cyl","axi","add","delSpaceDiopter","replace","splitAddArr","split","cylAndAxiArr","parseInt","judgeDiopterCreaterThanZero","diopter","Math","abs","parseFloat","judgeLackArguments","dioptersValues","lackObj","lackPd","lackAxiR","lackAxiL","pd","rAxi","axiR","lAxi","axiL","cylR","isNaN","cylL","DioptersSelectComponent","selectType","positiveNegative","selectOptions","maxDiopters","diopters","pNSign","toFixed","dioptersList","item","lackArgumentsTips","lackArgumentsTitles","DoubleEyeSelectDiopter","sourceDiopterObj","selectedHandle","cancelHandle","form","Form","useForm","lackArgumentsVisible","setLackArgumentsVisible","selectedSign","setSelectedSign","sphSign","setSphSign","cylSign","setCylSign","warnTip","setWarnTip","warnTitle","setWarnTitle","hasAddItem","setHasAddItem","submitObj","diopter_l","diopter_r","pupillary_distance","dioptersObjR","dioptersObjL","initObj","sphR","sphL","setFieldsValue","addItem","Item","showAddItemButtonItem","selectedDiopterSign","onFinish","values","rDiopterStr","lDiopterStr","LackArgumentsObj","lackArgumentsObj","tipsNum","formCommonStyle","layoutForm","min","max","tailFormItemLayout","htmlType","onOk","onCancel","okText","cancelText","selectedDiopterObj","DioptersOptModal","selectHandle","RangePicker","DatePicker","formKeys","formDisabledKeys","formNotShowKeys","formKeysLabelsObj","SelectRangePicker","SelectEndTime","showTime","format","formKeySelectComponentsObj","sale_platform","order_state","pay_platform","range_add_time","add_time_start","add_time_end","formKeysHandleButtonObj","setOptCustomerModalState","customer_name","buttonTips","clickMethod","group_purchase_commander_name","formGetRequestParamsKeys","formInitialObj","imageKeyNames","PurchaseRecordsRequestGet","requestCount","reqParams","responseDataHandle","method","PurchaseRecordsRequestPost","PurchaseRecordsRequestPut","PurchaseRecordsRequestDelete","CreatePurchaseRecords","setVisible","reloadListCount","setReloadListCount","purchaseRecordsImageObj","oldObj","createCount","dioptersObj","setDioptersObj","oldFormObj","setOldFormObj","initFormCount","setInitFormCount","postRequestCount","setPostRequestCount","customerOptModalState","setCustomerOptModalState","closeModal","textAlign","maxImagesNum","imageKeyName","imagesObj","columns","disabledKeys","notShowKeys","formKeyLabelObj","formKeysItemButtonObj","upObj","customer_id","showDeleteButton","updateFormObj","code","cusotomerObj","showName","wx_info","wx_nickname","booleanVal","queryFormDisabledKeys","PurchaseRecordsQueryDrawerForm","queryHandle","choseCustomerId","setUpdateFormObj","closeDrawer","placement","onClose","bodyStyle","paddingBottom","formObj","copyFormObj","queryParamsObj","queryId","rangeDates","setTimeout","UpdatePurchaseRecords","pageLoading","setPageLoading","putRequestCount","setPutRequestCount","deleteRequestCount","setDeleteRequestCount","initImgAndForm","hasPrintNum","customerShowName","customer_info","oldPurchaseRecord","has_print_boolean","deleteHandle","warn","success","ChinaAreaSelect","initAreaList","selectedAreaHandle","selectedArea","level","data","pcaa","defaultArea","initAreaObj","SelectExpressCompany","setSelectOptions","resList","updateOptions","express_company_code","express_company_name","formRulesList","DeliverRequestPut","DeliverRequestDelete","UpdateDeliver","purchaseRecordId","customerId","setOldDeliverHomeImages","deliverHomeImgs","imgKey","currentCosNameKey","currentUrlKey","currentCosName","currentUrl","cosNameKey","cosName","urlKey","url","rulesObj","DeliverComponent","page","judgeHasMore","resp","PurchaseRecordsList","requestParams","purchaseRecordsChange","printerIndex","hasMore","hasMoreState","setHasMoreState","loading","setLoading","purchaseRecordsData","setPurchaseRecordsData","purchaseRecordsRequestGetCount","setPurchaseRecordsRequestGetCount","prqGetCount","setPrqGetCount","requesting","setRequesting","updatePurchaseRecordsVisible","setUpdatePurchaseRecordsVisible","selectedObj","setSelectedObj","copyList","reloadListsHandle","loadMore","current_page","Number","isInteger","addCount","deliverComponent","infoBottonTips","infoBottonClick","purchaseRecordObj","selObj","successPrintCurrentRecordHandle","hasPrintRecordObj","copyRecordsList","updatedList","addedNum","PurchaseRecordsQueryParams","paramsObj","displayQueryFactorStr","setDisplayQueryFactorStr","displayStr","retDisplayStr","currentFactor","padding","PurchaseRecordsComponent","setPrinterIndex","drawerVisible","setDrawerVisible","createPurchaseRecordsVisible","setCreatePurchaseRecordsVisible","downloadAndSaveExpressList","span","setPurchaseRecordsList","ReloadOutlined","SearchOutlined","float","currentRequestParams","records","PurchaseRecordsPage"],"mappings":"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","file":"component---src-pages-purchaserecords-js-4849e39f4b340024bde0.js","sourcesContent":["import \"core-js/modules/es6.array.reduce\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n} // eslint-disable-next-line import/no-extraneous-dependencies\n\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\n\nvar Checkbox = /*#__PURE__*/function (_Component) {\n  _inherits(Checkbox, _Component);\n\n  var _super = _createSuper(Checkbox);\n\n  function Checkbox(props) {\n    var _this;\n\n    _classCallCheck(this, Checkbox);\n\n    _this = _super.call(this, props);\n\n    _this.handleChange = function (e) {\n      var _this$props = _this.props,\n          disabled = _this$props.disabled,\n          onChange = _this$props.onChange;\n\n      if (disabled) {\n        return;\n      }\n\n      if (!('checked' in _this.props)) {\n        _this.setState({\n          checked: e.target.checked\n        });\n      }\n\n      if (onChange) {\n        onChange({\n          target: _objectSpread(_objectSpread({}, _this.props), {}, {\n            checked: e.target.checked\n          }),\n          stopPropagation: function stopPropagation() {\n            e.stopPropagation();\n          },\n          preventDefault: function preventDefault() {\n            e.preventDefault();\n          },\n          nativeEvent: e.nativeEvent\n        });\n      }\n    };\n\n    _this.saveInput = function (node) {\n      _this.input = node;\n    };\n\n    var checked = 'checked' in props ? props.checked : props.defaultChecked;\n    _this.state = {\n      checked: checked\n    };\n    return _this;\n  }\n\n  _createClass(Checkbox, [{\n    key: \"focus\",\n    value: function focus() {\n      this.input.focus();\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.input.blur();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classNames;\n\n      var _this$props2 = this.props,\n          prefixCls = _this$props2.prefixCls,\n          className = _this$props2.className,\n          style = _this$props2.style,\n          name = _this$props2.name,\n          id = _this$props2.id,\n          type = _this$props2.type,\n          disabled = _this$props2.disabled,\n          readOnly = _this$props2.readOnly,\n          tabIndex = _this$props2.tabIndex,\n          onClick = _this$props2.onClick,\n          onFocus = _this$props2.onFocus,\n          onBlur = _this$props2.onBlur,\n          autoFocus = _this$props2.autoFocus,\n          value = _this$props2.value,\n          required = _this$props2.required,\n          others = _objectWithoutProperties(_this$props2, [\"prefixCls\", \"className\", \"style\", \"name\", \"id\", \"type\", \"disabled\", \"readOnly\", \"tabIndex\", \"onClick\", \"onFocus\", \"onBlur\", \"autoFocus\", \"value\", \"required\"]);\n\n      var globalProps = Object.keys(others).reduce(function (prev, key) {\n        if (key.substr(0, 5) === 'aria-' || key.substr(0, 5) === 'data-' || key === 'role') {\n          // eslint-disable-next-line no-param-reassign\n          prev[key] = others[key];\n        }\n\n        return prev;\n      }, {});\n      var checked = this.state.checked;\n      var classString = classNames(prefixCls, className, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-checked\"), checked), _defineProperty(_classNames, \"\".concat(prefixCls, \"-disabled\"), disabled), _classNames));\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: classString,\n        style: style\n      }, /*#__PURE__*/React.createElement(\"input\", _extends({\n        name: name,\n        id: id,\n        type: type,\n        required: required,\n        readOnly: readOnly,\n        disabled: disabled,\n        tabIndex: tabIndex,\n        className: \"\".concat(prefixCls, \"-input\"),\n        checked: !!checked,\n        onClick: onClick,\n        onFocus: onFocus,\n        onBlur: onBlur,\n        onChange: this.handleChange,\n        autoFocus: autoFocus,\n        ref: this.saveInput,\n        value: value\n      }, globalProps)), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-inner\")\n      }));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      if ('checked' in props) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          checked: props.checked\n        });\n      }\n\n      return null;\n    }\n  }]);\n\n  return Checkbox;\n}(Component);\n\nCheckbox.defaultProps = {\n  prefixCls: 'rc-checkbox',\n  className: '',\n  style: {},\n  type: 'checkbox',\n  defaultChecked: false,\n  onFocus: function onFocus() {},\n  onBlur: function onBlur() {},\n  onChange: function onChange() {}\n};\nexport default Checkbox;","import React, { useState, useEffect } from 'react';\nimport { Spin } from 'antd';\n\nimport './components_css/page_is_loading.css';\n\nconst PageIsLoading = ({ spinning }) => {\n  // 全局读取中\n  const [showLoading, setShowLoading] = useState(false);\n\n  const divStyle = {\n    display: showLoading ? 'block' : 'none',\n  }\n\n  useEffect(() => {\n    // spinning 更新后 更新divStyle\n    setShowLoading(spinning);\n  }, [spinning]);\n\n  return (\n    <div className=\"overall-loading\" style={divStyle}>\n      <Spin spinning={spinning} size=\"large\" />\n    </div>\n  )\n};\n\nPageIsLoading.defaultProps = {\n  spinning: false\n}\n\nexport default PageIsLoading;","import \"core-js/modules/es6.array.for-each\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\nexport function fillRef(ref, node) {\n  if (typeof ref === 'function') {\n    ref(node);\n  } else if (_typeof(ref) === 'object' && ref && 'current' in ref) {\n    ref.current = node;\n  }\n}\nexport function composeRef() {\n  for (var _len = arguments.length, refs = new Array(_len), _key = 0; _key < _len; _key++) {\n    refs[_key] = arguments[_key];\n  }\n\n  return function (node) {\n    refs.forEach(function (ref) {\n      fillRef(ref, node);\n    });\n  };\n}","// This icon file is generated automatically.\nvar RedoOutlined = {\n  \"icon\": {\n    \"tag\": \"svg\",\n    \"attrs\": {\n      \"viewBox\": \"64 64 896 896\",\n      \"focusable\": \"false\"\n    },\n    \"children\": [{\n      \"tag\": \"path\",\n      \"attrs\": {\n        \"d\": \"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z\"\n      }\n    }]\n  },\n  \"name\": \"redo\",\n  \"theme\": \"outlined\"\n};\nexport default RedoOutlined;","import \"core-js/modules/es6.object.assign\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport RedoOutlinedSvg from \"@ant-design/icons-svg/es/asn/RedoOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar RedoOutlined = function RedoOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: RedoOutlinedSvg\n  }));\n};\n\nRedoOutlined.displayName = 'RedoOutlined';\nexport default React.forwardRef(RedoOutlined);","import { message } from 'antd';\nimport getLodop from './LodopFuncs';\n\nlet LODOP;\n\nconst loadPrinter = () => {\n    return new Promise((resolve, reject) => {\n        // 读取打印机名称列表 返回打印机名称Array window.onload = function () {}等待页面加载完成\n        let hasComplete = false;    // 变量,页面是否已经加载完成\n        if (typeof document !== 'undefined') {\n            hasComplete = document.readyState === 'complete';\n        }\n        if (hasComplete) {\n            LODOP = getLodop();\n            if (!LODOP) {\n                message.error('连接打印服务器失败...');\n                reject('LODOP server connect error...');\n            }else {\n                const printerNum = LODOP.GET_PRINTER_COUNT();\n                const printerArr = [];\n                for (let index = 0; index < printerNum; index++) {\n                    printerArr.push(LODOP.GET_PRINTER_NAME(index));\n                }\n                // console.log('SSSSS');\n                resolve(printerArr);\n            }\n        } else {\n            message.error('请等待页面加载完成, 再刷新打印机...');\n            reject('LODOP server connecting...');\n        }\n    });\n}\n\nconst hasPrinter = (printerName) => {\n    // 判断打印机是否存在\n    return new Promise((resolve, reject) => {\n        loadPrinter.then(prints => {\n            resolve(prints.includes(printerName));\n        }).catch(err => {\n            console.log(err);\n            reject(false);\n        })\n    });\n};\n\nexport {\n    loadPrinter,\n    hasPrinter\n};","import React from 'react';\nimport AxiosRequest from '../../apis';\nimport { sendAxiosRequest } from '../../apis/sendRequest';\n\nconst  apiLists = ['printer-admin/v1/defaultprinter', ];\n\n// 打印机 request 请求\n\nconst PrinterRequestGetComponent = ({ requestCount, reqParams, responseDataHandle }) => {\n    // 打印机 Get请求 获取默认打印机列表\n    const api = [].concat(apiLists)[0];\n    const method = 'get';\n    const reqObject = {};\n  \n    return (\n      <AxiosRequest\n        responseDataHandle={responseDataHandle} api={api} method={method}\n        reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n      ></AxiosRequest>\n    );\n};\nPrinterRequestGetComponent.defaultProps = {\n    requestCount: 0,\n    reqParams: {},\n    responseDataHandle: (respObj) => { console.log(respObj); },\n};\n\nconst printerRequestPost = (reqObject) => {\n    // 新建或更新默认打印机 Post请求 reqObject = {\"page_name\": '页面名称', \"printer_name\": \"打印机名称\"}\n    return new Promise(function (resolve, reject) {\n        const api = [].concat(apiLists)[0];\n        const method = 'post';\n        const reqParams = {};\n        // const reqObject = {};\n        sendAxiosRequest(api, method, reqParams, reqObject)\n            .then(respObj => {\n                resolve(respObj);\n            })\n            .catch(err => {\n                console.log(err);\n                reject(err);\n            });\n    });\n};\n\nconst downloadDefaultPrinterName = (pageName) => {\n    return new Promise((resolve, reject) => {\n        const api = [].concat(apiLists)[0];\n        const method = 'get';\n        const reqParams = {};\n        const reqObject = {};\n        sendAxiosRequest(api, method, reqParams, reqObject).then(respObj => {\n            if (Object.keys(respObj).includes('results') && respObj.results.length > 0) {\n                const printersList = respObj.results;\n                for (let index = 0; index < printersList.length; index++) {\n                    const element = printersList[index];\n                    if (element.page_name === pageName) {\n                        resolve(element.printer_name);\n                        return;\n                    }\n                }\n                reject('None default printer...');\n            } else {\n                reject('Error network...');\n            }\n        }).catch(err => {\n            console.log(err);\n            reject(err);\n        });\n    });\n};\n\nexport {\n    PrinterRequestGetComponent,\n    downloadDefaultPrinterName,\n    printerRequestPost,\n};\n","import React, { useEffect, useRef, useState } from 'react';\nimport { message, Select, Button, Space, Tooltip } from 'antd';\nimport { RedoOutlined } from '@ant-design/icons';\n\nimport { loadPrinter } from './load_printer';\n// import { CustomSelect } from '../select_component';\nimport customConfig from '../../../custom_config';\nimport { appendMetaContentSecurityPolicy } from '../../../assets/common_funcs/meta_handle.js';\n\nimport { downloadDefaultPrinterName, printerRequestPost } from './printer_requests';\nimport { printMultiplePurchaseRecordsHandle } from '../print_purchase_record/purchase_record_print';\nconst { Option } = Select\n\nconst printerNameQueryIndex = (printersList, printerName) => {\n    // 打印机名称查找打印机序号\n    for (let index = 0; index < printersList.length; index++) {\n        const element = printersList[index];\n        if (element.label === printerName) {\n            return element.value;\n        }\n    }\n    return null\n};\n\nconst computeNotPrintRecords = purchaseRecordsList => {\n    // 返回未打印订单\n    const notPrintRecordsList = [];\n    for (let index = 0; index < purchaseRecordsList.length; index++) {\n        const element = purchaseRecordsList[index];\n        // console.log(element.has_print);\n        if (!element.has_print) {\n            notPrintRecordsList.push(element);\n        }\n    }\n    console.log(notPrintRecordsList);\n    return notPrintRecordsList;\n}\n\n// 选择打印机组件, 批量打印未打印订单\nconst SelectPrinterComponent = ({ onChange, purchaseRecordsList, hasAllPrintCount, setHasAllPrintCount }) => {\n    const [selectedPrinterIndex, setSelectedPrinterIndex] = useState(null);\n    const selectedPrinterName = useRef('');\n    const [printers, setPrinters] = useState([]);\n\n    // 未打印订单\n    const [notPrintRecords, setNotPrintRecords] = useState([]);\n\n    // default printer\n    // const [defaultPrinterName, setDefaultPrinterName] = useState('');\n\n    const loadPrintersListHandle = () => {\n        // 获取打印机列表\n        // 页面中加入 meta 标签, 解决 HTTPS页面里动态的引入HTTP资源，被直接block掉\n        appendMetaContentSecurityPolicy();\n        loadPrinter().then(async results => {\n            let printersOptions = [];\n            console.log(typeof results);\n            for (let index = 0; index < results.length; index++) {\n                printersOptions.push({\n                    label: results[index],\n                    value: index\n                });\n            }\n            // console.log(printersOptions);\n            setPrinters(printersOptions);\n            // console.log(printersOptions);\n        }).catch(err => {\n            console.log(err);\n            setPrinters([]);\n            // message.error('获取打印列表失败...');\n        });\n    }\n\n    useEffect(() => {\n        // 获取打印机列表\n        if (typeof document !== 'undefined' && document.readyState === 'complete') {\n            loadPrintersListHandle();\n        }else {\n            message.info('请网页加载完成后刷新打印机!!!');\n        }\n    }, []);\n\n    useEffect(() => {\n        // 打印机列表改变，更新打印机为默认打印机\n        const currentPageName = customConfig.pagesName.purchaseRecords;\n        downloadDefaultPrinterName(currentPageName).then(defaultPrinter => {\n            if (defaultPrinter && printers.length > 0) {\n                selectedPrinterHandle(printerNameQueryIndex(printers, defaultPrinter));\n            }\n        }).catch(err => console.log(err));\n    }, [printers]);\n\n    useEffect(() => {\n        // 计算未打印订单\n        setNotPrintRecords(computeNotPrintRecords(purchaseRecordsList));\n    }, [purchaseRecordsList]);\n\n    const selectedPrinterHandle = (selectedIndex) => {\n        // console.log(printers[selectedIndex]);\n        setSelectedPrinterIndex(selectedIndex);\n        if (printers.length > selectedIndex\n            && printers[selectedIndex] instanceof Object\n            && Object.keys(printers[selectedIndex]).includes('label')\n        ) {\n            selectedPrinterName.current = printers[selectedIndex].label;\n        }\n        onChange(selectedIndex);\n    }\n\n    const updateHasPrint = hasPrintRecordsList => {\n        // 客户端更新订单列表为已打印\n        setHasAllPrintCount(hasAllPrintCount + 1);\n    }\n\n    const printNotPrintRecords = () => {\n        // 批量打印未打印订单\n        const saveDefaultPrinter = {\n            \"page_name\": customConfig.pagesName.purchaseRecords,\n            \"printer_name\": selectedPrinterName.current\n        }\n        // console.log(saveDefaultPrinter);\n        printerRequestPost(saveDefaultPrinter).then(result => {\n            // 先保存当前打印机是默认打印机\n            console.log(result);\n        }).catch(err => {\n            console.log(err);\n        });\n        // console.log(notPrintRecords);\n        printMultiplePurchaseRecordsHandle(notPrintRecords, selectedPrinterIndex, updateHasPrint);\n    }\n\n    return (\n        <div style={{ width: '100%', height: 'auto', margin: '10px 2px' }}>\n            {/* <CustomSelect options={printers} onChange={selectedPrinterHandle} value={selectedPrinterIndex}></CustomSelect> */}\n            <Space>\n                <Select\n                    placeholder=\"请选择打印机\"\n                    onChange={selectedPrinterHandle}\n                    value={selectedPrinterIndex}\n                    style={{ minWidth: 120, maxWidth: 220 }}\n                >\n                    {printers.map((obj, i) => {\n                        return <Option key={i.toString()} value={obj.value}>{obj.label}</Option>\n                    })}\n                </Select>\n                <Button disabled={notPrintRecords.length < 1} onClick={printNotPrintRecords} type=\"primary\">打印(未打印)</Button>\n                <Tooltip title=\"刷新打印机\">\n                    <Button shape=\"circle\" icon={<RedoOutlined />} onClick={loadPrintersListHandle} />\n                </Tooltip>\n            </Space>\n        </div>\n    )\n}\nSelectPrinterComponent.defaultProps = {\n    onChange: val => console.log(val),\n    purchaseRecordsList: [],    // 购买订单列表，打印未打印订单用\n    hasAllPrintCount: 0,\n    setHasAllPrintCount: val => console.log(val),\n}\n\nexport { SelectPrinterComponent };\n","import React from 'react';\nimport { Button, Modal } from 'antd';\n// import CustomerList from '../customer_list';\nimport CustomersComponent from '../customers';\n\n// 选择顾客模态框\n\nconst CustomerOptModal = ({ modalState, setModalState, selectCustomerHandle, clickCreatedCustomerHandle }) => {\n    // 选择顾客 modal\n    return (\n        <>\n            <Modal\n                visible={modalState}\n                title=\"选择顾客\"\n                closable={false}\n                footer={[\n                    <Button key=\"back\" onClick={() => { setModalState(false); }}>取消</Button>\n                ]}\n            // footer={null}\n            >\n                {/* <CustomerList\n                    selectCustomerHandle={selectCustomerHandle}\n                    clickCreatedCustomerHandle={clickCreatedCustomerHandle}\n                ></CustomerList> */}\n                <CustomersComponent selectButtonOnClick={selectCustomerHandle}></CustomersComponent>\n            </Modal>\n        </>\n    );\n};\nCustomerOptModal.defaultProps = {\n    modalState: false,\n    setModalState: booleanValue => console.log(booleanValue),\n    selectCustomerHandle: (customerObj) => { console.log(customerObj); },\n    clickCreatedCustomerHandle: (createdCustomerResponseObj) => { console.log(createdCustomerResponseObj) },\n};\n\nexport { CustomerOptModal }\n","import * as React from 'react';\nvar RadioGroupContext = /*#__PURE__*/React.createContext(null);\nexport var RadioGroupContextProvider = RadioGroupContext.Provider;\nexport default RadioGroupContext;","import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.array.index-of\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/extends\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport RcCheckbox from 'rc-checkbox';\nimport classNames from 'classnames';\nimport { ConfigContext } from '../config-provider';\nimport RadioGroupContext from './context';\nimport { composeRef } from '../_util/ref';\nimport devWarning from '../_util/devWarning';\n\nvar InternalRadio = function InternalRadio(props, ref) {\n  var _classNames;\n\n  var context = React.useContext(RadioGroupContext);\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls,\n      direction = _React$useContext.direction;\n\n  var innerRef = React.useRef();\n  var mergedRef = composeRef(ref, innerRef);\n  React.useEffect(function () {\n    devWarning(!('optionType' in props), 'Radio', '`optionType` is only support in Radio.Group.');\n  }, []);\n\n  var onChange = function onChange(e) {\n    if (props.onChange) {\n      props.onChange(e);\n    }\n\n    if (context === null || context === void 0 ? void 0 : context.onChange) {\n      context.onChange(e);\n    }\n  };\n\n  var customizePrefixCls = props.prefixCls,\n      className = props.className,\n      children = props.children,\n      style = props.style,\n      restProps = __rest(props, [\"prefixCls\", \"className\", \"children\", \"style\"]);\n\n  var prefixCls = getPrefixCls('radio', customizePrefixCls);\n\n  var radioProps = _extends({}, restProps);\n\n  if (context) {\n    radioProps.name = context.name;\n    radioProps.onChange = onChange;\n    radioProps.checked = props.value === context.value;\n    radioProps.disabled = props.disabled || context.disabled;\n  }\n\n  var wrapperClassString = classNames(\"\".concat(prefixCls, \"-wrapper\"), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-wrapper-checked\"), radioProps.checked), _defineProperty(_classNames, \"\".concat(prefixCls, \"-wrapper-disabled\"), radioProps.disabled), _defineProperty(_classNames, \"\".concat(prefixCls, \"-wrapper-rtl\"), direction === 'rtl'), _classNames), className);\n  return (\n    /*#__PURE__*/\n    // eslint-disable-next-line jsx-a11y/label-has-associated-control\n    React.createElement(\"label\", {\n      className: wrapperClassString,\n      style: style,\n      onMouseEnter: props.onMouseEnter,\n      onMouseLeave: props.onMouseLeave\n    }, /*#__PURE__*/React.createElement(RcCheckbox, _extends({}, radioProps, {\n      prefixCls: prefixCls,\n      ref: mergedRef\n    })), children !== undefined ? /*#__PURE__*/React.createElement(\"span\", null, children) : null)\n  );\n};\n\nvar Radio = /*#__PURE__*/React.forwardRef(InternalRadio);\nRadio.displayName = 'Radio';\nRadio.defaultProps = {\n  type: 'radio'\n};\nexport default Radio;","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nimport * as React from 'react';\nexport default function useControlledState(defaultStateValue, option) {\n  var _ref = option || {},\n      defaultValue = _ref.defaultValue,\n      value = _ref.value,\n      onChange = _ref.onChange,\n      postState = _ref.postState;\n\n  var _React$useState = React.useState(function () {\n    if (value !== undefined) {\n      return value;\n    }\n\n    if (defaultValue !== undefined) {\n      return typeof defaultValue === 'function' ? defaultValue() : defaultValue;\n    }\n\n    return typeof defaultStateValue === 'function' ? defaultStateValue() : defaultStateValue;\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      innerValue = _React$useState2[0],\n      setInnerValue = _React$useState2[1];\n\n  var mergedValue = value !== undefined ? value : innerValue;\n\n  if (postState) {\n    mergedValue = postState(mergedValue);\n  }\n\n  function triggerChange(newValue) {\n    setInnerValue(newValue);\n\n    if (mergedValue !== newValue && onChange) {\n      onChange(newValue, mergedValue);\n    }\n  } // Effect of reset value to `undefined`\n\n\n  var firstRenderRef = React.useRef(true);\n  React.useEffect(function () {\n    if (firstRenderRef.current) {\n      firstRenderRef.current = false;\n      return;\n    }\n\n    if (value === undefined) {\n      setInnerValue(value);\n    }\n  }, [value]);\n  return [mergedValue, triggerChange];\n}","import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.map\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport Radio from './radio';\nimport { ConfigContext } from '../config-provider';\nimport SizeContext from '../config-provider/SizeContext';\nimport { RadioGroupContextProvider } from './context';\nvar RadioGroup = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls,\n      direction = _React$useContext.direction;\n\n  var size = React.useContext(SizeContext);\n\n  var _useMergedState = useMergedState(props.defaultValue, {\n    value: props.value\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      value = _useMergedState2[0],\n      setValue = _useMergedState2[1];\n\n  var onRadioChange = function onRadioChange(ev) {\n    var lastValue = value;\n    var val = ev.target.value;\n\n    if (!('value' in props)) {\n      setValue(val);\n    }\n\n    var onChange = props.onChange;\n\n    if (onChange && val !== lastValue) {\n      onChange(ev);\n    }\n  };\n\n  var renderGroup = function renderGroup() {\n    var _classNames;\n\n    var customizePrefixCls = props.prefixCls,\n        _props$className = props.className,\n        className = _props$className === void 0 ? '' : _props$className,\n        options = props.options,\n        optionType = props.optionType,\n        buttonStyle = props.buttonStyle,\n        disabled = props.disabled,\n        children = props.children,\n        customizeSize = props.size,\n        style = props.style,\n        id = props.id,\n        onMouseEnter = props.onMouseEnter,\n        onMouseLeave = props.onMouseLeave;\n    var prefixCls = getPrefixCls('radio', customizePrefixCls);\n    var groupPrefixCls = \"\".concat(prefixCls, \"-group\");\n    var childrenToRender = children; // 如果存在 options, 优先使用\n\n    if (options && options.length > 0) {\n      var optionsPrefixCls = optionType === 'button' ? \"\".concat(prefixCls, \"-button\") : prefixCls;\n      childrenToRender = options.map(function (option) {\n        if (typeof option === 'string') {\n          // 此处类型自动推导为 string\n          return /*#__PURE__*/React.createElement(Radio, {\n            key: option,\n            prefixCls: optionsPrefixCls,\n            disabled: disabled,\n            value: option,\n            checked: value === option\n          }, option);\n        } // 此处类型自动推导为 { label: string value: string }\n\n\n        return /*#__PURE__*/React.createElement(Radio, {\n          key: \"radio-group-value-options-\".concat(option.value),\n          prefixCls: optionsPrefixCls,\n          disabled: option.disabled || disabled,\n          value: option.value,\n          checked: value === option.value,\n          style: option.style\n        }, option.label);\n      });\n    }\n\n    var mergedSize = customizeSize || size;\n    var classString = classNames(groupPrefixCls, \"\".concat(groupPrefixCls, \"-\").concat(buttonStyle), (_classNames = {}, _defineProperty(_classNames, \"\".concat(groupPrefixCls, \"-\").concat(mergedSize), mergedSize), _defineProperty(_classNames, \"\".concat(groupPrefixCls, \"-rtl\"), direction === 'rtl'), _classNames), className);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classString,\n      style: style,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      id: id,\n      ref: ref\n    }, childrenToRender);\n  };\n\n  return /*#__PURE__*/React.createElement(RadioGroupContextProvider, {\n    value: {\n      onChange: onRadioChange,\n      value: value,\n      disabled: props.disabled,\n      name: props.name\n    }\n  }, renderGroup());\n});\nRadioGroup.defaultProps = {\n  buttonStyle: 'outline'\n};\nexport default /*#__PURE__*/React.memo(RadioGroup);","import \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.array.index-of\";\nimport _extends from \"@babel/runtime/helpers/extends\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport Radio from './radio';\nimport { ConfigContext } from '../config-provider';\nimport RadioGroupContext from './context';\n\nvar RadioButton = function RadioButton(props, ref) {\n  var radioGroupContext = React.useContext(RadioGroupContext);\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls;\n\n  var customizePrefixCls = props.prefixCls,\n      radioProps = __rest(props, [\"prefixCls\"]);\n\n  var prefixCls = getPrefixCls('radio-button', customizePrefixCls);\n\n  if (radioGroupContext) {\n    radioProps.checked = props.value === radioGroupContext.value;\n    radioProps.disabled = props.disabled || radioGroupContext.disabled;\n  }\n\n  return /*#__PURE__*/React.createElement(Radio, _extends({\n    prefixCls: prefixCls\n  }, radioProps, {\n    type: \"radio\",\n    ref: ref\n  }));\n};\n\nexport default /*#__PURE__*/React.forwardRef(RadioButton);","import InternalRadio from './radio';\nimport Group from './group';\nimport Button from './radioButton';\nvar Radio = InternalRadio;\nRadio.Button = Button;\nRadio.Group = Group;\nexport { Button, Group };\nexport default Radio;","import React, { useEffect, useRef, useState } from 'react';\nimport { Select, Input, Button, Form, InputNumber, Radio, Divider, Space, Modal } from 'antd';\nimport customConfig from '../../../custom_config';\n\nconst { Option } = Select;\n\nconst formSelectStyle = {width: 180};\n\nconst diopterSignsObj = {\n    // 球镜柱镜光度符号\n    1: ['negative', 'negative'],\n    2: ['negative', 'positive'],\n    3: ['positive', 'negative'],\n    4: ['positive', 'positive'],\n};\n\n// 选择左右眼光度\n\nconst splitDiopters = (diopterStr) => {\n    // 拆分光度为球镜、柱镜、轴位、ADD 返回: {spy: '', cyl: '', axi: 'int', add: ''}\n    let sph=null, cyl=null, axi=null, add=null;\n    if (!diopterStr) {\n        return {sph, cyl, axi, add};\n    }\n\n    let delSpaceDiopter = diopterStr.replace(/(^\\s*)|(\\s*$)/g, \"\");     // 先去掉开始和结尾的空格\n    if (delSpaceDiopter.indexOf('ADD') > 1) {\n        // 有ADD\n        const splitAddArr = delSpaceDiopter.split('ADD');\n        add = splitAddArr[1].replace(/(^\\s*)|(\\s*$)/g, \"\").replace(':', '');\n        delSpaceDiopter = splitAddArr[0].replace(/(^\\s*)|(\\s*$)/g, \"\");\n    }\n\n    if (delSpaceDiopter.length > 0) {\n        if (delSpaceDiopter.indexOf('-', 4) > 5) {\n            // 有散光\n            // console.log(delSpaceDiopter);\n            sph = delSpaceDiopter.slice(0, delSpaceDiopter.indexOf('-', 4)).replace(/(^\\s*)|(\\s*$)/g, \"\");\n            const cylAndAxiArr = delSpaceDiopter.slice(delSpaceDiopter.indexOf('-', 4)).split('*');\n            cyl = cylAndAxiArr[0].replace(/(^\\s*)|(\\s*$)/g, \"\");\n            axi = parseInt(cylAndAxiArr[1].replace(/(^\\s*)|(\\s*$)/g, \"\"));\n        } else {\n            // 没有散光\n            // console.log(delSpaceDiopter);\n            sph = delSpaceDiopter.replace(/(^\\s*)|(\\s*$)/g, \"\");\n        }\n    }\n    return {sph, cyl, axi, add};\n}\n\nconst judgeDiopterCreaterThanZero = (diopter) => {\n    // 判断光度的绝对值是否打大于0\n    return (diopter && Math.abs(parseFloat(diopter)) > 0);\n}\n\nconst createDioptersObj = (dioptersValues) => {\n    // 创建左右眼光度 {r: '-0.00 -0.50 * 180 ADD:+1.50', l: '-0.00 -0.50 * 180 ADD:+1.50', pd: 60}\n    let rDiopterStr = !dioptersValues.sphR ? '' : dioptersValues.sphR;\n    let lDiopterStr = !dioptersValues.sphL ? '' : dioptersValues.sphL;\n    const LackArgumentsObj = judgeLackArguments(dioptersValues);    // 判断是否缺少参数\n    if (judgeDiopterCreaterThanZero(dioptersValues.cylR)) {\n        // 右眼有散光\n        if (LackArgumentsObj.lackAxiR === 0) {\n            // 有轴位才添加散光\n            rDiopterStr = rDiopterStr === '' ? '-0.00' : rDiopterStr;\n            rDiopterStr = `${rDiopterStr} ${dioptersValues.cylR} * ${dioptersValues.axiR}`;\n        }\n    }\n    if (judgeDiopterCreaterThanZero(dioptersValues.cylL)) {\n        // 左眼有散光\n        if (LackArgumentsObj.lackAxiR === 0) {\n            // 有轴位才添加散光\n            lDiopterStr = lDiopterStr === '' ? '-0.00' : lDiopterStr;\n            lDiopterStr = `${lDiopterStr} ${dioptersValues.cylL} * ${dioptersValues.axiL}`;\n        }\n    }\n    if (judgeDiopterCreaterThanZero(dioptersValues.add)) {\n        // 有 ADD\n        rDiopterStr = `${rDiopterStr} ADD:${dioptersValues.add}`;\n        lDiopterStr = `${lDiopterStr} ADD:${dioptersValues.add}`;\n    }\n    return {diopter_r: rDiopterStr, diopter_l: lDiopterStr, pupillary_distance: dioptersValues.pd};\n}\n\nconst judgeLackArguments = (dioptersValues) => {\n    // 判断是否缺少瞳距或散光轴位\n    // value: 0-不缺, 1-缺少 {lackPd: 缺少瞳距, lackAxiR: R缺少轴位, lackAxiL: L缺少轴位}\n    const lackObj = {lackPd: 0, lackAxiR: 0, lackAxiL: 0};\n    if (dioptersValues.pd.toString().length < 2) {\n        lackObj.lackPd = 1;\n    }\n\n    const rAxi = dioptersValues.axiR;\n    const lAxi = dioptersValues.axiL;\n\n    if (dioptersValues.cylR && Math.abs(parseFloat(dioptersValues.cylR)) > 0) {\n        // 右眼有散光\n        if (rAxi) {\n            if(rAxi === \"\" || rAxi == null){\n                lackObj.lackAxiR = 1;\n            }\n            if (isNaN(rAxi)) {\n                lackObj.lackAxiR = 1;\n            }\n        } else {\n            lackObj.lackAxiR = 1;\n        }\n    }\n    if (dioptersValues.cylL && Math.abs(parseFloat(dioptersValues.cylL)) > 0) {\n        // 左眼有散光\n        if (lAxi) {\n            if(lAxi === \"\" || lAxi == null){\n                lackObj.lackAxiL = 1;\n            }\n            if (isNaN(lAxi)) {\n                lackObj.lackAxiL = 1;\n            }\n        } else {\n            lackObj.lackAxiL = 1;\n        }\n    }\n    return lackObj;\n}\n\nconst dioptersList = (positiveNegative = 'negative', maxDiopters = 90) => {\n    // 返回光度对象列表 [{label: '-0.00', value: '-0.00'}, {label: '-0.25', value: '-0.25'}]\n    // maxDiopters 最大光度 25-散光(至600度), 17-ADD(至400度)\n    // positiveNegative: negative='-', positive='+'\n    const diopters = [];\n    const pNSign = positiveNegative === 'negative' ? '-' : '+';\n    for (let index = 0; index < maxDiopters; index++) {\n        const element = pNSign + (index * 0.25).toFixed(2);\n        diopters.push({label: element, value: element});\n    }\n    return diopters;\n}\n\nconst DioptersSelectComponent = ({ value, onChange,  selectType=0, positiveNegative = 'negative', placeholder='请选择球镜' }) => {\n    // 选择光度的自定义组件 selectType: 0-球镜, 1-柱镜, 2-ADD下加光\n    const maxDioptersList = [90, 25, 17];\n    const selectOptions = dioptersList(positiveNegative, maxDioptersList[selectType])\n    return (\n        <Select style={formSelectStyle} value={value} onChange={onChange} placeholder={placeholder}>\n            {selectOptions.map(item => {\n                return (<Option key={item.value} value={item.value}>{item.label}</Option>)\n            })}\n        </Select>\n    )\n}\n\nconst lackArgumentsTips = [\n    '取消 重新输入, 确认 直接提交!',\n    '取消 重新输入, 确认 直接提交!(删除散光光度)',\n];\n\nconst lackArgumentsTitles = ['未输入瞳距', '未输入散光轴位', '未输入瞳距和散光轴位'];\n\nconst DoubleEyeSelectDiopter = ({sourceDiopterObj, selectedHandle, cancelHandle}) => {\n    // 球镜(spherical mirror), 柱镜(cylinder mirror), 轴向位置(Axial position)\n    const [form] = Form.useForm();\n\n    const [lackArgumentsVisible, setLackArgumentsVisible] = useState(false);\n\n    const [selectedSign, setSelectedSign] = useState(1);\n    const [sphSign, setSphSign] = useState('negative');\n    const [cylSign, setCylSign] = useState('negative');\n\n    const [warnTip, setWarnTip] = useState(lackArgumentsTips[0]);\n    const [warnTitle, setWarnTitle] = useState(lackArgumentsTitles[0]);\n\n    const [hasAddItem, setHasAddItem] = useState(false);\n\n    const submitObj = useRef({diopter_l: \"\", diopter_r: \"\", pupillary_distance: \"\"});\n\n    useEffect(() => {\n        // 初始化表单内容\n        setHasAddItem(false);\n        const dioptersObjR = splitDiopters(sourceDiopterObj.diopter_r);\n        const dioptersObjL = splitDiopters(sourceDiopterObj.diopter_l);\n        const add = dioptersObjR.add ? dioptersObjR.add : dioptersObjL.add;\n        if (add) {\n            setHasAddItem(true);\n        }\n        const initObj = {\n            sphR: dioptersObjR.sph,\n            cylR: dioptersObjR.cyl,\n            axiR: dioptersObjR.axi,\n            sphL: dioptersObjL.sph,\n            cylL: dioptersObjL.cyl,\n            axiL: dioptersObjL.axi,\n            add: add,\n            pd: sourceDiopterObj.pupillary_distance,\n        }\n        // setInitFormObj(initObj);\n        // console.log(initObj);\n        form.setFieldsValue(initObj);\n    }, [sourceDiopterObj]);\n\n    const onChangeSign = e => {\n        // 更新度数符号\n        console.log(e.target.value);\n        setSelectedSign(e.target.value);\n        const selectedDiopterSign = diopterSignsObj[e.target.value];\n        setSphSign(selectedDiopterSign[0]);\n        setCylSign(selectedDiopterSign[1]);\n    }\n\n    const onFinish = values => {\n        // console.log(values);\n        submitObj.current = createDioptersObj(values);\n        // console.log(submitObj.current);\n        const lackArgumentsObj = judgeLackArguments(values);    // 判断是否缺少参数\n        let tipsNum = -1;\n        if (lackArgumentsObj.lackPd > 0 || lackArgumentsObj.lackAxiR > 0 || lackArgumentsObj.lackAxiL > 0) {\n            // 有错误,跳出提示框\n            let lackPd = lackArgumentsObj.lackPd > 0 ? true : false;\n            let lackAxiR = lackArgumentsObj.lackAxiR > 0 ? true : false;\n            let lackAxiL = lackArgumentsObj.lackAxiL > 0 ? true : false;\n            tipsNum = lackPd ? 0 : tipsNum;\n            if (tipsNum > -1) {\n                tipsNum = lackAxiR || lackAxiL ? 2 : tipsNum;\n            } else {\n                tipsNum = lackAxiR || lackAxiL ? 1 : tipsNum;\n            }\n            if (tipsNum > -1) {\n                setWarnTitle(lackArgumentsTitles[tipsNum]);\n                setWarnTip(tipsNum === 0 ? lackArgumentsTips[0] : lackArgumentsTips[1]);\n                setLackArgumentsVisible(true);\n            }\n        } else {\n            // 没有错误直接提交\n            selectedHandle(submitObj.current);\n        }\n    }\n\n    const lackArgumentsSubmit = () => {\n        // 缺少散光轴位，或瞳距 继续提交光度\n        setLackArgumentsVisible(false);\n        selectedHandle(submitObj.current);\n    }\n\n    const addItem = (\n        <Form.Item label=\"ADD\" name=\"add\">\n            <DioptersSelectComponent selectType={2} positiveNegative=\"positive\" placeholder=\"请选择ADD\"></DioptersSelectComponent>\n        </Form.Item>\n    );\n\n    const showAddItemButtonItem = (\n        <Form.Item><Button type=\"link\" onClick={() => setHasAddItem(true)}>ADD...</Button></Form.Item>\n    )\n\n    return (\n        <div>\n            <h6>正负光度: &nbsp;\n                <Radio.Group onChange={onChangeSign} value={selectedSign}>\n                    <Radio value={1}>-/-</Radio>\n                    <Radio value={2}>-/+</Radio>\n                    <Radio value={3}>+/-</Radio>\n                    <Radio value={4}>+/+</Radio>\n                </Radio.Group>\n            </h6>\n            <Divider></Divider>\n            <Form form={form} name=\"diopters-form\" onFinish={onFinish} {...customConfig.formCommonStyle.layoutForm}>\n                <Form.Item label=\"光度R\">\n                    <Form.Item name=\"sphR\">\n                        <DioptersSelectComponent selectType={0} positiveNegative={sphSign}></DioptersSelectComponent>\n                    </Form.Item>\n                    <Form.Item name=\"cylR\">\n                        <DioptersSelectComponent selectType={1} positiveNegative={cylSign} placeholder=\"请选择柱镜\"></DioptersSelectComponent>\n                    </Form.Item>\n                    <Form.Item name=\"axiR\">\n                        <InputNumber min={1} max={180} style={{width: '8rem'}} placeholder=\"请输入轴位\"></InputNumber>\n                    </Form.Item>\n                </Form.Item>\n                <Form.Item label=\"光度L\">\n                    <Form.Item name=\"sphL\">\n                        <DioptersSelectComponent selectType={0} positiveNegative={sphSign}></DioptersSelectComponent>\n                    </Form.Item>\n                    <Form.Item name=\"cylL\">\n                        <DioptersSelectComponent selectType={1} positiveNegative={cylSign} placeholder=\"请选择柱镜\"></DioptersSelectComponent>\n                    </Form.Item>\n                    <Form.Item name=\"axiL\">\n                        <InputNumber min={1} max={180} style={{width: '8rem'}} placeholder=\"请输入轴位\"></InputNumber>\n                    </Form.Item>\n                </Form.Item>\n                <Form.Item label=\"PD\" name=\"pd\">\n                    <Input placeholder=\"请输入瞳距\" style={{maxWidth: '10rem'}}></Input>\n                </Form.Item>\n                {/* <Form.Item label=\"ADD\" name=\"add\">\n                    <DioptersSelectComponent selectType={2} positiveNegative=\"positive\" placeholder=\"请选择ADD\"></DioptersSelectComponent>\n                </Form.Item> */}\n                {hasAddItem ? addItem : showAddItemButtonItem}\n\n                <Form.Item {...customConfig.formCommonStyle.tailFormItemLayout}>\n                    <Space>\n                        <Button type=\"primary\" htmlType=\"submit\">确定</Button>\n                        <Button htmlType=\"button\" onClick={cancelHandle}>取消</Button>\n                    </Space>\n                </Form.Item>\n            </Form>\n\n            <Modal\n                title={warnTitle}\n                visible={lackArgumentsVisible}\n                onOk={lackArgumentsSubmit}\n                onCancel={() => setLackArgumentsVisible(false)}\n                okText=\"确认\"\n                cancelText=\"取消\"\n            >\n                <p>{warnTip}</p>\n            </Modal>\n        </div>\n    );\n};\nDoubleEyeSelectDiopter.defaultProps = {\n    sourceDiopterObj: {diopter_l: \"\", diopter_r: \"\", pupillary_distance: \"\"},\n    selectedHandle: selectedDiopterObj => console.log(selectedDiopterObj),\n    cancelHandle: () => console.log('Cancel select diopters...'),\n}\n\nexport { DoubleEyeSelectDiopter };\n","import React from 'react';\nimport { Modal } from 'antd';\nimport { DoubleEyeSelectDiopter } from '../base_components/diopter_component/select_diopter';\n\n// 选择光度模态框\n\nconst DioptersOptModal = ({ sourceDiopterObj, modalState, setModalState, selectHandle }) => {\n    // 选择光度 modal\n    return (\n        <>\n            <Modal\n                visible={modalState}\n                title=\"选择光度\"\n                closable={false}\n                footer={null}\n            >\n                <DoubleEyeSelectDiopter\n                    sourceDiopterObj={sourceDiopterObj}\n                    selectedHandle={selectHandle}\n                    cancelHandle={() => setModalState(false)}\n                ></DoubleEyeSelectDiopter>\n            </Modal>\n        </>\n    );\n};\nDioptersOptModal.defaultProps = {\n    sourceDiopterObj: {diopter_l: \"\", diopter_r: \"\", pupillary_distance: \"\"},\n    modalState: false,\n    setModalState: booleanValue => console.log(booleanValue),\n    selectCustomerHandle: (customerObj) => { console.log(customerObj); },\n    clickCreatedCustomerHandle: (createdCustomerResponseObj) => { console.log(createdCustomerResponseObj) },\n};\n\nexport { DioptersOptModal };\n","import React from 'react';\nimport { DatePicker } from 'antd';\nimport { CustomSelect } from '../base_components/select_component';\nimport ListsItem from '../base_components/list_item';\n\n// import { expressCompanyRequestGet } from './custom_select_requests';\n\nconst { RangePicker } = DatePicker;\n\n// PurchaseRecords 列 配置\n\n// ~~~~~~ 表单列, 需添加 ~~~~~~\nconst formKeys = [\n  \"id\", \"input_staff_id\", \"latest_modify_staff_id\", \"customer_id\", \"customer_name\",\n  \"group_purchase_commander_id\", \"group_purchase_commander_name\", \"product_title\", \"diopter_r\", \"diopter_l\",\n  \"pupillary_distance\", \"receive_address\", \"products_quantity\", \"purchase_amount\",\n  \"products_cost\", \"sale_platform\", \"order_state\", \"pay_table_id\", \"pay_platform\",\n  \"add_time\", \"update_time\", \"explains\", \"explains_customer\", \"has_print\",\n  \"image_cos_name1\", \"image_cos_name2\", \"image_cos_name3\", \"image_cos_name4\", \"image_cos_name5\"\n];\n\n// ~~~~~~ 表单不能编辑列, 根据实际添加 ~~~~~~\nconst formDisabledKeys = [\n  \"id\", \"input_staff_id\", \"latest_modify_staff_id\", \"customer_name\", \"group_purchase_commander_id\", \"group_purchase_commander_name\", \"diopter_r\", \"diopter_l\",\n  \"pupillary_distance\", \"receive_address\", \"pay_table_id\", \"add_time\", \"update_time\", \"has_print\", \"image_cos_name1\", \"image_cos_name2\",\n  \"image_cos_name3\", \"image_cos_name4\", \"image_cos_name5\"\n];\n\n// ~~~~~~ 表单不显示列, 根据实际添加 ~~~~~~\nconst formNotShowKeys = [\n  \"input_staff_id\", \"latest_modify_staff_id\", \"customer_id\", \"group_purchase_commander_id\", \"group_purchase_commander_name\",\n  \"receive_address\", \"image_cos_name1\", \"image_cos_name2\", \"image_cos_name3\", \"image_cos_name4\", \"image_cos_name5\"\n];\n\n// ~~~~~~ 表单列名称 label, 需添加 ~~~~~~\nconst formKeysLabelsObj = {\n  \"id\": \"订单ID\", \"input_staff_id\": \"订单创建管理员\", \"latest_modify_staff_id\": \"最后修改管理员\", \"customer_id\": \"顾客ID\", \"customer_name\": \"顾客\",\n  \"group_purchase_commander_id\": \"团购团长ID\", \"group_purchase_commander_name\": \"团购团长\", \"product_title\": \"商品标题\", \"diopter_r\": \"光度R\", \"diopter_l\": \"光度L\", \"pupillary_distance\": \"瞳距(PD)\",\n  \"receive_address\": \"收货地址\", \"products_quantity\": \"商品数量\", \"purchase_amount\": \"订单金额\", \"products_cost\": \"商品成本\", \"sale_platform\": \"销售平台\",\n  \"order_state\": \"订单状态\", \"pay_table_id\": \"支付表ID\", \"pay_platform\": \"支付方式\", \"add_time\": \"新建时间\", \"update_time\": \"更新时间\", \"explains\": \"商家备注\",\n  \"explains_customer\": \"顾客留言\", \"has_print\": \"打印状态\", \"image_cos_name1\": \"订单图片1\", \"image_cos_name2\": \"订单图片2\",\n  \"image_cos_name3\": \"订单图片3\", \"image_cos_name4\": \"订单图片4\", \"image_cos_name5\": \"订单图片5\",\n  \"range_add_time\": \"日期\", \"add_time_start\": \"开始时间\", \"add_time_end\": \"结束时间\"\n};\n\n//  ~~~~~~ 选择框, 根据实际添加 ~~~~~~\n// const SelectExpressCompany = ({ value = '', onChange = e => console.log(e) }) => {\n//   const [selectOptions, setSelectOptions] = useState([]);\n//   useEffect(() => {\n//     expressCompanyRequestGet().then(respObj => {\n//         const resList = respObj.results;\n//         let updateOptions = [];\n//         for (let index = 0; index < resList.length; index++) {\n//           const element = resList[index];\n//           updateOptions.push({\n//             value: element.express_company_code,\n//             label: element.express_company_name\n//           })\n//         }\n//         setSelectOptions(updateOptions);\n//       }).catch(error => {\n//         console.log(error);\n//         setSelectOptions([]);\n//       });\n//   }, []);\n//   return (<CustomSelect options={selectOptions} value={value} onChange={onChange}></CustomSelect>)\n// };\n// const SelectBoolean = (<CustomSelect options={[{ value: false, label: '否' }, { value: true, label: '是' }]} />);\nconst SelectRangePicker = <RangePicker />\nconst SelectEndTime = (<DatePicker showTime format=\"YYYY-MM-DD HH:mm:ss\" />);\nconst SelectHasPrint = (<CustomSelect options={[{ value: 0, label: '未打印' }, { value: 1, label: '已打印' }, { value: 2, label: '全部' }]} />);\nconst SelectSalePlatform = (<CustomSelect options={[{ value: 0, label: '未知或未输入'}, {value: 1, label: '门店'}, {value: 2, label: '淘宝'}, {value: 3, label: '小程序'}, {value: 4, label: '微信-方灵芝'}, {value: 5, label: '微信-展望眼镜'}]} />);\nconst SelectOrderState = (<CustomSelect options={[{ value: 0, label: '订单交易完成'}, { value: 1, label: '未付款'}, { value: 2, label: '定制中'}, { value: 3, label: '已发货'}, { value: 4, label: '售后处理中'}]} />); \nconst SelectPayPlatform = (<CustomSelect options={[{ value: 0, label: '未知'}, { value: 1, label: '微信支付'}, { value: 2, label: '支付宝支付'}, { value: 3, label: '刷卡'}, { value: 4, label: '现金'}]} />);\nconst formKeySelectComponentsObj = {\n  // 'express_company_code': <SelectExpressCompany />,\n  has_print: SelectHasPrint,\n  sale_platform: SelectSalePlatform,\n  order_state: SelectOrderState,\n  pay_platform: SelectPayPlatform,\n  range_add_time: SelectRangePicker,\n  add_time_start: SelectEndTime,\n  add_time_end: SelectEndTime\n};\n\n//  ~~~~~~ 表单自定义操作按钮, 根据实际添加 ~~~~~~\nconst formKeysHandleButtonObj = (setOptCustomerModalState) => {\n  return {\n    customer_name: {buttonTips: '选择顾客', clickMethod: () => setOptCustomerModalState(1)},\n    group_purchase_commander_name: {buttonTips: '选择团长', clickMethod: () => setOptCustomerModalState(2)},\n    pupillary_distance: {buttonTips: '选择光度瞳距', clickMethod: () => setOptCustomerModalState(3)},\n  };\n};\n\n//  ~~~~~~ 表单是图片列, 根据实际添加 ~~~~~~\nconst formKeysIsImages = [];\n\n//  ~~~~~~ 查询form keys, 根据实际添加 ~~~~~~\nconst formGetRequestParamsKeys = ['id', 'customer_name', 'sale_platform', 'order_state', 'range_add_time', 'has_print'];\n\n//  ~~~~~~ request请求条件(有可能和 ‘查询form keys’ 不同) keys, 根据实际添加(主要参考) ~~~~~~\nconst requestParamsKeys = ['customer_id', 'sale_platform', 'order_state', 'add_time_start', 'add_time_end', 'has_print'];\n\n//  ~~~~~~ 表单初始化值, 根据实际添加 ~~~~~~\nconst formInitialObj = {\n  \"id\": 0, \"input_staff_id\": 0, \"latest_modify_staff_id\": 0, \"customer_id\": 0, \"customer_name\": \"\",\n  \"group_purchase_commander_id\": 0, \"product_title\": \"\", \"diopter_r\": \"\", \"diopter_l\": \"\", \"pupillary_distance\": \"\",\n  \"receive_address\": \"\", \"products_quantity\": 0, \"purchase_amount\": 0, \"products_cost\": 0, \"sale_platform\": 0,\n  \"order_state\": 0, \"pay_table_id\": 0, \"pay_platform\": 0, \"add_time\": \"\", \"update_time\": \"\", \"explains\": \"\",\n  \"explains_customer\": \"\", \"has_print\": 2, \"image_cos_name1\": \"\", \"image_cos_name2\": \"\", \"image_cos_name3\": \"\", \"image_cos_name4\": \"\", \"image_cos_name5\": \"\"\n}\n\n// ~~~~~~ 图片列名称, 根据实际修改 ~~~~~~\nconst imageKeyNames = ['image_cos_name', ];\n\n// ~~~~~~ 图片总数量, 默认设置为1, 根据实际修改 ~~~~~~\nconst maxImagesNum = 5;\n\n// ~~~~~~ api请求url apiLists, 根据实际修改 ~~~~~~\nconst apiLists = ['records-admin/v1/purchaserecord', 'records-admin/v1/purchaserecordproducts', 'records-admin/v1/purchaserecorddeliveryaddress'];\n\n// 修改 ~~~~~~~ item keys ~~~~~~;\nconst ItemRendererComponent = ({ item, index, itemDetailClick }) => {\n  // 必须 每一行渲染 的组件, 修改 ~~~~~~~ item keys ~~~~~~;\n  console.log(item);\n  return (<div>\n    <ListsItem\n      listsIndex={index}\n      url={item.icon}\n      productTitle={item.name}\n      productEffects={`频道简介: ${item.front_desc}`}\n      salePrice={0}\n      clickDetailHandle={itemDetailClick}\n    ></ListsItem>\n  </div>);\n};\n\nexport {\n  formKeys,\n  formDisabledKeys,\n  formNotShowKeys,\n  formKeysLabelsObj,\n  formKeySelectComponentsObj,\n  formKeysHandleButtonObj,\n  formKeysIsImages,\n  formGetRequestParamsKeys,\n  requestParamsKeys,\n  formInitialObj,\n  imageKeyNames,\n  maxImagesNum,\n  apiLists,\n  ItemRendererComponent\n};\n","import React from 'react';\n\nimport AxiosRequest from '../apis';\nimport { apiLists } from './purchase_records_columns_label_config';\n\n// PurchaseRecords 的request请求\n\nconst PurchaseRecordsRequestGet = ({ requestCount, reqParams, responseDataHandle }) => {\n  // PurchaseRecords Get请求\n  const api = apiLists[0];\n  const method = 'get';\n  const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount.length}\n    ></AxiosRequest>\n  );\n};\nPurchaseRecordsRequestGet.defaultProps = {\n  requestCount: 0,\n  reqParams: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n};\n\nconst PurchaseRecordsRequestPost = ({ requestCount, reqObject, responseDataHandle }) => {\n  // PurchaseRecords post请求\n  const api = [].concat(apiLists)[0];\n  const method = 'post';\n  const reqParams = {};\n  // const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nPurchaseRecordsRequestPost.defaultProps = {\n  requestCount: 0,\n  reqObject: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n}\n\nconst PurchaseRecordsRequestPut = ({ requestCount, reqObject, responseDataHandle, id }) => {\n  // PurchaseRecords put请求\n  const api = [].concat(apiLists)[0] + `/${id}`;\n  const method = 'put';\n  const reqParams = {};\n  // const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nPurchaseRecordsRequestPut.defaultProps = {\n  requestCount: 0,\n  reqObject: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n  id: 0\n}\n\nconst PurchaseRecordsRequestDelete = ({ requestCount, responseDataHandle, id }) => {\n  // PurchaseRecords delete请求\n  const api = [].concat(apiLists)[0] + `/${id}`;\n  const method = 'delete';\n  const reqParams = {};\n  const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nPurchaseRecordsRequestDelete.defaultProps = {\n  requestCount: 0,\n  responseDataHandle: (respObj) => { console.log(respObj); },\n  id: 0\n}\n\nexport {\n  PurchaseRecordsRequestGet,\n  PurchaseRecordsRequestPost,\n  PurchaseRecordsRequestPut,\n  PurchaseRecordsRequestDelete\n};\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Modal, Divider, message } from 'antd';\n\nimport { CustomerOptModal } from '../modals/customer_opt';\nimport { DioptersOptModal } from '../modals/diopters_opt';\nimport { StsUploadImagesList } from '../upload_files/sts_upload_files_list';\nimport { PurchaseRecordsRequestPost } from './purchase_records_requests';\nimport { CustomForm } from '../base_components/form_component';\n\nimport {\n  formKeys,\n  formDisabledKeys,\n  // formNotShowKeys,\n  formKeysLabelsObj,\n  formKeySelectComponentsObj,\n  formKeysHandleButtonObj,\n  // formKeysIsImages,\n  // formGetRequestParamsKeys,\n  formInitialObj,\n  imageKeyNames,\n  maxImagesNum\n} from './purchase_records_columns_label_config';\n\n// ~~~~~~ 表单不显示列, 根据实际添加 ~~~~~~\nconst formNotShowKeys = [ \"id\", \"group_purchase_commander_id\", \"group_purchase_commander_name\", \"pay_table_id\", \"add_time\", \"update_time\",\n  \"input_staff_id\", \"latest_modify_staff_id\", \"customer_id\", \"receive_address\", \"explains_customer\",\n  \"image_cos_name1\", \"image_cos_name2\", \"image_cos_name3\", \"image_cos_name4\", \"image_cos_name5\",\n  \"has_print\"\n];\n\n// 新建 Modal\n\nconst CreatePurchaseRecords = ({ visible, setVisible, reloadListCount, setReloadListCount }) => {\n\n  const purchaseRecordsImageObj = useRef({});\n  const oldObj = useRef({createCount: 0});\n  const [dioptersObj, setDioptersObj] = useState({diopter_l: \"\", diopter_r: \"\", pupillary_distance: \"\"});\n\n  const [oldFormObj, setOldFormObj] = useState({});\n\n  const [initFormCount, setInitFormCount] = useState(0);\n\n  const [postRequestCount, setPostRequestCount] = useState(0);\n  const reqObject = useRef({});\n\n  const customerObj = useRef({});\n\n  const [customerOptModalState, setCustomerOptModalState] = useState(0);\n  const selectCustomerHandle = (cusotomerObj) => {\n    // 选择顾客操作\n    console.log(cusotomerObj, cusotomerObj.name);\n    let showName = cusotomerObj.name;\n    if (Object.keys(cusotomerObj).includes('wx_info')) {\n      showName = `${showName}(${cusotomerObj.wx_info.wx_nickname})`;\n    }\n    customerObj.current = cusotomerObj;\n    setOldFormObj({ customer_name: showName });\n    setCustomerOptModalState(false);\n  };\n  const selectDioptersHandle = (dioptersObj) => {\n    // 选择光度后操作, 保存当前光度和瞳距, 更新表单\n    setDioptersObj(dioptersObj);  // 保存当前光度和瞳距\n    setOldFormObj(dioptersObj);   // 更新表单\n    setCustomerOptModalState(0);            // 关闭选择表单弹出框\n};\n\n  const postResponseDataHandle = (respObj) => {\n    // 表单提交后的操作\n    if (Object.keys(respObj).includes('code')\n      && respObj.code === 1000) {\n      closeModal();\n      setReloadListCount(reloadListCount + 1)\n    } else {\n      message.error('网络错误...');\n    }\n  }\n\n  useEffect(() => {\n    if (visible) {\n      // 初始化表格和图片\n      purchaseRecordsImageObj.current = {};  // 清空图片数据\n      customerObj.current = {};   // 清空选择的顾客信息\n      oldObj.current = {createCount: oldObj.current.createCount + 1};  // 初始化图片\n      setInitFormCount(initFormCount + 1);  // 初始化表格\n      setDioptersObj({diopter_l: \"\", diopter_r: \"\", pupillary_distance: \"\"});   // 初始化光度\n    }\n  }, [visible]);\n\n  const closeModal = () => {\n    // 关闭Modal\n    setVisible(false);\n  }\n\n  const purchaseRecordsImageUploaded = (imagesObj) => {\n    // 图片上传后操作\n    purchaseRecordsImageObj.current = { ...imagesObj };\n  }\n\n  const onFinish = (values) => {\n    // 提交表单 表单没有customer_id, 提交时需要添加\n    let upObj = { ...values, ...purchaseRecordsImageObj.current, customer_id: customerObj.current.id, };\n    // let newDate = new Date(upObj.end_time);\n    // upObj.end_time = parseInt(newDate.getTime());    // 时间转时间戳\n    delete upObj.customer_name;\n    // upObj.has_print = Object.keys(upObj).includes('has_print') ? upObj.has_print === 1 : false;\n    reqObject.current = upObj;\n    console.log(reqObject.current);\n    setPostRequestCount(postRequestCount + 1);\n  }\n\n  return (\n    <>\n      <Modal visible={visible}\n        title=\"PurchaseRecords 新建\"\n        closable={false}\n        footer={null}\n      >\n        <div style={{ width: '100%', height: 'auto', textAlign: 'center' }}>\n          <StsUploadImagesList\n            oldObj={oldObj.current}\n            maxImagesNum={maxImagesNum}\n            imageKeyName={imageKeyNames[0]}\n            onChange={purchaseRecordsImageUploaded}></StsUploadImagesList>\n        </div>\n        <Divider></Divider>\n\n        <CustomForm\n          columns={formKeys}\n          disabledKeys={formDisabledKeys}\n          notShowKeys={formNotShowKeys}\n          formKeyLabelObj={formKeysLabelsObj}\n          formKeySelectComponentsObj={formKeySelectComponentsObj}\n          formKeysItemButtonObj={formKeysHandleButtonObj(setCustomerOptModalState)}\n          onFinish={onFinish}\n          cancelHandle={closeModal}\n          showDeleteButton={false}\n          updateFormObj={oldFormObj}\n          formInitialObj={formInitialObj}\n          initFormCount={initFormCount}\n        ></CustomForm>\n\n        <PurchaseRecordsRequestPost\n          requestCount={postRequestCount}\n          reqObject={reqObject.current}\n          responseDataHandle={postResponseDataHandle}></PurchaseRecordsRequestPost>\n\n        <CustomerOptModal\n          modalState={customerOptModalState === 1}\n          setModalState={setCustomerOptModalState}\n          selectCustomerHandle={selectCustomerHandle}></CustomerOptModal>\n\n        <DioptersOptModal\n          sourceDiopterObj={dioptersObj}\n          modalState={customerOptModalState === 3}\n          setModalState={setCustomerOptModalState}\n          selectHandle={selectDioptersHandle}></DioptersOptModal>\n      </Modal>\n    </>\n  )\n}\n\nCreatePurchaseRecords.defaultProps = {\n  visible: false,\n  setVisible: (val) => console.log(val),\n  reloadListCount: 0,\n  setReloadListCount: (booleanVal) => console.log(booleanVal)\n}\n\nexport default CreatePurchaseRecords;\n","import React, { useState } from 'react';\nimport { Drawer } from 'antd';\n\nimport { CustomForm } from '../base_components/form_component';\nimport { CustomerOptModal } from '../modals/customer_opt';\n\nimport {\n    formKeysLabelsObj,\n    // formDisabledKeys,\n    formKeySelectComponentsObj,\n    formKeysHandleButtonObj,\n    formGetRequestParamsKeys,\n    // requestParamsKeys,\n    formInitialObj\n} from './purchase_records_columns_label_config';\nimport { useRef } from 'react';\n// 列表查询 form\n\nconst queryFormDisabledKeys = ['customer_name'];\n\nconst PurchaseRecordsQueryDrawerForm = ({ visible, setVisible, queryHandle }) => {\n    const choseCustomerId = useRef(0);\n    const [initFormCount, setInitFormCount] = useState(0);\n    const [updateFormObj, setUpdateFormObj] = useState({});\n\n    const [customerOptModalState, setCustomerOptModalState] = useState(false);\n    const selectCustomerHandle = (cusotomerObj) => {\n        // 选择顾客操作\n        console.log(cusotomerObj, cusotomerObj.name);\n        // 当前选中的顾客 id\n        choseCustomerId.current = cusotomerObj.id;\n\n        let showName = cusotomerObj.name;\n        if (Object.keys(cusotomerObj).includes('wx_info')) {\n          showName = `${showName}(${cusotomerObj.wx_info.wx_nickname})`;\n        }\n        setUpdateFormObj({ customer_name: showName });\n        setCustomerOptModalState(false);\n    };\n\n    const closeDrawer = () => {\n        // 关闭查询抽屉\n        setInitFormCount(initFormCount + 1);\n        setVisible(false);\n    };\n\n    const onFinish = (formObj) => {\n        // 提交查询 根据具体情况更新 fromObj\n        // ~~~~~~~ 具体情况更新 fromObj ~~~~~~\n        // requestParamsKeys = ['customer_id', 'sale_platform', 'order_state', 'add_time_start', 'add_time_end', 'has_print'];\n        let copyFormObj = { ...formObj };\n        let queryParamsObj = {};\n        const queryId = formObj.id ? parseInt(formObj.id) : 0;\n        if (queryId > 0) {\n            // console.log(queryId);\n            queryParamsObj.id = queryId;\n        }else {\n            if (choseCustomerId.current > 0) {\n                queryParamsObj.customer_id = choseCustomerId.current;\n            }\n            const sale_platform = copyFormObj.sale_platform;\n            if (sale_platform > 0 && sale_platform < 6) {\n                queryParamsObj.sale_platform = sale_platform;\n            }\n            const order_state = copyFormObj.order_state\n            if (order_state > 0 && order_state < 5) {\n                queryParamsObj.order_state = order_state;\n            }\n            // 查询日期区间\n            const rangeDates = copyFormObj.range_add_time;\n            if (Array.isArray(rangeDates) && rangeDates.length === 2) {\n                queryParamsObj.add_time_start = rangeDates[0].format('YYYY-MM-DD');\n                queryParamsObj.add_time_end = rangeDates[1].format('YYYY-MM-DD');\n            }\n            // const\n            const has_print = copyFormObj.has_print;\n            if (has_print === 0 || has_print === 1) {\n                queryParamsObj.has_print = has_print;\n            }\n        }\n        queryHandle(queryParamsObj);\n        setTimeout(() => {\n            closeDrawer();\n        }, 50);\n    };\n\n    return (\n        <>\n            <Drawer\n                title=\"销售记录查询\"\n                width=\"100%\"\n                height=\"400px\"\n                placement=\"top\"\n                onClose={closeDrawer}\n                visible={visible}\n                bodyStyle={{ paddingBottom: 80 }}\n                footer={null}\n            >\n                <CustomForm\n                    columns={formGetRequestParamsKeys}\n                    disabledKeys={queryFormDisabledKeys}\n                    formKeyLabelObj={formKeysLabelsObj}\n                    formKeySelectComponentsObj={formKeySelectComponentsObj}\n                    formKeysItemButtonObj={formKeysHandleButtonObj(setCustomerOptModalState)}\n                    onFinish={onFinish}\n                    cancelHandle={() => setVisible(false)}\n                    showDeleteButton={false}\n                    formInitialObj={formInitialObj}\n                    initFormCount={initFormCount}\n                    updateFormObj={updateFormObj}\n                ></CustomForm>\n            </Drawer>\n            <CustomerOptModal\n                modalState={customerOptModalState}\n                setModalState={setCustomerOptModalState}\n                selectCustomerHandle={selectCustomerHandle}></CustomerOptModal>\n        </>\n    );\n};\n\nPurchaseRecordsQueryDrawerForm.defaultProps = {\n    visible: false,\n    setVisible: (booleanValue) => { console.log(booleanValue); },\n    queryHandle: (queryParamsObj) => { console.log(queryParamsObj); }\n};\n\nexport default PurchaseRecordsQueryDrawerForm;\n","import React, { useRef, useState, useEffect } from 'react';\nimport { Modal, Divider, message } from 'antd';\n\n// import StsUploadFile from '../upload_files/sts_upload_file';\nimport { StsUploadImagesList } from '../upload_files/sts_upload_files_list';\nimport { PurchaseRecordsRequestPut, PurchaseRecordsRequestDelete } from './purchase_records_requests';\nimport { CustomForm } from '../base_components/form_component';\nimport { CustomerOptModal } from '../modals/customer_opt';\nimport { DioptersOptModal } from '../modals/diopters_opt';\nimport PageIsLoading from '../base_components/page_is_loading';\nimport { customerShowName } from '../base_components/purchase_records_goods_delivery_address/purchase_records_common_funcs';\n\nimport {\n    formKeys,\n    formDisabledKeys,\n    formNotShowKeys,\n    formKeysLabelsObj,\n    formKeySelectComponentsObj,\n    formKeysHandleButtonObj,\n    formGetRequestParamsKeys,\n    formInitialObj,\n    imageKeyNames,\n    maxImagesNum\n} from './purchase_records_columns_label_config';\n\n// 编辑 PurchaseRecords\n\nconst UpdatePurchaseRecords = ({ visible, setVisible, oldObj, reloadListCount, setReloadListCount }) => {\n  const [pageLoading, setPageLoading] = useState(false);\n  // const [oldPurchaseRecordsHomeImages, setOldPurchaseRecordsHomeImages] = useState([]);\n  const purchaseRecordsImageObj = useRef({});\n  const [dioptersObj, setDioptersObj] = useState({diopter_l: \"\", diopter_r: \"\", pupillary_distance: \"\"});\n\n  // const [oldPurchaseRecordsImageUrl, setOldPurchaseRecordsImageUrl] = useState('');\n  const [oldFormObj, setOldFormObj] = useState({});\n\n  const [initFormCount, setInitFormCount] = useState(0);\n\n  const [putRequestCount, setPutRequestCount] = useState(0);\n  const reqObject = useRef({});\n  const putResponseDataHandle = (respObj) => {\n      setPageLoading(false);\n      if (Object.keys(respObj).includes('code')\n          && respObj.code === 1000) {\n          message.success('修改成功');\n          setReloadListCount(reloadListCount + 1);\n          setVisible(false);\n      } else {\n          message.error('网络错误...');\n      }\n  }\n\n  const [deleteRequestCount, setDeleteRequestCount] = useState(0);\n  const deletePurchaseRecords = () => {\n      // 删除当前对象\n      if (Object.keys(oldObj).includes('id') && oldObj.id > 0) {\n          setDeleteRequestCount(deleteRequestCount + 1);\n          setReloadListCount(reloadListCount + 1);\n      } else {\n          // 修改过顾客后无法删除，需要重新打开删除\n          message.warn('修改顾客后不能直接删除, 关闭并重新打开再删除');\n      }\n  };\n\n  const [customerOptModalState, setCustomerOptModalState] = useState(0);\n  const selectCustomerHandle = (cusotomerObj) => {\n      // 选择顾客操作\n      console.log(cusotomerObj, cusotomerObj.name);\n      let showName = cusotomerObj.name;\n      if (Object.keys(cusotomerObj).includes('wx_info')) {\n          showName = `${showName}(${cusotomerObj.wx_info.wx_nickname})`;\n      }\n      // setOldFormObj({ ...oldFormObj,\n      setOldFormObj({\n          customer_info: cusotomerObj,\n          customer_id: cusotomerObj.id,\n          customer_name: showName\n      });\n      setCustomerOptModalState(false);\n  };\n\n  const selectDioptersHandle = (dioptersObj) => {\n      // 选择光度后操作, 保存当前光度和瞳距, 更新表单\n      setDioptersObj(dioptersObj);  // 保存当前光度和瞳距\n      setOldFormObj(dioptersObj);   // 更新表单\n      setCustomerOptModalState(0);            // 关闭选择表单弹出框\n  };\n\n  useEffect(() => {\n      initImgAndForm();   // 初始化表格和图片 和光度对象\n  }, [visible, oldObj]);\n\n  const initImgAndForm = () => {\n      // 初始化表格和图片和光度对象\n      setInitFormCount(initFormCount + 1);  // 初始化表单\n      let customer_name = '';\n      let hasPrintNum = 0;\n      try {\n          if (Object.keys(oldObj).includes('customer_info')) {\n              customer_name = customerShowName(oldObj.customer_info);\n          }\n          hasPrintNum = oldObj.has_print ? 1 : 0;\n      } catch (error) {\n          console.error(error);\n          console.log(oldObj);\n      }\n      const oldPurchaseRecord = { ...oldObj, customer_name: customer_name, has_print: hasPrintNum };\n      setOldFormObj(oldPurchaseRecord);  // 给表单赋值\n\n      // 保存光度对象\n      setDioptersObj({\n        diopter_r: oldPurchaseRecord.diopter_r,\n        diopter_l: oldPurchaseRecord.diopter_l,\n        pupillary_distance: oldPurchaseRecord.pupillary_distance,\n      });\n\n      // 生成图片列表\n      // let purchaseRecordsHomeImgs = [];\n      // const imgKey = imageKeyNames[0];\n      // for (let index = 1; index < 10; index++) {\n      //     const currentCosNameKey = imgKey + index;\n      //     const currentUrlKey = currentCosNameKey + '_url';\n      //     const currentCosName = oldObj[currentCosNameKey];\n      //     const currentUrl = oldObj[currentUrlKey];\n      //     if (typeof currentCosName === 'string' && currentCosName.length > 5) {\n      //         purchaseRecordsHomeImgs.push({\n      //             cosNameKey: currentCosNameKey,\n      //             cosName: currentCosName,\n      //             urlKey: currentUrlKey,\n      //             url: currentUrl\n      //         });\n      //     }\n      // }\n      // // console.log(purchaseRecordsHomeImgs);\n      // setOldPurchaseRecordsHomeImages(purchaseRecordsHomeImgs);   // 更新图片列表\n  }\n\n  const purchaseRecordsImageUploaded = (imagesObj) => {\n      // 轮播图上传后操作\n      purchaseRecordsImageObj.current = imagesObj;\n  }\n\n  const onFinish = (values) => {\n      // 提交表单 表单没有customer_id, 提交时需要添加\n      const has_print_boolean = values.has_print === 1 ? true : false;\n      let upObj = {\n          ...values, ...purchaseRecordsImageObj.current,\n          customer_id: oldFormObj.customer_id,\n          has_print: has_print_boolean\n      };\n\n      console.log(upObj);\n      setPageLoading(true);\n      // 时间转时间戳\n      // let newDate = new Date(upObj.end_time);\n      // upObj.end_time = parseInt(newDate.getTime());    // 时间转时间戳\n      // console.log(upObj.end_time);\n      reqObject.current = upObj;\n      setPutRequestCount(putRequestCount + 1);\n  }\n\n  return (\n      <Modal visible={visible}\n        title=\"PurchaseRecords\"\n        closable={false}\n        footer={null}\n      >\n        <PageIsLoading spinning={pageLoading}></PageIsLoading>\n        <div style={{ width: '100%', height: 'auto', textAlign: 'center' }}>\n            <StsUploadImagesList\n                maxImagesNum={maxImagesNum}\n                imageKeyName=\"image_cos_name\"\n                oldObj={oldObj}\n                onChange={purchaseRecordsImageUploaded}\n            ></StsUploadImagesList>\n        </div>\n        <Divider></Divider>\n\n        <CustomForm\n            columns={formKeys}\n            disabledKeys={formDisabledKeys}\n            notShowKeys={formNotShowKeys}\n            formKeyLabelObj={formKeysLabelsObj}\n            formKeySelectComponentsObj={formKeySelectComponentsObj}\n            formKeysItemButtonObj={formKeysHandleButtonObj(setCustomerOptModalState)}\n            onFinish={onFinish}\n            cancelHandle={() => setVisible(false)}\n            showDeleteButton={true}\n            deleteHandle={deletePurchaseRecords}\n            updateFormObj={oldFormObj}\n            formInitialObj={{}}\n            initFormCount={initFormCount}\n        ></CustomForm>\n\n        <PurchaseRecordsRequestPut\n            requestCount={putRequestCount}\n            reqObject={reqObject.current}\n            responseDataHandle={putResponseDataHandle}\n            id={reqObject.current.id}></PurchaseRecordsRequestPut>\n        <PurchaseRecordsRequestDelete\n            requestCount={deleteRequestCount}\n            responseDataHandle={(respObj) => setVisible(false)}\n            id={oldObj.id}></PurchaseRecordsRequestDelete>\n        <CustomerOptModal\n            modalState={customerOptModalState === 1}\n            setModalState={setCustomerOptModalState}\n            selectCustomerHandle={selectCustomerHandle}></CustomerOptModal>\n        <DioptersOptModal\n          sourceDiopterObj={dioptersObj}\n          modalState={customerOptModalState === 3}\n          setModalState={setCustomerOptModalState}\n          selectHandle={selectDioptersHandle}></DioptersOptModal>\n      </Modal>\n  )\n}\n\nUpdatePurchaseRecords.defaultProps = {\n  visible: false,\n  setVisible: (val) => console.log(val),\n  oldObj: {}\n}\n\nexport default UpdatePurchaseRecords;\n","import React from 'react';\nimport { pca, pcaa } from 'area-data'; // v3 or higher\nimport 'react-area-linkage/dist/index.css'; // v2 or higher\nimport { AreaSelect, AreaCascader } from 'react-area-linkage';\n\nconst ChinaAreaSelect = ({initAreaList, selectedAreaHandle}) => {\n    // 中国地区选择\n    const selectedChange = (selectedArea) => {\n        console.log(selectedArea);\n        selectedAreaHandle(selectedArea)\n    }\n    return (\n        <AreaSelect onChange={selectedChange} level={2} data={pcaa} defaultArea={initAreaList} />\n    )\n}\nChinaAreaSelect.defaultProps = {\n    initAreaObj: [],\n    selectedAreaHandle: selectedArea => console.log(selectedArea),\n}\n\nexport { ChinaAreaSelect };\n","import React from 'react';\nimport { sendAxiosRequest } from '../apis/sendRequest';\n\n// 自定义 Select 组件的request请求, ～～～～～～ 根据需要重写 ～～～～～～\n\nconst channelsRequestGet = () => {\n  // 频道 Get 请求\n  return new Promise(function (resolve, reject) {\n    const api = 'channel/v1/channels';\n    const method = 'get';\n    const reqParams = {};\n    const reqObject = {};\n    sendAxiosRequest(api, method, reqParams, reqObject)\n      .then(respObj => {\n        resolve(respObj);\n      })\n      .catch(err => {\n        console.log(err);\n        reject(err);\n      });\n  });\n};\n\nconst categoryRequestGet = () => {\n  // 分类 Get请求\n  return new Promise(function (resolve, reject) {\n    const api = 'category-admin/v1/category';\n    const method = 'get';\n    const reqParams = {};\n    const reqObject = {};\n    sendAxiosRequest(api, method, reqParams, reqObject)\n      .then(respObj => {\n        resolve(respObj);\n      })\n      .catch(err => {\n        console.log(err);\n        reject(err);\n      });\n  });\n}\n\nconst expressCompanyRequestGet = () => {\n  // 快递公司 Get请求\n  return new Promise(function (resolve, reject) {\n    const api = 'kdniao-admin/v1/kdniaoexpresscompanycodes';\n    const method = 'get';\n    const reqParams = {};\n    const reqObject = {};\n    sendAxiosRequest(api, method, reqParams, reqObject)\n      .then(respObj => {\n        resolve(respObj);\n      })\n      .catch(err => {\n        console.log(err);\n        reject(err);\n      });\n  });\n}\n\nexport {\n  channelsRequestGet,\n  categoryRequestGet,\n  expressCompanyRequestGet,\n};\n","import React, { useState, useEffect } from 'react';\n// import { DatePicker } from 'antd';\nimport { CustomSelect } from '../base_components/select_component';\nimport ListsItem from '../base_components/list_item';\nimport { expressCompanyRequestGet } from './custom_select_requests';\n\n// Deliver 列 配置\n\n// ~~~~~~ 表单列, 需添加 ~~~~~~\nconst formKeys = [\"id\", \"express_company_code\", \"express_number\"];\n\n// ~~~~~~ 表单不能编辑列, 根据实际添加 ~~~~~~\nconst formDisabledKeys = [];\n\n// ~~~~~~ 表单不显示列, 根据实际添加 ~~~~~~\nconst formNotShowKeys = [\"password\", \"id\"];\n\n// ~~~~~~ 表单列名称 label, 需添加 ~~~~~~\nconst formKeysLabelsObj = {\"id\": \"ID\", \"express_company_code\": \"快递公司\", \"express_number\": \"快递单号\", \"add_time\": \"创建时间\", \"update_time\": \"更新时间\", \"explains\": \"说明\"};\n\n//  ~~~~~~ 选择框, 根据实际添加 ~~~~~~\nconst SelectExpressCompany = ({ value = '', onChange = e => console.log(e) }) => {\n  const [selectOptions, setSelectOptions] = useState([]);\n  useEffect(() => {\n    expressCompanyRequestGet().then(respObj => {\n        const resList = respObj.results;\n        let updateOptions = [];\n        for (let index = 0; index < resList.length; index++) {\n          const element = resList[index];\n          updateOptions.push({\n            value: element.express_company_code,\n            label: element.express_company_name\n          })\n        }\n        setSelectOptions(updateOptions);\n      }).catch(error => {\n        console.log(error);\n        setSelectOptions([]);\n      });\n  }, []);\n  return (<CustomSelect options={selectOptions} value={value} onChange={onChange}></CustomSelect>)\n};\n// const SelectEndTime = (<DatePicker showTime format=\"YYYY-MM-DD HH:mm:ss\" />);\n// const SelectBoolean = (<CustomSelect options={[{ value: 0, label: '否' }, { value: 1, label: '是' }]} />);\nconst formKeySelectComponentsObj = {\n  'express_company_code': <SelectExpressCompany />,\n  // exampleColumn: SelectBoolean,\n};\n\n// ~~~~~~ 表单自定义操作按钮, 根据实际添加 ~~~~~~\nconst formKeysHandleButtonObj = (setOptModalState) => {\n  return {\n    group_purchase_commander_name: {buttonTips: '团购团长', clickMethod: () => setOptModalState(true)},\n  };\n};\n\n// ~~~~~~ 表单是图片列, 根据实际添加(废弃, 改用 imageKeyNames) ~~~~~~\n// const formKeysIsImages = [];\n\n// ~~~~~~ 表单 get 请求条件key, 根据实际添加 ~~~~~~\nconst formGetRequestParamsKeys = [];\n\n//  ~~~~~~ 表单初始化值, 根据实际添加 ~~~~~~\nconst formInitialObj = {\"id\": 0, \"add_time\": \"创建时间\", \"\": \"\", \"explains\": \"\"}\n\n// ~~~~~~ 表单值规则, 根据实际添加 ~~~~~~\n// formRulesList = {formKey: [{require: true, message: 'Please input Password!',}, ]};\nconst formRulesList = {\"password\": [{required: true, message: 'Please input Password!',}, ], }\n\n// ~~~~~~ 图片列名称, 根据实际修改(多张图片去掉最后序号数字) ~~~~~~\nconst imageKeyNames = ['pic'];\n\n// ~~~~~~ 图片总数量, 默认设置为1, 根据实际修改 ~~~~~~\nconst maxImagesNum = 1;\n\n// ~~~~~~ api请求url apiLists, 根据实际修改 ~~~~~~\nconst apiLists = ['delivery-address/v1/customerdeliveryaddress', ];\n\n// 修改 ~~~~~~~ item keys ~~~~~~;\nconst ItemRendererComponent = ({ item, index, itemDetailClick, selectButtonOnClick }) => {\n  // 必须 每一行渲染 的组件, 修改 ~~~~~~~ item keys ~~~~~~;\n  const [customerName, setCustomerName] = useState('');\n  const [avatarUrl, setAvatarUrl] = useState('');\n\n  useEffect(() => {\n    // 显示姓名 + 微信昵称\n    const customerName = item.name ? item.name : '';\n    let wxNickname = '';\n\n    const customerAvatar = item.avatar_url ? item.avatar_url : '';\n    let wxAvatar = '';\n    if (Object.keys(item).includes('wx_info') && Object.keys(item.wx_info).includes('wx_nickname')) {\n      wxNickname = item.wx_info.wx_nickname;\n      wxAvatar = item.wx_info.wx_avatar;\n    }\n\n    setCustomerName(wxNickname.length > 0 ? `${customerName}(${wxNickname})` : customerName);\n    setAvatarUrl(customerAvatar.length > 0 ? customerAvatar : wxAvatar);\n  }, [item]);\n\n  const [customButtons, setCustomButtons] = useState([]);\n\n  useEffect(() => {\n    if (selectButtonOnClick) {\n      const selectButtonObj = {\n        buttonLabel: '选择',\n        onClick: (listIndex) => {\n          selectButtonOnClick(item, index);\n        },\n      };\n      setCustomButtons([selectButtonObj,]);\n    }\n    \n  }, [selectButtonOnClick]);\n\n  // console.log(item);\n  return (<div>\n    <ListsItem\n      listsIndex={index}\n      url={avatarUrl}\n      productTitle={customerName}\n      productEffects={`手机: ${item.mobile}`}\n      salePrice={0}\n      clickDetailHandle={itemDetailClick}\n      customButtons={customButtons}\n    ></ListsItem>\n  </div>);\n};\n\nexport {\n  formKeys,\n  formDisabledKeys,\n  formNotShowKeys,\n  formKeysLabelsObj,\n  formKeySelectComponentsObj,\n  formKeysHandleButtonObj,\n  // formKeysIsImages,\n  formGetRequestParamsKeys,\n  formInitialObj,\n  formRulesList,\n  imageKeyNames,\n  maxImagesNum,\n  apiLists,\n  ItemRendererComponent\n};\n","import React from 'react';\n\nimport AxiosRequest from '../apis';\nimport { apiLists } from './deliver_columns_label_config';\n\n// Deliver 的request请求\n\nconst DeliverRequestGet = ({ requestCount, reqParams, responseDataHandle }) => {\n  // Deliver Get请求\n  const api = apiLists[0];\n  const method = 'get';\n  const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nDeliverRequestGet.defaultProps = {\n  requestCount: 0,\n  reqParams: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n};\n\nconst DeliverRequestPost = ({ requestCount, reqObject, responseDataHandle }) => {\n  // Deliver post请求\n  const api = [].concat(apiLists)[0];\n  const method = 'post';\n  const reqParams = {};\n  // const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nDeliverRequestPost.defaultProps = {\n  requestCount: 0,\n  reqObject: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n}\n\nconst DeliverRequestPut = ({ requestCount, reqObject, responseDataHandle, id }) => {\n  // Deliver put请求\n  const api = [].concat(apiLists)[0] + `/${id}`;\n  const method = 'put';\n  const reqParams = {};\n  // const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nDeliverRequestPut.defaultProps = {\n  requestCount: 0,\n  reqObject: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n  id: 0\n}\n\nconst DeliverRequestDelete = ({ requestCount, responseDataHandle, id }) => {\n  // Deliver delete请求\n  const api = [].concat(apiLists)[0] + `/${id}`;\n  const method = 'delete';\n  const reqParams = {};\n  const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nDeliverRequestDelete.defaultProps = {\n  requestCount: 0,\n  responseDataHandle: (respObj) => { console.log(respObj); },\n  id: 0\n}\n\nexport {\n  DeliverRequestGet,\n  DeliverRequestPost,\n  DeliverRequestPut,\n  DeliverRequestDelete\n};\n","import React, { useRef, useState, useEffect } from 'react';\nimport { Modal, Divider, message } from 'antd';\n\n// import StsUploadFile from '../../upload_files/sts_upload_file';\nimport { StsUploadImagesList } from '../upload_files/sts_upload_files_list';\nimport { DeliverRequestPut, DeliverRequestDelete } from './deliver_requests';\nimport { CustomForm, CustomSingleRowForm } from '../base_components/form_component';\n\nimport {\n  formKeys,\n  formDisabledKeys,\n  formNotShowKeys,\n  formKeysLabelsObj,\n  formKeySelectComponentsObj,\n  formKeysIsImages,\n  formGetRequestParamsKeys,\n  // formInitialObj,\n  formRulesList,\n  imageKeyNames,\n  maxImagesNum\n} from './deliver_columns_label_config';\n\n// 编辑 Deliver\n\nconst UpdateDeliver = ({ visible, setVisible, oldObj, purchaseRecordId, customerId }) => {\n  const [oldDeliverHomeImages, setOldDeliverHomeImages] = useState([]);\n  const deliverImageObj = useRef({});\n\n  const [oldDeliverImageUrl, setOldDeliverImageUrl] = useState('');\n  const [oldFormObj, setOldFormObj] = useState({});\n\n  const [initFormCount, setInitFormCount] = useState(0);\n\n  const [putRequestCount, setPutRequestCount] = useState(0);\n  const reqObject = useRef({});\n  const putResponseDataHandle = (respObj) => {\n    if (Object.keys(respObj).includes('code')\n      && respObj.code === 1000) {\n      message.success('修改成功');\n      // setReloadListCount(reloadListCount + 1);\n      setVisible(false);\n    } else {\n      message.error('网络错误...');\n    }\n  }\n\n  const [deleteRequestCount, setDeleteRequestCount] = useState(0);\n\n  const deleteDeliver = () => {\n    // 删除当前对象\n    console.log('Delete handle')\n    // setDeleteRequestCount(deleteRequestCount + 1);\n    // setReloadListCount(reloadListCount + 1);\n  };\n\n  useEffect(() => {\n    initImgAndForm();   // 初始化表格和图片\n  }, [oldObj]);\n\n  const initImgAndForm = () => {\n    // 初始化表格和图片\n    setInitFormCount(initFormCount + 1);  // 初始化表格\n    setOldFormObj({ ...oldObj });  // 给表格赋值\n\n    // 生成图片列表\n    let deliverHomeImgs = [];\n    const imgKey = imageKeyNames[0];\n    for (let index = 1; index < 10; index++) {\n      const currentCosNameKey = imgKey + index;\n      const currentUrlKey = currentCosNameKey + '_url';\n      const currentCosName = oldObj[currentCosNameKey];\n      const currentUrl = oldObj[currentUrlKey];\n      if (typeof currentCosName === 'string' && currentCosName.length > 5) {\n        deliverHomeImgs.push({\n          cosNameKey: currentCosNameKey,\n          cosName: currentCosName,\n          urlKey: currentUrlKey,\n          url: currentUrl\n        });\n      }\n    }\n    // console.log(deliverHomeImgs);\n    setOldDeliverHomeImages(deliverHomeImgs);   // 更新图片列表\n  }\n\n  const deliverImageUploaded = (imagesObj) => {\n    // 轮播图上传后操作\n    deliverImageObj.current = imagesObj;\n  }\n\n  const onFinish = (values) => {\n    // 提交表单\n    let upObj = { ...values, 'purchase_record_id': purchaseRecordId, 'customer_id': customerId };\n    console.log(upObj);\n    // 时间转时间戳\n    // let newDate = new Date(upObj.end_time);\n    // upObj.end_time = parseInt(newDate.getTime());    // 时间转时间戳\n    // console.log(upObj.end_time);\n    reqObject.current = upObj;\n    setVisible(false)\n    // setPutRequestCount(putRequestCount + 1);\n  }\n\n  return (\n    <>\n      <Divider></Divider>\n      <CustomSingleRowForm\n        columns={formKeys}\n        disabledKeys={formDisabledKeys}\n        notShowKeys={formNotShowKeys}\n        formKeyLabelObj={formKeysLabelsObj}\n        formKeySelectComponentsObj={formKeySelectComponentsObj}\n        onFinish={onFinish}\n        cancelHandle={() => setVisible(false)}\n        showDeleteButton={false}\n        deleteHandle={deleteDeliver}\n        updateFormObj={oldFormObj}\n        formInitialObj={{}}\n        rulesObj={formRulesList}\n        initFormCount={initFormCount}\n      ></CustomSingleRowForm>\n\n      <DeliverRequestPut\n        requestCount={putRequestCount}\n        reqObject={reqObject.current}\n        responseDataHandle={putResponseDataHandle}\n        id={oldFormObj.id}></DeliverRequestPut>\n      <DeliverRequestDelete\n        requestCount={deleteRequestCount}\n        responseDataHandle={(respObj) => setVisible(false)}\n        id={oldFormObj.id}></DeliverRequestDelete>\n    </>\n  )\n}\n\nUpdateDeliver.defaultProps = {\n  visible: false,\n  setVisible: (val) => console.log(val),\n  oldObj: {},\n  purchaseRecordId: 0,\n  customerId: 0\n}\n\nexport default UpdateDeliver;\n","import React, { useState, useRef } from 'react';\n// import { navigate, Link } from 'gatsby';\nimport { Button, Row, Col, Space, Tooltip } from 'antd';\nimport { ReloadOutlined, SearchOutlined, LeftOutlined } from '@ant-design/icons';\n\nimport { ChinaAreaSelect } from './deliver_area_select';\nimport UpdateDeliver from './update_deliver';\n// Deliver 入口组件\n\nconst DeliverComponent = ({ selectButtonOnClick = null, purchaseRecordId = 0, customerId = 0 }) => {\n  const reqParams = useRef({ page: 0 });\n\n  const [reloadListCount, setReloadListCount] = useState(1);\n  const [visible, setVisible] = useState(false);\n  const [oldObj, setOldObj] = useState({});\n\n  const [showEditDeliver, setShowEditDeliver] = useState(false);\n\n  const queryHandle = (currentRequestParams) => {\n    // 查询操作\n    reqParams.current = { ...currentRequestParams };\n    // 触发重新读取数据\n    setReloadListCount(reloadListCount + 1)\n    // console.log('search...');\n  };\n\n  const initReloadList = () => {\n    // 刷新列表, 删除所有查询条件\n    reqParams.current = { page: 0 };\n    setReloadListCount(reloadListCount + 1);\n  }\n\n  const selectedAreaHandle = selectedArea => {\n    // 选择地区后操作\n    console.log(selectedArea);\n  }\n\n  // const selectButtonOnClick = (item, index) => {\n  // 列表选择按钮点击事件\n  //   console.log(index, item);\n  // }\n\n  return (\n    <div>\n      <ChinaAreaSelect selectedAreaHandle={selectedAreaHandle} />\n      <Button onClick={() => setVisible(true)} type=\"link\">发货</Button>\n      {visible ? <UpdateDeliver\n        visible={visible}\n        setVisible={setVisible}\n        oldObj={oldObj}\n        purchaseRecordId={purchaseRecordId}\n        customerId={customerId}\n      ></UpdateDeliver> : null}\n      \n    </div>\n  )\n};\n\nexport default DeliverComponent;\n","import React, { useState, useEffect, useRef } from 'react';\n\n// import ProductsList from '../base_components/products_list';\nimport { PurchaseRecordsRequestGet } from './purchase_records_requests';\n// import CreatePurchaseRecords from './create_purchase_records';\nimport UpdatePurchaseRecords from './update_purchase_records';\n// import { ItemRendererComponent } from './purchase_records_columns_label_config';\nimport { PurchaseRecordsListComponent } from '../base_components/purchase_records_goods_delivery_address/purchase_records_list';\n// 页面到底触发事件\nimport { LoadMoreButton } from '../base_components/load_more_button_conpoment';\n// import { ScrollBottomHandleComponent } from '../base_components/scroll_bottom_handle';\nimport DeliverComponent from '../deliver';\n// 列表编辑 页面\n\nconst judgeHasMore = resp => {\n  if (Object.keys(resp).includes('next')\n    && typeof resp.next === 'string'\n    && resp.next.length > 5) {\n    return 2;\n  }\n  return 1;\n};\n\nconst PurchaseRecordsList = ({ reloadListCount, setReloadListCount, requestParams, purchaseRecordsChange, printerIndex, hasAllPrintCount }) => {\n  const hasMore = useRef(2);\n  const [hasMoreState, setHasMoreState] = useState(2);\n  const [loading, setLoading] = useState(false);\n  const reqParams = useRef({ page: 0 });\n\n  const [purchaseRecordsData, setPurchaseRecordsData] = useState([]);\n  const [purchaseRecordsRequestGetCount, setPurchaseRecordsRequestGetCount] = useState(0);\n  const [prqGetCount, setPrqGetCount] = useState('');\n  const [requesting, setRequesting] = useState(false);\n  // const getRequestCount = useRef(0);\n\n  // const [createPurchaseRecordsVisible, setCreatePurchaseRecordsVisible] = useState(false);\n  const [updatePurchaseRecordsVisible, setUpdatePurchaseRecordsVisible] = useState(false);\n  const [selectedObj, setSelectedObj] = useState({});\n\n  useEffect(() => {\n    // hasAllPrintCount > 0 client端全部更新为已打印\n    if (hasAllPrintCount > 0) {\n      const copyList = [].concat(purchaseRecordsData);\n      for (let index = 0; index < copyList.length; index++) {\n        copyList[index].has_print = true;\n      }\n      console.log(copyList);\n      setPurchaseRecordsData(copyList);\n      purchaseRecordsChange(copyList);   // 订单列表传给父组件\n    }\n  }, [hasAllPrintCount]);\n\n  useEffect(() => {\n    // 加载、更新或创建数据后 重新读取列表\n    reqParams.current = { ...requestParams };\n    reloadListsHandle();\n  }, [reloadListCount]);\n\n  useEffect(() => {\n    // requesting 重新读取数据，解决 useState异步问题\n    if (requesting && !loading && hasMore.current > 1) {\n      setRequesting(false);\n      loadMore();\n    }\n  }, [requesting, hasMore.current, loading]);\n\n  const loadMore = () => {\n    // 读取更多列表\n    // console.log(hasMore.current, loading);\n    console.log('prqGetCount:', prqGetCount, purchaseRecordsRequestGetCount, '; reqParams', reqParams.current);\n    if (hasMore.current > 1 && !loading) {\n      hasMore.current = 1;\n      setLoading(true);\n      setHasMoreState(1);\n      const current_page = Number.isInteger(reqParams.current.page) ? reqParams.current.page + 1 : 1;\n      reqParams.current = { ...reqParams.current, page: current_page };\n      console.log(reqParams.current);\n      const addCount = purchaseRecordsRequestGetCount + 1;\n      console.log(addCount);\n      setPurchaseRecordsRequestGetCount(addCount);\n      setPrqGetCount(prqGetCount + 'n');\n      // console.log(purchaseRecordsRequestGetCount);\n      // setTimeout(() => {\n      //   console.log(purchaseRecordsRequestGetCount);\n      // }, 500)\n\n    } else {\n      console.log('Error state: hasMore is ', hasMore.current, ', loading is ', loading);\n    }\n  };\n\n  const reloadListsHandle = () => {\n    // 重新读取数据\n    reqParams.current = { ...reqParams.current, page: 0 };\n    // console.log(reqParams.current);\n    setPurchaseRecordsData([]);\n    hasMore.current = 2;\n    setHasMoreState(2);\n    setLoading(false);\n    setRequesting(true);\n  };\n\n  const purchaseRecordsGetResponse = resp => {\n    console.log('prqCount: ', prqGetCount);\n    console.log('resp process...', resp);\n    setLoading(false);\n    if (Object.keys(resp).includes('code')\n      && resp.code === 1000\n      && Object.keys(resp).includes('results')\n    ) {\n      const updatedList = purchaseRecordsData.concat(resp.results);\n      setPurchaseRecordsData(updatedList);\n      purchaseRecordsChange(updatedList);   // 订单列表传给父组件\n      hasMore.current = judgeHasMore(resp);   // 判断是否还有更多\n      setHasMoreState(judgeHasMore(resp));\n      console.log(purchaseRecordsRequestGetCount);\n    } else {\n      console.log('Error: get data...');\n    }\n  };\n\n  const itemDetailClick = (purchaseRecordObj, index) => {\n    // 打开详情编辑窗口\n    // console.log(purchaseRecordsData[index]);\n    let selObj = { ...purchaseRecordObj };\n    console.log(selObj, index);\n    // 日期转 moment 时间\n    // selObj.end_time = moment(dateFormat(selObj.end_time), 'YYYY-MM-DD HH:mm:ss');\n    setSelectedObj(selObj);\n    setUpdatePurchaseRecordsVisible(true);\n  };\n\n  const successPrintCurrentRecordHandle = (hasPrintRecordObj, index) => {\n    // 更新打印的状态为true\n    const copyRecordsList = [].concat(purchaseRecordsData);\n    copyRecordsList[index] = hasPrintRecordObj;\n    setPurchaseRecordsData(copyRecordsList);\n  }\n\n  const deliverComponent = (<DeliverComponent />)\n\n  // const testScroll = () => {\n  //   // 测试用\n  //   console.log('prqCount:', prqGetCount, purchaseRecordsRequestGetCount);\n  //   // loadMore();\n  // };\n\n  return (\n    <div>\n      <PurchaseRecordsListComponent\n        purchaseRecordsList={purchaseRecordsData}\n        loadMore={loadMore}\n        hasMore={hasMoreState === 2}\n        infoBottonTips=\"详情编辑\"\n        infoBottonClick={itemDetailClick}\n        deliverComponent={deliverComponent}\n        printerIndex={printerIndex}\n        successPrintCurrentRecordHandle={successPrintCurrentRecordHandle}\n      ></PurchaseRecordsListComponent>\n\n      <PurchaseRecordsRequestGet requestCount={prqGetCount}\n        reqParams={reqParams.current}\n        responseDataHandle={purchaseRecordsGetResponse}\n      ></PurchaseRecordsRequestGet>\n\n      <UpdatePurchaseRecords\n        visible={updatePurchaseRecordsVisible}\n        setVisible={setUpdatePurchaseRecordsVisible}\n        oldObj={selectedObj}\n        reloadListCount={reloadListCount}\n        setReloadListCount={setReloadListCount}\n      ></UpdatePurchaseRecords>\n\n      <LoadMoreButton hasMore={hasMore.current === 2} onClick={loadMore}></LoadMoreButton>\n      {/* <ScrollBottomHandleComponent bottomHandle={loadMore} canHandle={hasMore.current === 2}></ScrollBottomHandleComponent> */}\n    </div>\n  );\n}\n\nPurchaseRecordsList.defaultProps = {\n  reloadListCount: 1,\n  setReloadListCount: (addedNum) => { console.log(addedNum); },\n  requestParams: { page: 0 },\n  purchaseRecordsChange: purchaseRecords => console.log(purchaseRecords),\n  printerIndex: -1,\n  hasAllPrintCount: 0,\n}\n\nexport default PurchaseRecordsList;\n","import React, { useState, useEffect } from 'react';\n\nimport { formKeysLabelsObj } from './purchase_records_columns_label_config';\n\n// 显示查询条件组件\n\nconst PurchaseRecordsQueryParams = ({ paramsObj={} }) => {\n  const [displayQueryFactorStr, setDisplayQueryFactorStr] = useState('');\n\n  useEffect(() => {\n    displayStr();\n  }, [paramsObj])\n\n  const displayStr = () => {\n    // 显示的查询条件 字符串\n    // let retDisplayStr = '查询条件:';\n    let retDisplayStr = '';\n    Object.keys(paramsObj).forEach(element => {\n      if (Object.keys(formKeysLabelsObj).includes(element)) {\n        // 只显示 formKeysLabelsObj 包含的key\n        const currentFactor = ' ' + formKeysLabelsObj[element] + ' = ' + paramsObj[element] + ';';\n        retDisplayStr = retDisplayStr + currentFactor\n      }\n    });\n    if (retDisplayStr.length > 2) {\n      retDisplayStr = '查询条件:' + retDisplayStr;\n      setDisplayQueryFactorStr(retDisplayStr);\n    } else {\n      console.log('查询条件为空')\n      setDisplayQueryFactorStr('');\n    }\n  }\n  return (\n    <div style={{ height: 'auto', width: '100%', padding: '0.1rem 0.2rem' }}>\n      {displayQueryFactorStr.length > 2\n        ? (<p>{displayQueryFactorStr}</p>)\n        : null}\n    </div>\n  )\n};\n\nexport default PurchaseRecordsQueryParams;\n","import React, { useState, useRef, useEffect } from 'react';\n// import { navigate, Link } from 'gatsby';\nimport { Button, Row, Col, Space, Tooltip } from 'antd';\nimport { ReloadOutlined, SearchOutlined, LeftOutlined } from '@ant-design/icons';\n\n// 打印机组件\nimport { SelectPrinterComponent } from '../base_components/lodop/select_printer_component';\n\nimport CreatePurchaseRecords from './create_purchase_records';\nimport PurchaseRecordsQueryDrawerForm from './purchase_records_query_form';\nimport PurchaseRecordsList from './purchase_records_list';\nimport PurchaseRecordsQueryParams from './purchase_records_query_params_display';\nimport { downloadAndSaveExpressList } from '../../assets/common_funcs/express_code_name_handle';\n// PurchaseRecords 入口组件\n\nconst PurchaseRecordsComponent = () => {\n  const [purchaseRecordsData, setPurchaseRecordsData] = useState([]);\n  const [printerIndex, setPrinterIndex] = useState(-1);\n\n  const reqParams = useRef({ page: 0 });\n\n  const [reloadListCount, setReloadListCount] = useState(1);\n\n  const [drawerVisible, setDrawerVisible] = useState(false);\n\n  const [createPurchaseRecordsVisible, setCreatePurchaseRecordsVisible] = useState(false);\n\n  const [hasAllPrintCount, setHasAllPrintCount] = useState(0);\n\n  useEffect(() => {\n    // 下载并保存快递公司列表到本地\n    downloadAndSaveExpressList();\n  }, []);\n  \n  const queryHandle = (currentRequestParams) => {\n    // 查询操作\n    reqParams.current = { ...currentRequestParams };\n    console.log(reqParams.current);\n    // 触发重新读取数据\n    setReloadListCount(reloadListCount + 1)\n    console.log('search...');\n  };\n\n  const initReloadList = () => {\n    // 刷新列表, 删除所有查询条件\n    reqParams.current = { page: 0 };\n    setReloadListCount(reloadListCount + 1);\n  }\n\n  const purchaseRecordsChange = (records) => {\n    // 列表组件传过来的订单列表\n    setPurchaseRecordsData(records);\n  }\n\n  return (\n    <div>\n      <Row>\n        <Col span={24}>\n          <SelectPrinterComponent\n          onChange={setPrinterIndex}\n          purchaseRecordsList={purchaseRecordsData}\n          setPurchaseRecordsList={setPurchaseRecordsData}\n          hasAllPrintCount={hasAllPrintCount}\n          setHasAllPrintCount={setHasAllPrintCount}\n        ></SelectPrinterComponent></Col>\n      </Row>\n      <Row>\n        <Col span={14}>\n          <Space>\n            {/* <Tooltip title=\"返回\">\n              <Link to=\"/logistic\"><LeftOutlined /></Link>\n            </Tooltip> */}\n            <h4>PurchaseRecords</h4>\n            <Tooltip title=\"刷新\">\n              <Button onClick={initReloadList} shape=\"circle\" icon={<ReloadOutlined />}></Button>\n            </Tooltip>\n            <Tooltip title=\"搜索\">\n              <Button onClick={() => setDrawerVisible(true)} shape=\"circle\" icon={<SearchOutlined />}></Button>\n            </Tooltip>\n          </Space>\n        </Col>\n        <Col span={10}>\n          <div style={{ width: '100%', height: 'auto' }}>\n            {/* <Button style={{ float: 'right' }} type=\"link\" onClick={() => navigate('/sendexpressaccount')}>快递帐号设置</Button> */}\n            <Button style={{ float: 'right' }} type=\"link\" onClick={() => setCreatePurchaseRecordsVisible(true)}>新建</Button>\n          </div>\n        </Col>\n      </Row>\n      <Row>\n        <Col span={24}><PurchaseRecordsQueryParams paramsObj={reqParams.current}></PurchaseRecordsQueryParams></Col>\n      </Row>\n      <PurchaseRecordsQueryDrawerForm\n        visible={drawerVisible}\n        setVisible={setDrawerVisible}\n        queryHandle={queryHandle}\n      ></PurchaseRecordsQueryDrawerForm>\n\n      <PurchaseRecordsList\n        reloadListCount={reloadListCount}\n        setReloadListCount={setReloadListCount}\n        requestParams={reqParams.current}\n        purchaseRecordsChange={purchaseRecordsChange}\n        printerIndex={printerIndex}\n        hasAllPrintCount={hasAllPrintCount}\n      ></PurchaseRecordsList>\n\n      <CreatePurchaseRecords\n        visible={createPurchaseRecordsVisible}\n        setVisible={setCreatePurchaseRecordsVisible}\n        reloadListCount={reloadListCount}\n        setReloadListCount={setReloadListCount}\n      ></CreatePurchaseRecords>\n    </div>\n  )\n};\n\nexport default PurchaseRecordsComponent;\n","import React from 'react';\n\nimport SiteLayout from '../components/site_layout';\nimport PurchaseRecordsComponent from '../components/purchase_records';\n\nimport SEO from \"../components/seo\";\n\nconst PurchaseRecordsPage = () => (\n  <SiteLayout>\n    <SEO title='Records'></SEO>\n    <PurchaseRecordsComponent></PurchaseRecordsComponent>\n  </SiteLayout>\n);\n\nexport default PurchaseRecordsPage;\n"],"sourceRoot":""}