"use strict";(self.webpackChunkclient_admin_v102=self.webpackChunkclient_admin_v102||[]).push([[7515],{8837:function(e,t,n){var a=n(7462),r=n(4942),o=n(4925),l=n(1413),c=n(5671),s=n(3144),i=n(136),u=n(8557),d=n(7294),m=n(5900),p=n.n(m),f=function(e){(0,i.Z)(n,e);var t=(0,u.Z)(n);function n(e){var a;(0,c.Z)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=a.props,n=t.disabled,r=t.onChange;n||("checked"in a.props||a.setState({checked:e.target.checked}),r&&r({target:(0,l.Z)((0,l.Z)({},a.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},a.saveInput=function(e){a.input=e};var r="checked"in e?e.checked:e.defaultChecked;return a.state={checked:r},a}return(0,s.Z)(n,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,l=t.className,c=t.style,s=t.name,i=t.id,u=t.type,m=t.disabled,f=t.readOnly,v=t.tabIndex,_=t.onClick,g=t.onFocus,h=t.onBlur,b=t.onKeyDown,y=t.onKeyPress,E=t.onKeyUp,C=t.autoFocus,Z=t.value,O=t.required,k=(0,o.Z)(t,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),x=Object.keys(k).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=k[t]),e}),{}),S=this.state.checked,P=p()(n,l,(e={},(0,r.Z)(e,"".concat(n,"-checked"),S),(0,r.Z)(e,"".concat(n,"-disabled"),m),e));return d.createElement("span",{className:P,style:c},d.createElement("input",(0,a.Z)({name:s,id:i,type:u,required:O,readOnly:f,disabled:m,tabIndex:v,className:"".concat(n,"-input"),checked:!!S,onClick:_,onFocus:g,onBlur:h,onKeyUp:E,onKeyDown:b,onKeyPress:y,onChange:this.handleChange,autoFocus:C,ref:this.saveInput,value:Z},x)),d.createElement("span",{className:"".concat(n,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?(0,l.Z)((0,l.Z)({},t),{},{checked:e.checked}):null}}]),n}(d.Component);f.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}},t.Z=f},1848:function(e,t,n){var a=n(7294),r=n(4325),o=function(e){var t=e.spinning,n=(0,a.useState)(!1),o=n[0],l=n[1],c={display:o?"block":"none"};return(0,a.useEffect)((function(){l(t)}),[t]),a.createElement("div",{className:"overall-loading",style:c},a.createElement(r.Z,{spinning:t,size:"large"}))};o.defaultProps={spinning:!1},t.Z=o},7704:function(e,t,n){n.d(t,{v:function(){return r}});var a=n(7294),r=function(e){var t=e.visible,n=(0,a.useState)(0),r=n[0],o=n[1];return(0,a.useEffect)((function(){if(t>0){var e="undefined"!=typeof document?document.documentElement.scrollTop||document.body.scrollTop:0;o(e)}var n;0===t&&(n=r,"undefined"!=typeof window&&setTimeout((function(){window.scrollTo({top:parseInt(n),behavior:"smooth"})}),500))}),[t]),a.createElement(a.Fragment,null)};r.defaultProps={visible:0}},570:function(e,t,n){n.d(t,{Y:function(){return m},d:function(){return d}});var a=n(3433),r=n(7294),o=n(3765),l=n(8654),c=n(3299),s=n(3606),i=n(2210),u=n(8102),d=function(e){var t=e.visible,n=e.setVisible,d=e.visibleNum,m=e.uploadedHandle,p=(0,r.useState)([]),f=p[0],v=p[1],_=(0,r.useState)(""),g=_[0],h=_[1],b=(0,r.useState)(!1),y=b[0],E=b[1],C={onRemove:function(e){var t=[].concat(f),n=t.indexOf(e);t.splice(n,1),v(t),console.log(t)},onChange:function(e){var t=(0,a.Z)(e.fileList),n=[];t.map((function(e){n.push(e.originFileObj)})),v(n)},beforeUpload:function(e){return!1},filesList:[]};return r.createElement(l.Z,{visible:t===d,title:"上传淘宝订单CSV文件",closable:!1,footer:[r.createElement(c.Z,{key:"upload_csv",onClick:function(){if(h(""),2===f.length){var e=new FormData,t=1;return f.forEach((function(n){e.append("file"+t,n),t+=1})),E(!0),new Promise((function(t,a){(0,u.H)("records-admin/v1/taobaopurchaserecord","post",{},e,5e5).then((function(e){console.log(e),e.code&&1e3===e.code?(o.ZP.success("淘宝订单 CSV 文件上传成功!"),n(0),t(!0)):(o.ZP.error("淘宝订单 CSV 文件上传失败..."),a(!1)),E(!1),m()})).catch((function(e){o.ZP.error("淘宝订单 CSV 文件上传失败, 请检查网络或文件..."),console.log(e),a(!1),E(!1)}))}))}h("必须选择淘宝 订单、商品 2个csv文件")},loading:y},"上传"),r.createElement(c.Z,{key:"cancel_modal",onClick:function(){n(0)},loading:y},"取消")]},r.createElement(s.Z,Object.assign({},C,{maxCount:2,multiple:!0,accept:".csv"}),r.createElement(c.Z,{icon:r.createElement(i.Z,null)},"Select Csv File")),g.length>0?r.createElement("div",null,r.createElement("br",null),r.createElement("p",{style:{color:"red"}},"* ",g)):null)};d.defaultProps={visible:0,setVisible:function(e){return console.log(e)},visibleNum:1,uploadedHandle:function(){return console.log("Uploaded")}};var m=function(e){var t=e.visible,n=e.setVisible,d=e.visibleNum,m=e.uploadedHandle,p=(0,r.useState)([]),f=p[0],v=p[1],_=(0,r.useState)(""),g=_[0],h=_[1],b=(0,r.useState)(!1),y=b[0],E=b[1],C={onRemove:function(e){var t=[].concat(f),n=t.indexOf(e);t.splice(n,1),v(t),console.log(t)},onChange:function(e){var t=(0,a.Z)(e.fileList),n=[];t.map((function(e){n.push(e.originFileObj)})),v(n)},beforeUpload:function(e){return!1},filesList:[]};return r.createElement(l.Z,{visible:t===d,title:"上传淘宝订单CSV文件",closable:!1,footer:[r.createElement(c.Z,{key:"upload_csv",onClick:function(){if(h(""),2===f.length){var e=new FormData,t=1;return f.forEach((function(n){e.append("file"+t,n),t+=1})),E(!0),new Promise((function(t,a){(0,u.H)("records-admin/v1/inittaobaopurchaserecord","post",{},e,2e5).then((function(e){console.log(e),e.code&&1e3===e.code?(o.ZP.success("初始化批量上传淘宝订单 CSV 文件成功!"),n(0),t(!0)):(o.ZP.error("淘宝订单 CSV 文件上传失败..."),a(!1)),E(!1),m()})).catch((function(e){o.ZP.error("淘宝订单 CSV 文件上传失败, 请检查网络或文件..."),console.log(e),a(!1),E(!1)}))}))}h("必须选择淘宝 订单、商品 2个csv文件")},loading:y},"上传"),r.createElement(c.Z,{key:"cancel_modal",onClick:function(){n(0)},loading:y},"取消")]},r.createElement(s.Z,Object.assign({},C,{maxCount:2,multiple:!0,accept:".csv"}),r.createElement(c.Z,{icon:r.createElement(i.Z,null)},"Select Csv File")),g.length>0?r.createElement("div",null,r.createElement("br",null),r.createElement("p",{style:{color:"red"}},"* ",g)):null)};m.defaultProps={visible:0,setVisible:function(e){return console.log(e)},visibleNum:1,uploadedHandle:function(){return console.log("Uploaded")}}},8631:function(e,t,n){n.r(t),n.d(t,{default:function(){return Dt}});var a=n(7294),r=n(4564),o=n(3148),l=n(6452),c=n(7371),s=n(2889),i=n(3299),u=n(4167),d=n(6858),m=n(5861),p=n(7757),f=n.n(p),v=n(6411),_=n(3765),g=n(1413),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},b=n(7041),y=function(e,t){return a.createElement(b.Z,(0,g.Z)((0,g.Z)({},e),{},{ref:t,icon:h}))};y.displayName="RedoOutlined";var E,C=a.forwardRef(y),Z=n(7148),O=function(){return new Promise((function(e,t){var n=!1;if("undefined"!=typeof document&&(n="complete"===document.readyState),n)if(E=(0,Z.Z)()){for(var a=E.GET_PRINTER_COUNT(),r=[],o=0;o<a;o++)r.push(E.GET_PRINTER_NAME(o));e(r)}else _.ZP.error("连接打印服务器失败..."),t("LODOP server connect error...");else _.ZP.error("请等待页面加载完成, 再刷新打印机..."),t("LODOP server connecting...")}))},k=n(5455),x=n(6691),S=n(5604),P=n(8102),j=["printer-admin/v1/defaultprinter"],R=n(160),D=v.Z.Option,H=function(e){var t=e.onChange,n=e.purchaseRecordsList,r=e.hasAllPrintCount,o=e.setHasAllPrintCount,l=(0,a.useState)(null),u=l[0],d=l[1],p=(0,a.useRef)(""),g=(0,a.useState)([]),h=g[0],b=g[1],y=(0,a.useState)([]),E=y[0],Z=y[1],S=function(){(0,x.T)(),O().then(function(){var e=(0,m.Z)(f().mark((function e(t){var n,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],a=0;a<t.length;a++)n.push({label:t[a],value:a});b(n),_.ZP.info("打印机列表刷新成功!");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),b([])}))};(0,a.useEffect)((function(){"undefined"!=typeof document&&"complete"===document.readyState?S():_.ZP.info("请网页加载完成后刷新打印机!!!")}),[]),(0,a.useEffect)((function(){var e,t=k.Z.pagesName.purchaseRecords;(e=t,new Promise((function(t,n){var a=[].concat(j)[0];(0,P.H)(a,"get",{},{}).then((function(a){if(Object.keys(a).includes("results")&&a.results.length>0){for(var r=a.results,o=0;o<r.length;o++){var l=r[o];if(l.page_name===e)return void t(l.printer_name)}n("None default printer...")}else n("Error network...")})).catch((function(e){console.log(e),n(e)}))}))).then((function(e){e&&h.length>0&&H(function(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(a.label===t)return a.value}return null}(h,e))})).catch((function(e){return console.log(e)}))}),[h]),(0,a.useEffect)((function(){Z(function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];a.has_print||t.push(a)}return console.log(t),t}(n))}),[n]);var H=function(e){console.log(e),d(e),h.length>e&&h[e]instanceof Object&&Object.keys(h[e]).includes("label")&&(p.current=h[e].label),t(e)},w=function(e){o(r+1)};return a.createElement("div",{style:{width:"100%",height:"auto",margin:"10px 2px"}},a.createElement(c.Z,null,a.createElement(v.Z,{placeholder:"请选择打印机",onChange:H,value:u,style:{minWidth:120,maxWidth:220}},h.map((function(e,t){return a.createElement(D,{key:t.toString(),value:e.value},e.label)}))),a.createElement(i.Z,{disabled:E.length<1,onClick:function(){var e,t={page_name:k.Z.pagesName.purchaseRecords,printer_name:p.current};(e=t,new Promise((function(t,n){var a=[].concat(j)[0];(0,P.H)(a,"post",{},e).then((function(e){t(e)})).catch((function(e){console.log(e),n(e)}))}))).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),(0,R.Y)(E,u,w)},type:"primary"},"打印(未打印)"),a.createElement(s.Z,{title:"刷新打印机"},a.createElement(i.Z,{shape:"circle",icon:a.createElement(C,null),onClick:S}))))};H.defaultProps={onChange:function(e){return console.log(e)},purchaseRecordsList:[],hasAllPrintCount:0,setHasAllPrintCount:function(e){return console.log(e)}};var w=n(8654),q=n(6306),L=n(1380),I=function(e){var t=e.modalState,n=e.setModalState,r=e.selectCustomerHandle;e.clickCreatedCustomerHandle;return a.createElement(a.Fragment,null,a.createElement(w.Z,{visible:t,title:"选择顾客",closable:!1,footer:[a.createElement(i.Z,{key:"back",onClick:function(){n(!1)}},"取消")]},a.createElement(L.Z,{selectButtonOnClick:r})))};I.defaultProps={modalState:!1,setModalState:function(e){return console.log(e)},selectCustomerHandle:function(e){console.log(e)},clickCreatedCustomerHandle:function(e){console.log(e)}};var A=n(1152),N=n(4942),F=n(7462),M=n(8837),K=n(5900),T=n.n(K),V=n(2275),B=n(5766),Y=n(2525),U=a.createContext(null),$=U.Provider,W=U,G=a.createContext(null),z=G.Provider,Q=n(200),X=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},J=function(e,t){var n,r=a.useContext(W),o=a.useContext(G),l=a.useContext(Y.E_),c=l.getPrefixCls,s=l.direction,i=a.useRef(),u=(0,V.sQ)(t,i),d=(0,a.useContext)(B.aM).isFormItemInput;a.useEffect((function(){(0,Q.Z)(!("optionType"in e),"Radio","`optionType` is only support in Radio.Group.")}),[]);var m=e.prefixCls,p=e.className,f=e.children,v=e.style,_=X(e,["prefixCls","className","children","style"]),g=c("radio",m),h="button"===((null==r?void 0:r.optionType)||o)?"".concat(g,"-button"):g,b=(0,F.Z)({},_);r&&(b.name=r.name,b.onChange=function(t){var n,a;null===(n=e.onChange)||void 0===n||n.call(e,t),null===(a=null==r?void 0:r.onChange)||void 0===a||a.call(r,t)},b.checked=e.value===r.value,b.disabled=e.disabled||r.disabled);var y=T()("".concat(h,"-wrapper"),(n={},(0,N.Z)(n,"".concat(h,"-wrapper-checked"),b.checked),(0,N.Z)(n,"".concat(h,"-wrapper-disabled"),b.disabled),(0,N.Z)(n,"".concat(h,"-wrapper-rtl"),"rtl"===s),(0,N.Z)(n,"".concat(h,"-wrapper-in-form-item"),d),n),p);return a.createElement("label",{className:y,style:v,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},a.createElement(M.Z,(0,F.Z)({},b,{type:"radio",prefixCls:h,ref:u})),void 0!==f?a.createElement("span",null,f):null)},ee=a.forwardRef(J);ee.displayName="Radio";var te=ee,ne=n(9439),ae=n(1637),re=n(2592);var oe=a.forwardRef((function(e,t){var n=a.useContext(Y.E_),r=n.getPrefixCls,o=n.direction,l=a.useContext(re.Z),c=(0,ae.Z)(e.defaultValue,{value:e.value}),s=(0,ne.Z)(c,2),i=s[0],u=s[1];return a.createElement($,{value:{onChange:function(t){var n=i,a=t.target.value;"value"in e||u(a);var r=e.onChange;r&&a!==n&&r(t)},value:i,disabled:e.disabled,name:e.name,optionType:e.optionType}},function(){var n,c=e.prefixCls,s=e.className,u=void 0===s?"":s,d=e.options,m=e.buttonStyle,p=void 0===m?"outline":m,f=e.disabled,v=e.children,_=e.size,g=e.style,h=e.id,b=e.onMouseEnter,y=e.onMouseLeave,E=r("radio",c),C="".concat(E,"-group"),Z=v;d&&d.length>0&&(Z=d.map((function(e){return"string"==typeof e||"number"==typeof e?a.createElement(te,{key:e.toString(),prefixCls:E,disabled:f,value:e,checked:i===e},e):a.createElement(te,{key:"radio-group-value-options-".concat(e.value),prefixCls:E,disabled:e.disabled||f,value:e.value,checked:i===e.value,style:e.style},e.label)})));var O=_||l,k=T()(C,"".concat(C,"-").concat(p),(n={},(0,N.Z)(n,"".concat(C,"-").concat(O),O),(0,N.Z)(n,"".concat(C,"-rtl"),"rtl"===o),n),u);return a.createElement("div",(0,F.Z)({},function(e){return Object.keys(e).reduce((function(t,n){return!n.startsWith("data-")&&!n.startsWith("aria-")&&"role"!==n||n.startsWith("data-__")||(t[n]=e[n]),t}),{})}(e),{className:k,style:g,onMouseEnter:b,onMouseLeave:y,id:h,ref:t}),Z)}())})),le=a.memo(oe),ce=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},se=function(e,t){var n=a.useContext(Y.E_).getPrefixCls,r=e.prefixCls,o=ce(e,["prefixCls"]),l=n("radio",r);return a.createElement(z,{value:"button"},a.createElement(te,(0,F.Z)({prefixCls:l},o,{type:"radio",ref:t})))},ie=a.forwardRef(se),ue=te;ue.Button=ie,ue.Group=le;var de=ue,me=n(5146),pe=n(2184),fe=v.Z.Option,ve={width:180},_e={1:["negative","negative"],2:["negative","positive"],3:["positive","negative"],4:["positive","positive"]},ge=function(e){var t=null,n=null,a=null,r=null;if(!e)return{sph:t,cyl:n,axi:a,add:r};var o=e.replace(/(^\s*)|(\s*$)/g,"");if(o.indexOf("ADD")>1){var l=o.split("ADD");r=l[1].replace(/(^\s*)|(\s*$)/g,"").replace(":",""),o=l[0].replace(/(^\s*)|(\s*$)/g,"")}if(o.length>0)if(o.indexOf("-",4)>5){t=o.slice(0,o.indexOf("-",4)).replace(/(^\s*)|(\s*$)/g,"");var c=o.slice(o.indexOf("-",4)).split("*");n=c[0].replace(/(^\s*)|(\s*$)/g,""),a=parseInt(c[1].replace(/(^\s*)|(\s*$)/g,""))}else t=o.replace(/(^\s*)|(\s*$)/g,"");return{sph:t,cyl:n,axi:a,add:r}},he=function(e){return e&&Math.abs(parseFloat(e))>0},be=function(e){var t={lackPd:0,lackAxiR:0,lackAxiL:0};e.pd.toString().length<2&&(t.lackPd=1);var n=e.axiR,a=e.axiL;return e.cylR&&Math.abs(parseFloat(e.cylR))>0&&(n?(""!==n&&null!=n||(t.lackAxiR=1),isNaN(n)&&(t.lackAxiR=1)):t.lackAxiR=1),e.cylL&&Math.abs(parseFloat(e.cylL))>0&&(a?(""!==a&&null!=a||(t.lackAxiL=1),isNaN(a)&&(t.lackAxiL=1)):t.lackAxiL=1),t},ye=function(e){var t=e.value,n=e.onChange,r=e.selectType,o=void 0===r?0:r,l=e.positiveNegative,c=void 0===l?"negative":l,s=e.placeholder,i=void 0===s?"请选择球镜":s,u=function(e,t){void 0===e&&(e="negative"),void 0===t&&(t=90);for(var n=[],a="negative"===e?"-":"+",r=0;r<t;r++){var o=a+(.25*r).toFixed(2);n.push({label:o,value:o})}return n}(c,[90,25,17][o]);return a.createElement(v.Z,{style:ve,value:t,onChange:n,placeholder:i},u.map((function(e){return a.createElement(fe,{key:e.value,value:e.value},e.label)})))},Ee=["取消 重新输入, 确认 直接提交!","取消 重新输入, 确认 直接提交!(删除散光光度)"],Ce=["未输入瞳距","未输入散光轴位","未输入瞳距和散光轴位"],Ze=function(e){var t=e.sourceDiopterObj,n=e.selectedHandle,r=e.cancelHandle,o=A.Z.useForm()[0],l=(0,a.useState)(!1),s=l[0],u=l[1],d=(0,a.useState)(1),m=d[0],p=d[1],f=(0,a.useState)("negative"),v=f[0],_=f[1],g=(0,a.useState)("negative"),h=g[0],b=g[1],y=(0,a.useState)(Ee[0]),E=y[0],C=y[1],Z=(0,a.useState)(Ce[0]),O=Z[0],x=Z[1],S=(0,a.useState)(!1),P=S[0],j=S[1],R=(0,a.useRef)({diopter_l:"",diopter_r:"",pupillary_distance:""});(0,a.useEffect)((function(){j(!1);var e=ge(t.diopter_r),n=ge(t.diopter_l),a=e.add?e.add:n.add;a&&j(!0);var r={sphR:e.sph,cylR:e.cyl,axiR:e.axi,sphL:n.sph,cylL:n.cyl,axiL:n.axi,add:a,pd:t.pupillary_distance};o.setFieldsValue(r)}),[t]);var D=a.createElement(A.Z.Item,{label:"ADD",name:"add"},a.createElement(ye,{selectType:2,positiveNegative:"positive",placeholder:"请选择ADD"})),H=a.createElement(A.Z.Item,null,a.createElement(i.Z,{type:"link",onClick:function(){return j(!0)}},"ADD..."));return a.createElement("div",null,a.createElement("h6",null,"正负光度:  ",a.createElement(de.Group,{onChange:function(e){console.log(e.target.value),p(e.target.value);var t=_e[e.target.value];_(t[0]),b(t[1])},value:m},a.createElement(de,{value:1},"-/-"),a.createElement(de,{value:2},"-/+"),a.createElement(de,{value:3},"+/-"),a.createElement(de,{value:4},"+/+"))),a.createElement(q.Z,null),a.createElement(A.Z,Object.assign({form:o,name:"diopters-form",onFinish:function(e){var t,a,r,o;R.current=(a=(t=e).sphR?t.sphR:"",r=t.sphL?t.sphL:"",o=be(t),he(t.cylR)&&0===o.lackAxiR&&(a=(a=""===a?"-0.00":a)+" "+t.cylR+" * "+t.axiR),he(t.cylL)&&0===o.lackAxiR&&(r=(r=""===r?"-0.00":r)+" "+t.cylL+" * "+t.axiL),he(t.add)&&(a=a+" ADD:"+t.add,r=r+" ADD:"+t.add),{diopter_r:a,diopter_l:r,pupillary_distance:t.pd});var l=be(e),c=-1;if(l.lackPd>0||l.lackAxiR>0||l.lackAxiL>0){var s=l.lackPd>0,i=l.lackAxiR>0,d=l.lackAxiL>0;(c=(c=s?0:c)>-1?i||d?2:c:i||d?1:c)>-1&&(x(Ce[c]),C(0===c?Ee[0]:Ee[1]),u(!0))}else n(R.current)}},k.Z.formCommonStyle.layoutForm),a.createElement(A.Z.Item,{label:"光度R"},a.createElement(A.Z.Item,{name:"sphR"},a.createElement(ye,{selectType:0,positiveNegative:v})),a.createElement(A.Z.Item,{name:"cylR"},a.createElement(ye,{selectType:1,positiveNegative:h,placeholder:"请选择柱镜"})),a.createElement(A.Z.Item,{name:"axiR"},a.createElement(me.Z,{min:1,max:180,style:{width:"8rem"},placeholder:"请输入轴位"}))),a.createElement(A.Z.Item,{label:"光度L"},a.createElement(A.Z.Item,{name:"sphL"},a.createElement(ye,{selectType:0,positiveNegative:v})),a.createElement(A.Z.Item,{name:"cylL"},a.createElement(ye,{selectType:1,positiveNegative:h,placeholder:"请选择柱镜"})),a.createElement(A.Z.Item,{name:"axiL"},a.createElement(me.Z,{min:1,max:180,style:{width:"8rem"},placeholder:"请输入轴位"}))),a.createElement(A.Z.Item,{label:"PD",name:"pd"},a.createElement(pe.Z,{placeholder:"请输入瞳距",style:{maxWidth:"10rem"}})),P?D:H,a.createElement(A.Z.Item,k.Z.formCommonStyle.tailFormItemLayout,a.createElement(c.Z,null,a.createElement(i.Z,{type:"primary",htmlType:"submit"},"确定"),a.createElement(i.Z,{htmlType:"button",onClick:r},"取消")))),a.createElement(w.Z,{title:O,visible:s,onOk:function(){u(!1),n(R.current)},onCancel:function(){return u(!1)},okText:"确认",cancelText:"取消"},a.createElement("p",null,E)))};Ze.defaultProps={sourceDiopterObj:{diopter_l:"",diopter_r:"",pupillary_distance:""},selectedHandle:function(e){return console.log(e)},cancelHandle:function(){return console.log("Cancel select diopters...")}};var Oe=function(e){var t=e.sourceDiopterObj,n=e.modalState,r=e.setModalState,o=e.selectHandle;return a.createElement(a.Fragment,null,a.createElement(w.Z,{visible:n,title:"选择光度",closable:!1,footer:null},a.createElement(Ze,{sourceDiopterObj:t,selectedHandle:o,cancelHandle:function(){return r(!1)}})))};Oe.defaultProps={sourceDiopterObj:{diopter_l:"",diopter_r:"",pupillary_distance:""},modalState:!1,setModalState:function(e){return console.log(e)},selectCustomerHandle:function(e){console.log(e)},clickCreatedCustomerHandle:function(e){console.log(e)}};var ke=n(7047),xe=n(6079),Se=n(2486),Pe=(n(3419),xe.Z.RangePicker),je=["id","input_staff_id","latest_modify_staff_id","customer_id","customer_name","product_title","diopter_r","diopter_l","pupillary_distance","receive_address","products_quantity","purchase_amount","products_cost","sale_platform","order_state","pay_table_id","pay_platform","add_time","update_time","explains","explains_customer","has_print","image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5"],Re=["id","input_staff_id","latest_modify_staff_id","customer_name","group_purchase_commander_id","group_purchase_commander_name","diopter_r","diopter_l","pupillary_distance","receive_address","pay_table_id","add_time","update_time","has_print","image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5"],De=["input_staff_id","latest_modify_staff_id","customer_id","group_purchase_commander_id","group_purchase_commander_name","receive_address","image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5"],He={id:"订单ID",input_staff_id:"订单创建管理员",latest_modify_staff_id:"最后修改管理员",customer_id:"顾客ID",customer_name:"顾客",group_purchase_commander_id:"团购团长ID",group_purchase_commander_name:"团购团长",product_title:"商品标题",diopter_r:"光度R",diopter_l:"光度L",pupillary_distance:"瞳距(PD)",receive_address:"收货地址",products_quantity:"商品数量",purchase_amount:"订单金额",products_cost:"商品成本",sale_platform:"销售平台",order_state:"订单状态",pay_table_id:"支付表ID",pay_platform:"支付方式",add_time:"新建时间",update_time:"更新时间",explains:"商家备注",explains_customer:"顾客留言",has_print:"打印状态",image_cos_name1:"订单图片1",image_cos_name2:"订单图片2",image_cos_name3:"订单图片3",image_cos_name4:"订单图片4",image_cos_name5:"订单图片5",range_add_time:"日期",add_time_start:"开始时间",add_time_end:"结束时间"},we=a.createElement(Pe,null),qe=a.createElement(xe.Z,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss"}),Le={has_print:a.createElement(Se.A,{options:[{value:0,label:"未打印"},{value:1,label:"已打印"},{value:2,label:"全部"}]}),sale_platform:a.createElement(Se.A,{options:[{value:0,label:"未知或未输入"},{value:1,label:"门店"},{value:2,label:"淘宝"},{value:3,label:"小程序"},{value:4,label:"微信-方灵芝"},{value:5,label:"微信-展望眼镜"}]}),order_state:a.createElement(Se.A,{options:[{value:0,label:"订单交易完成"},{value:1,label:"未付款"},{value:2,label:"定制中"},{value:3,label:"已发货"},{value:4,label:"售后处理中"}]}),pay_platform:a.createElement(Se.A,{options:[{value:0,label:"未知"},{value:1,label:"微信支付"},{value:2,label:"支付宝支付"},{value:3,label:"刷卡"},{value:4,label:"现金"}]}),range_add_time:we,add_time_start:qe,add_time_end:qe},Ie=function(e){return{customer_name:{buttonTips:"选择顾客",clickMethod:function(){return e(1)}},pupillary_distance:{buttonTips:"选择光度瞳距",clickMethod:function(){return e(3)}}}},Ae=["id","customer_name","sale_platform","order_state","range_add_time","has_print"],Ne={id:0,input_staff_id:0,latest_modify_staff_id:0,customer_id:0,customer_name:"",group_purchase_commander_id:0,product_title:"",diopter_r:"",diopter_l:"",pupillary_distance:"",receive_address:"",products_quantity:0,purchase_amount:0,products_cost:0,sale_platform:0,order_state:0,pay_table_id:0,pay_platform:0,add_time:"",update_time:"",explains:"",explains_customer:"",has_print:2,image_cos_name1:"",image_cos_name2:"",image_cos_name3:"",image_cos_name4:"",image_cos_name5:""},Fe=["image_cos_name"],Me=["records-admin/v1/purchaserecord","records-admin/v1/purchaserecordproducts","records-admin/v1/purchaserecorddeliveryaddress"],Ke=function(e){var t=e.requestCount,n=e.reqParams,r=e.responseDataHandle,o=Me[0];return a.createElement(S.Z,{responseDataHandle:r,api:o,method:"get",reqParams:n,reqObject:{},requestCount:t.length})};Ke.defaultProps={requestCount:0,reqParams:{},responseDataHandle:function(e){console.log(e)}};var Te=function(e){var t=e.requestCount,n=e.reqObject,r=e.responseDataHandle,o=[].concat(Me)[0];return a.createElement(S.Z,{responseDataHandle:r,api:o,method:"post",reqParams:{},reqObject:n,requestCount:t})};Te.defaultProps={requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)}};var Ve=function(e){var t=e.requestCount,n=e.reqObject,r=e.responseDataHandle,o=e.id,l=[].concat(Me)[0]+"/"+o;return a.createElement(S.Z,{responseDataHandle:r,api:l,method:"put",reqParams:{},reqObject:n,requestCount:t})};Ve.defaultProps={requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)},id:0};var Be=function(e){var t=e.requestCount,n=e.responseDataHandle,r=e.id,o=[].concat(Me)[0]+"/"+r;return a.createElement(S.Z,{responseDataHandle:n,api:o,method:"delete",reqParams:{},reqObject:{},requestCount:t})};Be.defaultProps={requestCount:0,responseDataHandle:function(e){console.log(e)},id:0};var Ye=n(5071),Ue=["id","group_purchase_commander_id","group_purchase_commander_name","pay_table_id","add_time","update_time","input_staff_id","latest_modify_staff_id","customer_id","receive_address","explains_customer","image_cos_name1","image_cos_name2","image_cos_name3","image_cos_name4","image_cos_name5","has_print"],$e=function(e){var t=e.visible,n=e.setVisible,r=e.reloadListCount,o=e.setReloadListCount,l=(0,a.useRef)({}),c=(0,a.useRef)({createCount:0}),s=(0,a.useState)({diopter_l:"",diopter_r:"",pupillary_distance:""}),i=s[0],u=s[1],d=(0,a.useState)({}),m=d[0],p=d[1],f=(0,a.useState)(0),v=f[0],g=f[1],h=(0,a.useState)(0),b=h[0],y=h[1],E=(0,a.useRef)({}),C=(0,a.useRef)({}),Z=(0,a.useState)(0),O=Z[0],k=Z[1];(0,a.useEffect)((function(){t&&(l.current={},C.current={},c.current={createCount:c.current.createCount+1},g(v+1),u({diopter_l:"",diopter_r:"",pupillary_distance:""}))}),[t]);var x=function(){n(!1)};return a.createElement(a.Fragment,null,a.createElement(w.Z,{visible:t,title:"PurchaseRecords 新建",closable:!1,footer:null},a.createElement("div",{style:{width:"100%",height:"auto",textAlign:"center"}},a.createElement(ke.DX,{oldObj:c.current,maxImagesNum:5,imageKeyName:Fe[0],onChange:function(e){l.current=Object.assign({},e)}})),a.createElement(q.Z,null),a.createElement(Ye.y,{columns:je,disabledKeys:Re,notShowKeys:Ue,formKeyLabelObj:He,formKeySelectComponentsObj:Le,formKeysItemButtonObj:Ie(k),onFinish:function(e){var t=Object.assign({},e,l.current,{customer_id:C.current.id});delete t.customer_name,E.current=t,console.log(E.current),y(b+1)},cancelHandle:x,showDeleteButton:!1,updateFormObj:m,formInitialObj:Ne,initFormCount:v}),a.createElement(Te,{requestCount:b,reqObject:E.current,responseDataHandle:function(e){Object.keys(e).includes("code")&&1e3===e.code?(x(),o(r+1)):_.ZP.error("网络错误...")}}),a.createElement(I,{modalState:1===O,setModalState:k,selectCustomerHandle:function(e){console.log(e,e.name);var t=e.name;Object.keys(e).includes("wx_info")&&(t=t+"("+e.wx_info.wx_nickname+")"),C.current=e,p({customer_name:t}),k(!1)}}),a.createElement(Oe,{sourceDiopterObj:i,modalState:3===O,setModalState:k,selectHandle:function(e){u(e),p(e),k(0)}})))};$e.defaultProps={visible:!1,setVisible:function(e){return console.log(e)},reloadListCount:0,setReloadListCount:function(e){return console.log(e)}};var We=$e,Ge=n(8146),ze=["customer_name"],Qe=function(e){var t=e.visible,n=e.setVisible,r=e.queryHandle,o=(0,a.useRef)(0),l=(0,a.useState)(0),c=l[0],s=l[1],i=(0,a.useState)({}),u=i[0],d=i[1],m=(0,a.useState)(!1),p=m[0],f=m[1],v=function(){s(c+1),n(!1)};return a.createElement(a.Fragment,null,a.createElement(Ge.Z,{title:"销售记录查询",width:"100%",height:"400px",placement:"top",onClose:v,visible:t,bodyStyle:{paddingBottom:80},footer:null},a.createElement(Ye.y,{columns:Ae,disabledKeys:ze,formKeyLabelObj:He,formKeySelectComponentsObj:Le,formKeysItemButtonObj:Ie(f),onFinish:function(e){var t=Object.assign({},e),n={},a=e.id?parseInt(e.id):0;if(a>0)n.id=a;else{o.current>0&&(n.customer_id=o.current);var l=t.sale_platform;l>0&&l<6&&(n.sale_platform=l);var c=t.order_state;c>0&&c<5&&(n.order_state=c);var s=t.range_add_time;Array.isArray(s)&&2===s.length&&(n.add_time_start=s[0].format("YYYY-MM-DD"),n.add_time_end=s[1].format("YYYY-MM-DD"));var i=t.has_print;0!==i&&1!==i||(n.has_print=i)}r(n),setTimeout((function(){v()}),50)},cancelHandle:function(){return n(!1)},showDeleteButton:!1,formInitialObj:Ne,initFormCount:c,updateFormObj:u})),a.createElement(I,{modalState:p,setModalState:f,selectCustomerHandle:function(e){console.log(e,e.name),o.current=e.id;var t=e.name;Object.keys(e).includes("wx_info")&&(t=t+"("+e.wx_info.wx_nickname+")"),d({customer_name:t}),f(!1)}}))};Qe.defaultProps={visible:!1,setVisible:function(e){console.log(e)},queryHandle:function(e){console.log(e)}};var Xe=Qe,Je=n(1848),et=n(8532),tt=function(e){var t=e.visible,n=e.setVisible,r=e.oldObj,o=e.successDeletedOrUpdated,l=(0,a.useState)(!1),c=l[0],s=l[1],i=(0,a.useRef)({}),u=(0,a.useState)({diopter_l:"",diopter_r:"",pupillary_distance:""}),d=u[0],m=u[1],p=(0,a.useState)({}),f=p[0],v=p[1],g=(0,a.useState)(0),h=g[0],b=g[1],y=(0,a.useState)(0),E=y[0],C=y[1],Z=(0,a.useRef)({}),O=(0,a.useState)(0),k=O[0],x=O[1],S=(0,a.useState)(0),P=S[0],j=S[1];(0,a.useEffect)((function(){t>0&&R()}),[t,r]);var R=function(){b(h+1);var e="",t=0;try{Object.keys(r).includes("customer_info")&&(e=(0,et.Q)(r.customer_info)),t=r.has_print?1:0}catch(a){console.error(a),console.log(r)}var n=Object.assign({},r,{customer_name:e,has_print:t});v(n),m({diopter_r:n.diopter_r,diopter_l:n.diopter_l,pupillary_distance:n.pupillary_distance})};return a.createElement(w.Z,{visible:t,title:"PurchaseRecords",closable:!1,footer:null},a.createElement(Je.Z,{spinning:c}),a.createElement("div",{style:{width:"100%",height:"auto",textAlign:"center"}},a.createElement(ke.DX,{maxImagesNum:5,imageKeyName:"image_cos_name",oldObj:r,onChange:function(e){i.current=e}})),a.createElement(q.Z,null),a.createElement(Ye.y,{columns:je,disabledKeys:Re,notShowKeys:De,formKeyLabelObj:He,formKeySelectComponentsObj:Le,formKeysItemButtonObj:Ie(j),onFinish:function(e){var t=1===e.has_print,n=Object.assign({},e,i.current,{customer_id:f.customer_id,has_print:t});console.log(n),s(!0),Z.current=n,C(E+1)},cancelHandle:function(){return n(0)},showDeleteButton:!0,deleteHandle:function(){Object.keys(r).includes("id")&&r.id>0?(x(k+1),o({method:"delete",result:null})):_.ZP.warn("修改顾客后不能直接删除, 关闭并重新打开再删除")},updateFormObj:f,formInitialObj:{},initFormCount:h}),a.createElement(Ve,{requestCount:E,reqObject:Z.current,responseDataHandle:function(e){s(!1),Object.keys(e).includes("code")&&1e3===e.code?(_.ZP.success("修改成功"),o({method:"update",result:e}),n(0)):_.ZP.error("网络错误...")},id:Z.current.id}),a.createElement(Be,{requestCount:k,responseDataHandle:function(e){return n(0)},id:r.id}),a.createElement(I,{modalState:1===P,setModalState:j,selectCustomerHandle:function(e){console.log(e,e.name);var t=e.name;Object.keys(e).includes("wx_info")&&(t=t+"("+e.wx_info.wx_nickname+")"),v({customer_info:e,customer_id:e.id,customer_name:t}),j(!1)}}),a.createElement(Oe,{sourceDiopterObj:d,modalState:3===P,setModalState:j,selectHandle:function(e){m(e),v(e),j(0)}}))};tt.defaultProps={visible:!1,setVisible:function(e){return console.log(e)},oldObj:{}};var nt=tt,at=n(9308),rt=n(5765),ot=n(4975),lt=n(5971),ct=function(e){var t=e.initAreaList,n=e.selectedAreaHandle;return a.createElement(lt.AreaSelect,{onChange:function(e){console.log(e),n(e)},level:2,data:ot.pcaa,defaultArea:t})};ct.defaultProps={initAreaObj:[],selectedAreaHandle:function(e){return console.log(e)}};var st=["id","express_company_code","express_number"],it=[],ut=["password","id"],dt={id:"ID",express_company_code:"快递公司",express_number:"快递单号",add_time:"创建时间",update_time:"更新时间",explains:"说明"},mt=function(e){var t=e.value,n=void 0===t?"":t,r=e.onChange,o=void 0===r?function(e){return console.log(e)}:r,l=(0,a.useState)([]),c=l[0],s=l[1];return(0,a.useEffect)((function(){new Promise((function(e,t){(0,P.H)("kdniao-admin/v1/kdniaoexpresscompanycodes","get",{},{}).then((function(t){e(t)})).catch((function(e){console.log(e),t(e)}))})).then((function(e){for(var t=e.results,n=[],a=0;a<t.length;a++){var r=t[a];n.push({value:r.express_company_code,label:r.express_company_name})}s(n)})).catch((function(e){console.log(e),s([])}))}),[]),a.createElement(Se.A,{options:c,value:n,onChange:o})},pt={express_company_code:a.createElement(mt,null)},ft={password:[{required:!0,message:"Please input Password!"}]},vt=["pic"],_t=["delivery-address/v1/customerdeliveryaddress"],gt=function(e){var t=e.requestCount,n=e.reqObject,r=e.responseDataHandle,o=e.id,l=[].concat(_t)[0]+"/"+o;return a.createElement(S.Z,{responseDataHandle:r,api:l,method:"put",reqParams:{},reqObject:n,requestCount:t})};gt.defaultProps={requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)},id:0};var ht=function(e){var t=e.requestCount,n=e.responseDataHandle,r=e.id,o=[].concat(_t)[0]+"/"+r;return a.createElement(S.Z,{responseDataHandle:n,api:o,method:"delete",reqParams:{},reqObject:{},requestCount:t})};ht.defaultProps={requestCount:0,responseDataHandle:function(e){console.log(e)},id:0};var bt=function(e){e.visible;var t=e.setVisible,n=e.oldObj,r=e.purchaseRecordId,o=e.customerId,l=(0,a.useState)([]),c=(l[0],l[1]),s=((0,a.useRef)({}),(0,a.useState)("")),i=(s[0],s[1],(0,a.useState)({})),u=i[0],d=i[1],m=(0,a.useState)(0),p=m[0],f=m[1],v=(0,a.useState)(0),g=v[0],h=(v[1],(0,a.useRef)({})),b=(0,a.useState)(0),y=b[0];b[1];(0,a.useEffect)((function(){E()}),[n]);var E=function(){f(p+1),d(Object.assign({},n));for(var e=[],t=vt[0],a=1;a<10;a++){var r=t+a,o=r+"_url",l=n[r],s=n[o];"string"==typeof l&&l.length>5&&e.push({cosNameKey:r,cosName:l,urlKey:o,url:s})}c(e)};return a.createElement(a.Fragment,null,a.createElement(q.Z,null),a.createElement(Ye.p,{columns:st,disabledKeys:it,notShowKeys:ut,formKeyLabelObj:dt,formKeySelectComponentsObj:pt,onFinish:function(e){var n=Object.assign({},e,{purchase_record_id:r,customer_id:o});console.log(n),h.current=n,t(!1)},cancelHandle:function(){return t(!1)},showDeleteButton:!1,deleteHandle:function(){console.log("Delete handle")},updateFormObj:u,formInitialObj:{},rulesObj:ft,initFormCount:p}),a.createElement(gt,{requestCount:g,reqObject:h.current,responseDataHandle:function(e){Object.keys(e).includes("code")&&1e3===e.code?(_.ZP.success("修改成功"),t(!1)):_.ZP.error("网络错误...")},id:u.id}),a.createElement(ht,{requestCount:y,responseDataHandle:function(e){return t(!1)},id:u.id}))};bt.defaultProps={visible:!1,setVisible:function(e){return console.log(e)},oldObj:{},purchaseRecordId:0,customerId:0};var yt=bt,Et=function(e){e.selectButtonOnClick;var t=e.purchaseRecordId,n=void 0===t?0:t,r=e.customerId,o=void 0===r?0:r,l=((0,a.useRef)({page:0}),(0,a.useState)(1)),c=(l[0],l[1],(0,a.useState)(!1)),s=c[0],u=c[1],d=(0,a.useState)({}),m=d[0],p=(d[1],(0,a.useState)(!1));p[0],p[1];return a.createElement("div",null,a.createElement(ct,{selectedAreaHandle:function(e){console.log(e)}}),a.createElement(i.Z,{onClick:function(){return u(!0)},type:"link"},"发货"),s?a.createElement(yt,{visible:s,setVisible:u,oldObj:m,purchaseRecordId:n,customerId:o}):null)},Ct=n(7704),Zt=function(e){return Object.keys(e).includes("next")&&"string"==typeof e.next&&e.next.length>5?2:1},Ot=function(e){var t=e.reloadListCount,n=(e.setReloadListCount,e.requestParams),r=e.purchaseRecordsChange,o=e.printerIndex,l=e.hasAllPrintCount,c=(0,a.useRef)(2),s=(0,a.useState)(2),i=s[0],u=s[1],d=(0,a.useState)(!1),m=d[0],p=d[1],f=(0,a.useRef)({page:0}),v=(0,a.useState)([]),_=v[0],g=v[1],h=(0,a.useState)(0),b=h[0],y=h[1],E=(0,a.useState)(""),C=E[0],Z=E[1],O=(0,a.useState)(!1),k=O[0],x=O[1],S=(0,a.useState)(0),P=S[0],j=S[1],R=(0,a.useState)({}),D=R[0],H=R[1];(0,a.useEffect)((function(){if(l>0){for(var e=[].concat(_),t=0;t<e.length;t++)e[t].has_print=!0;console.log(e),g(e),r(e)}}),[l]),(0,a.useEffect)((function(){f.current=Object.assign({},n),q()}),[t]),(0,a.useEffect)((function(){k&&!m&&c.current>1&&(x(!1),w())}),[k,c.current,m]);var w=function(){if(c.current>1&&!m){c.current=1,p(!0),u(1);var e=Number.isInteger(f.current.page)?f.current.page+1:1;f.current=Object.assign({},f.current,{page:e}),console.log(f.current);var t=b+1;console.log(t),y(t),Z(C+"n")}else console.log("Error state: hasMore is ",c.current,", loading is ",m)},q=function(){f.current=Object.assign({},f.current,{page:0}),g([]),c.current=2,u(2),p(!1),x(!0)},L=a.createElement(Et,null);return a.createElement("div",null,a.createElement(Ct.v,{visible:P}),a.createElement(at.g,{purchaseRecordsList:_,loadMore:w,hasMore:2===i,infoBottonTips:"详情编辑",infoBottonClick:function(e,t){var n=Object.assign({},e);console.log(n,t),H(n),j(1)},deliverComponent:L,printerIndex:o,successPrintCurrentRecordHandle:function(e,t){var n=[].concat(_);n[t]=e,g(n)}}),a.createElement(Ke,{requestCount:C,reqParams:f.current,responseDataHandle:function(e){if(console.log("prqCount: ",C),console.log("resp process...",e),p(!1),Object.keys(e).includes("code")&&1e3===e.code&&Object.keys(e).includes("results")){var t=_.concat(e.results);g(t),r(t),c.current=Zt(e),u(Zt(e)),console.log(b)}else console.log("Error: get data...")}}),a.createElement(nt,{visible:1===P,setVisible:j,oldObj:D,successDeletedOrUpdated:function(e){var t="update"===e.method?1:0,n=e.result?e.result:D,a=function(e,t,n){void 0===n&&(n=1);var a=t.id?t.id:0;if(a>0)for(var r=[].concat(e),o=r.length-1;o>-1;o--)if(r[o].id===a){if(1===n)return r[o]=Object.assign({},r[o],t),console.log("update..."),r;if(0===n)return r.splice(o,1),console.log("delete..."),r}return console.log("not handle..."),e}(_,n,t);console.log(a),g(a)}}),a.createElement(rt.n,{hasMore:2===c.current,onClick:w}))};Ot.defaultProps={reloadListCount:1,setReloadListCount:function(e){console.log(e)},requestParams:{page:0},purchaseRecordsChange:function(e){return console.log(e)},printerIndex:-1,hasAllPrintCount:0};var kt=Ot,xt=function(e){var t=e.paramsObj,n=void 0===t?{}:t,r=(0,a.useState)(""),o=r[0],l=r[1];(0,a.useEffect)((function(){c()}),[n]);var c=function(){var e="";Object.keys(n).forEach((function(t){if(Object.keys(He).includes(t)){var a=" "+He[t]+" = "+n[t]+";";e+=a}})),e.length>2?l(e="查询条件:"+e):(console.log("查询条件为空"),l(""))};return a.createElement("div",{style:{height:"auto",width:"100%",padding:"0.1rem 0.2rem"}},o.length>2?a.createElement("p",null,o):null)},St=n(5266),Pt=n(570),jt=function(){var e=(0,a.useState)([]),t=e[0],n=e[1],r=(0,a.useState)(-1),m=r[0],p=r[1],f=(0,a.useRef)({page:0}),v=(0,a.useState)(1),_=v[0],g=v[1],h=(0,a.useState)(!1),b=h[0],y=h[1],E=(0,a.useState)(!1),C=E[0],Z=E[1],O=(0,a.useState)(0),k=O[0],x=O[1],S=(0,a.useState)(0),P=S[0],j=S[1];(0,a.useEffect)((function(){(0,St.Cc)()}),[]);var R=function(){f.current={page:0},g(_+1)};return a.createElement("div",null,a.createElement(o.Z,null,a.createElement(l.Z,{span:24},a.createElement(H,{onChange:p,purchaseRecordsList:t,setPurchaseRecordsList:n,hasAllPrintCount:k,setHasAllPrintCount:x}))),a.createElement(o.Z,null,a.createElement(l.Z,{span:14},a.createElement(c.Z,null,a.createElement("h4",null,"PurchaseRecords"),a.createElement(s.Z,{title:"刷新"},a.createElement(i.Z,{onClick:R,shape:"circle",icon:a.createElement(u.Z,null)})),a.createElement(s.Z,{title:"搜索"},a.createElement(i.Z,{onClick:function(){return y(!0)},shape:"circle",icon:a.createElement(d.Z,null)})))),a.createElement(l.Z,{span:10},a.createElement("div",{style:{width:"100%",height:"auto"}},a.createElement(i.Z,{style:{float:"right"},type:"link",onClick:function(){return j(1)}},"淘宝csv文件"),a.createElement(i.Z,{style:{float:"right"},type:"link",onClick:function(){return Z(!0)}},"新建")))),a.createElement(o.Z,null,a.createElement(l.Z,{span:24},a.createElement(xt,{paramsObj:f.current}))),a.createElement(Xe,{visible:b,setVisible:y,queryHandle:function(e){f.current=Object.assign({},e),console.log(f.current),g(_+1),console.log("search...")}}),a.createElement(kt,{reloadListCount:_,setReloadListCount:g,requestParams:f.current,purchaseRecordsChange:function(e){n(e)},printerIndex:m,hasAllPrintCount:k}),a.createElement(We,{visible:C,setVisible:Z,reloadListCount:_,setReloadListCount:g}),a.createElement(Pt.d,{visible:P,setVisible:j,visibleNum:1,uploadedHandle:R}))},Rt=n(262),Dt=function(){return a.createElement(r.Z,null,a.createElement(Rt.Z,{title:"Records"}),a.createElement(jt,null))}}}]);
//# sourceMappingURL=component---src-pages-purchaserecords-js-6610fd7ad9cc65552b21.js.map