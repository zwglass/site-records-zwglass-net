(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"H+CO":function(e,t,a){"use strict";a.d(t,"a",(function(){return v})),a.d(t,"b",(function(){return b}));var n=a("q1tI"),r=a.n(n),c=a("VXEj"),l=a("2/Rp"),o=a("Tckk"),i=(a("91GP"),{icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"}),s=a("6VBw"),u=function(e,t){return n.createElement(s.a,Object.assign({},e,{ref:t,icon:i}))};u.displayName="StarOutlined";var m=n.forwardRef(u),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 00-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 00471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0142.2-32.3c7.6 0 15.1 2.2 21.1 6.7 9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z"}}]},name:"like",theme:"outlined"},d=function(e,t){return n.createElement(s.a,Object.assign({},e,{ref:t,icon:f}))};d.displayName="LikeOutlined";var p=n.forwardRef(d),v=function(e){var t=e.listData,a=e.randerItem,n=e.header,l=e.setSelectedItem,o=e.selectButtonOnClick,i=e.setVisible,s=e.visible;return r.a.createElement(c.b,{itemLayout:"vertical",size:"large",header:r.a.createElement("div",null,n),footer:null,bordered:!0,dataSource:t,renderItem:function(e){return a(e,l,o,i,s)}})};v.defaultProps={listData:[],randerItem:function(e){return r.a.createElement("div",null,e)},header:"列表标题",setSelectedItem:function(e){return console.log(e)},selectButtonOnClick:function(e){return console.log(e)},setVisible:function(e){return console.log(e)},visible:0};var b=function(e,t){return void 0===e&&(e={id:1,actions:[r.a.createElement(l.a,{icon:r.a.createElement(m,null),onClick:function(){return console.log("关注1024")}},"1024"),r.a.createElement(l.a,{icon:r.a.createElement(p,null),onClick:function(){return console.log("点赞1024")}},"1024")],img:"",avatar:"",title:"List.Item model",description:"说明文字",content:"内容文字"}),void 0===t&&(t=260),r.a.createElement(c.b.Item,{key:e.id,actions:e.actions,extra:e.img.length>0?r.a.createElement("img",{width:t,alt:"image",src:e.img}):null},r.a.createElement(c.b.Item.Meta,{avatar:e.avatar.length>0?r.a.createElement(o.a,{src:e.avatar}):null,title:e.title,description:e.description}),e.content)}},"ID/q":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a("8+KV");var n=a("cDf5"),r=a.n(n);function c(e,t){"function"==typeof e?e(t):"object"===r()(e)&&e&&"current"in e&&(e.current=t)}function l(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){t.forEach((function(t){c(t,e)}))}}},PArb:function(e,t,a){"use strict";a("ioFf"),a("V+eJ");var n=a("pVnL"),r=a.n(n),c=a("lSNA"),l=a.n(c),o=a("q1tI"),i=a("TSYQ"),s=a.n(i),u=a("H84U"),m=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};t.a=function(e){return o.createElement(u.a,null,(function(t){var a,n=t.getPrefixCls,c=t.direction,i=e.prefixCls,u=e.type,f=void 0===u?"horizontal":u,d=e.orientation,p=void 0===d?"center":d,v=e.className,b=e.children,y=e.dashed,E=e.plain,g=m(e,["prefixCls","type","orientation","className","children","dashed","plain"]),h=n("divider",i),O=p.length>0?"-".concat(p):p,j=!!b,S=s()(h,"".concat(h,"-").concat(f),(a={},l()(a,"".concat(h,"-with-text"),j),l()(a,"".concat(h,"-with-text").concat(O),j),l()(a,"".concat(h,"-dashed"),!!y),l()(a,"".concat(h,"-plain"),!!E),l()(a,"".concat(h,"-rtl"),"rtl"===c),a),v);return o.createElement("div",r()({className:S},g,{role:"separator"}),b&&o.createElement("span",{className:"".concat(h,"-inner-text")},b))}))}},Tckk:function(e,t,a){"use strict";a("dRSK"),a("ioFf"),a("V+eJ");var n=a("pVnL"),r=a.n(n),c=a("lSNA"),l=a.n(c),o=a("cDf5"),i=a.n(o),s=a("J4zp"),u=a.n(s),m=a("q1tI"),f=a("TSYQ"),d=a.n(f),p=a("t23M"),v=a("H84U"),b=a("uaoM"),y=a("ID/q"),E=a("ACnJ"),g=a("5OYt"),h=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},O=function(e,t){var a,n,c=m.useState(1),o=u()(c,2),s=o[0],f=o[1],O=m.useState(!1),j=u()(O,2),S=j[0],x=j[1],C=m.useState(!0),w=u()(C,2),P=w[0],k=w[1],_=m.useRef(),A=m.useRef(),q=Object(y.a)(t,_),R=m.useContext(v.b).getPrefixCls,N=function(){if(A.current&&_.current){var t=A.current.offsetWidth,a=_.current.offsetWidth;if(0!==t&&0!==a){var n=e.gap,r=void 0===n?4:n;2*r<a&&f(a-2*r<t?(a-2*r)/t:1)}}};m.useEffect((function(){x(!0)}),[]),m.useEffect((function(){k(!0),f(1)}),[e.src]),m.useEffect((function(){N()}),[e.gap]);var V=e.prefixCls,D=e.shape,H=e.size,M=e.src,Y=e.srcSet,z=e.icon,I=e.className,L=e.alt,F=e.draggable,B=e.children,T=h(e,["prefixCls","shape","size","src","srcSet","icon","className","alt","draggable","children"]),J=Object(g.a)(),W=m.useMemo((function(){if("object"!==i()(H))return{};var e=E.b.find((function(e){return J[e]})),t=H[e];return t?{width:t,height:t,lineHeight:"".concat(t,"px"),fontSize:z?t/2:18}:{}}),[J,H]);Object(b.a)(!("string"==typeof z&&z.length>2),"Avatar","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(z,"` at https://ant.design/components/icon"));var G,K=R("avatar",V),U=d()((a={},l()(a,"".concat(K,"-lg"),"large"===H),l()(a,"".concat(K,"-sm"),"small"===H),a)),X=d()(K,U,(n={},l()(n,"".concat(K,"-").concat(D),D),l()(n,"".concat(K,"-image"),M&&P),l()(n,"".concat(K,"-icon"),z),n),I),Q="number"==typeof H?{width:H,height:H,lineHeight:"".concat(H,"px"),fontSize:z?H/2:18}:{};if(M&&P)G=m.createElement("img",{src:M,draggable:F,srcSet:Y,onError:function(){var t=e.onError;!1!==(t?t():void 0)&&k(!1)},alt:L});else if(z)G=z;else if(S||1!==s){var Z="scale(".concat(s,") translateX(-50%)"),$={msTransform:Z,WebkitTransform:Z,transform:Z},ee="number"==typeof H?{lineHeight:"".concat(H,"px")}:{};G=m.createElement(p.a,{onResize:N},m.createElement("span",{className:"".concat(K,"-string"),ref:function(e){A.current=e},style:r()(r()({},ee),$)},B))}else G=m.createElement("span",{className:"".concat(K,"-string"),style:{opacity:0},ref:function(e){A.current=e}},B);return delete T.onError,delete T.gap,m.createElement("span",r()({},T,{style:r()(r()(r()({},Q),W),T.style),className:X,ref:q}),G)},j=m.forwardRef(O);j.displayName="Avatar",j.defaultProps={shape:"circle",size:"default"};var S=j,x=(a("bWfx"),a("axMd")),C=a("0n0R"),w=a("3S7+"),P=function(e){return e?"function"==typeof e?e():e:null},k=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},_=m.forwardRef((function(e,t){var a=e.prefixCls,n=e.title,c=e.content,l=k(e,["prefixCls","title","content"]),o=(0,m.useContext(v.b).getPrefixCls)("popover",a);return m.createElement(w.a,r()({},l,{prefixCls:o,ref:t,overlay:function(e){return m.createElement(m.Fragment,null,n&&m.createElement("div",{className:"".concat(e,"-title")},P(n)),m.createElement("div",{className:"".concat(e,"-inner-content")},P(c)))}(o)}))}));_.displayName="Popover",_.defaultProps={placement:"top",transitionName:"zoom-big",trigger:"hover",mouseEnterDelay:.1,mouseLeaveDelay:.1,overlayStyle:{}};var A=_,q=function(e){var t=m.useContext(v.b),a=t.getPrefixCls,n=t.direction,r=e.prefixCls,c=e.className,o=void 0===c?"":c,i=e.maxCount,s=e.maxStyle,u=a("avatar-group",r),f=d()(u,l()({},"".concat(u,"-rtl"),"rtl"===n),o),p=e.children,b=e.maxPopoverPlacement,y=void 0===b?"top":b,E=Object(x.a)(p).map((function(e,t){return Object(C.a)(e,{key:"avatar-key-".concat(t)})})),g=E.length;if(i&&i<g){var h=E.slice(0,i),O=E.slice(i,g);return h.push(m.createElement(A,{key:"avatar-popover-key",content:O,trigger:"hover",placement:y,overlayClassName:"".concat(u,"-popover")},m.createElement(S,{style:s},"+".concat(g-i)))),m.createElement("div",{className:f,style:e.style},h)}return m.createElement("div",{className:f,style:e.style},p)},R=S;R.Group=q;t.a=R},YdWC:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),c=a("9qUX"),l=a("vrFN"),o=(a("91GP"),a("BMrR")),i=a("kPKH"),s=a("zeV3"),u=a("3S7+"),m=a("2/Rp"),f=a("l+S1"),d=(a("Z2Ku"),a("L9s1"),a("rGqo"),a("yt8O"),a("Btvt"),a("RW0V"),{add_time:"下单时间"}),p=function(e){var t=e.paramsObj,a=void 0===t?{}:t,c=Object(n.useState)(""),l=c[0],o=c[1];Object(n.useEffect)((function(){i()}),[a]);var i=function(){var e="";Object.keys(a).forEach((function(t){if(Object.keys(d).includes(t)){var n=" "+d[t]+" = "+a[t]+";";e+=n}})),e.length>2?o(e="查询条件:"+e):(console.log("查询条件为空"),o(""))};return r.a.createElement("div",{style:{height:"auto",width:"100%",padding:"0.1rem 0.2rem"}},l.length>2?r.a.createElement("h6",null,l):null)},v=a("2fM7"),b=a("/wGt"),y=a("+eQT"),E=v.a.Option,g=["YYYY-MM-DD","YYYY-MM"],h=a("wd/R"),O=function(e,t){var a=g[e];return t.format(a)},j=function(e){var t=e.visible,a=e.setVisible,c=e.queryHandle,l=Object(n.useState)(0),o=l[0],i=l[1],u=Object(n.useState)(h().format("YYYY-MM-DD")),f=u[0],d=u[1];Object(n.useEffect)((function(){d(O(o,h(f)))}),[o]);var p=function(e){d(O(o,e))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{title:"请选择销售日期",height:"300px",placement:"top",onClose:function(){return a(0)},visible:2===t,bodyStyle:{paddingBottom:20},footer:r.a.createElement(m.a,{style:{margin:"0 2rem"},type:"primary",onClick:function(){console.log(f),c({add_time:f}),a(0)}},"提交")},r.a.createElement(s.b,{direction:"vertical"},r.a.createElement(v.a,{defaultValue:0,style:{width:120},onChange:function(e){i(e)}},r.a.createElement(E,{value:0},"按日统计"),r.a.createElement(E,{value:1},"按月统计")),0===o?r.a.createElement(y.a,{value:h(f),size:"large",onSelect:p}):r.a.createElement(y.a,{value:h(f),size:"large",onSelect:p,picker:"month"}))))};j.defaultProps={visible:!1,setVisible:function(e){console.log(e)},queryHandle:function(e){console.log(e)}};var S=j,x=(a("f3/d"),a("wd/R")),C=a.n(x),w=a("H+CO"),P=a("7BUj"),k=P.a.salePlatforms,_=P.a.payMethods,A=function(e){var t=e.purchaseRecords,a=e.queryFactor,c=Object(n.useState)(""),l=c[0],o=c[1];Object(n.useEffect)((function(){var e=a.add_time?a.add_time:"";o(e)}),[a]);return r.a.createElement("div",null,r.a.createElement(w.a,{header:r.a.createElement("h4",{style:{color:"gray"}},l," 订单统计列表"),listData:t,randerItem:function(e){var t="",a=e.customer_info;a&&"object"==typeof a&&Object.keys(a).includes("name")&&Object.keys(a).includes("wx_nick_name")&&(t=a.name,t=a.wx_nick_name.length>0?t+"("+a.wx_nick_name+")":t);var n="R:"+e.diopter_r+"; L:"+e.diopter_l,c="R:; L:"===n?null:r.a.createElement("p",null,n),l={id:e.id,actions:[],img:"",avatar:"",title:"订单ID: "+e.id+";  顾客: "+t,description:"下单时间: "+C()(e.add_time).format("YYYY-MM-DD HH:mm:ss"),content:r.a.createElement("div",null,r.a.createElement("p",null,"商品:",e.product_title),c,r.a.createElement("p",null,"交易平台: ",k[e.sale_platform],"; 商品数量: ",e.products_quantity),r.a.createElement("p",null,"订单金额: ",e.purchase_amount,"; 付款方式: ",_[e.pay_platform]),r.a.createElement("p",null,"成本: ",e.products_cost))};return Object(w.b)(l,10)}}))};A.defaultProps={purchaseRecords:[],queryFactor:{}};var q=A,R=a("kLXV"),N=a("PArb"),V=function(e){var t=e.visible,a=e.setVisible,c=e.purchaseRecords,l=e.queryFactor,o=Object(n.useState)({totalAmount:0,totalCostAmount:0,recordsCounts:0,taobaoAmount:0,wxAmount:0,alipayAmount:0,cardAmount:0,moneyAmount:0}),i=o[0],s=o[1],u=Object(n.useState)(""),m=u[0],f=u[1];return Object(n.useEffect)((function(){1===t&&function(){for(var e=0,t=0,a=0,n=0,r=0,l=0,o=0,i=0,u=0;u<c.length;u++){var m=c[u];a+=1,t+=m.products_cost?parseFloat(m.products_cost):0;var f=m.purchase_amount?parseFloat(m.purchase_amount):0;e+=f,n=2===m.sale_platform?n+f:n,r=1===m.pay_platform?r+f:r,l=2===m.pay_platform?l+f:l,i=4===m.pay_platform?i+f:i,o=4===m.pay_platform?o+f:o}s({totalAmount:e,totalCostAmount:t,recordsCounts:a,taobaoAmount:n,wxAmount:r,alipayAmount:l,cardAmount:i,moneyAmount:o})}()}),[t]),Object(n.useEffect)((function(){var e=l.add_time?l.add_time:"";f(e)}),[l]),r.a.createElement(R.a,{visible:1===t,title:m+" 销售汇总",closable:!1,onOk:function(){return a(0)},onCancel:function(){return a(0)},width:"80%"},r.a.createElement("p",null,"总销售金额: ",i.totalAmount),r.a.createElement("p",null,"总成本: ",i.totalCostAmount),r.a.createElement("p",null,"订单总数量: ",i.recordsCounts),r.a.createElement(N.a,null),r.a.createElement("p",null,"淘宝订单总金额: ",i.taobaoAmount),r.a.createElement(N.a,null),r.a.createElement("p",null,"微信收款总金额: ",i.wxAmount),r.a.createElement("p",null,"支付宝收款总金额: ",i.alipayAmount),r.a.createElement("p",null,"刷卡总金额: ",i.cardAmount),r.a.createElement("p",null,"现金总金额: ",i.moneyAmount))};V.defaultProps={visible:0,setVisible:function(e){return console.log(e)},purchaseRecords:[],queryFactor:{}};var D=V,H=a("Sm+g"),M=["records-admin/v1/purchaserecordstatistic"],Y=function(e){var t=e.requestCount,a=e.reqParams,n=e.responseDataHandle,c=M[0];return r.a.createElement(H.a,{responseDataHandle:n,api:c,method:"get",reqParams:a,reqObject:{},requestCount:t})};Y.defaultProps={requestCount:0,reqParams:{},responseDataHandle:function(e){console.log(e)}};var z=function(){var e=Object(n.useState)([]),t=e[0],a=e[1],c=Object(n.useState)({add_time:"2020-10"}),l=c[0],d=c[1],v=Object(n.useState)(0),b=v[0],y=v[1],E=Object(n.useState)(0),g=E[0],h=E[1],O=Object(n.useState)(!1),j=O[0],x=O[1];Object(n.useEffect)((function(){j&&(console.log("requesting..."),x(!1),h(g+1))}),[j]);return r.a.createElement("div",null,r.a.createElement(o.a,null,r.a.createElement(i.a,{span:14},r.a.createElement(s.b,{size:"middle"},r.a.createElement("h5",null,"Purchase Records Statistic(订单统计)"),r.a.createElement(u.a,{title:"选择日期"},r.a.createElement(m.a,{onClick:function(){return y(2)},shape:"circle",icon:r.a.createElement(f.a,null)})))),r.a.createElement(i.a,{span:10},r.a.createElement("div",{style:{width:"100%",height:"auto"}},r.a.createElement(m.a,{style:{float:"right"},type:"link",onClick:function(){return y(1)}},"汇总")))),r.a.createElement(o.a,null,r.a.createElement(i.a,{span:24},r.a.createElement(p,{paramsObj:l}))),r.a.createElement(S,{visible:b,setVisible:y,queryHandle:function(e){d(Object.assign({},e)),x(!0),console.log("search...")}}),r.a.createElement(Y,{requestCount:g,reqParams:l,responseDataHandle:function(e){a(e.results)}}),r.a.createElement(q,{purchaseRecords:t,queryFactor:l}),r.a.createElement(D,{visible:b,setVisible:y,purchaseRecords:t,queryFactor:l}))};t.default=function(){return r.a.createElement(c.a,null,r.a.createElement(l.a,{title:"StatisticPurchaseRecords"}),r.a.createElement(z,null))}}}]);
//# sourceMappingURL=component---src-pages-statisticrecords-js-ecc7742c776ce669ce7f.js.map