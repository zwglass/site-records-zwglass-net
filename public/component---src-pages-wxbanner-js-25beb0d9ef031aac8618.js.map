{"version":3,"sources":["webpack://zwglass-purchase-records/./src/components/wx_store/banners/banners_columns_label_config.jsx","webpack://zwglass-purchase-records/./src/components/wx_store/banners/banners_requests.jsx","webpack://zwglass-purchase-records/./src/components/wx_store/banners/create_banners.jsx","webpack://zwglass-purchase-records/./src/components/wx_store/banners/banners_query_form.jsx","webpack://zwglass-purchase-records/./src/components/wx_store/banners/update_banners.jsx","webpack://zwglass-purchase-records/./src/components/wx_store/banners/banners_list.jsx","webpack://zwglass-purchase-records/./src/components/wx_store/banners/banners_query_params_display.jsx","webpack://zwglass-purchase-records/./src/components/wx_store/banners/index.jsx","webpack://zwglass-purchase-records/./src/pages/wxbanner.js"],"names":["formKeys","formDisabledKeys","formNotShowKeys","formKeysLabelsObj","SelectBannerEnabled","options","value","label","SelectBannerLinkType","SelectIsDelete","formKeySelectComponentsObj","enabled","end_time","showTime","format","is_delete","link_type","formKeysHandleButtonObj","setOptModalState","goods_id","buttonTips","clickMethod","formGetRequestParamsKeys","formInitialObj","formRulesList","required","message","imageKeyNames","apiLists","actionButtons","item","setVisible","setSelectedObj","selectButtonOnClick","btnList","onClick","type","push","renderItem","visible","updateItemObj","id","actions","img","image_url","avatar","title","description","moment","content","explains","customRanderItem","BannersRequestGet","requestCount","reqParams","responseDataHandle","api","method","reqObject","defaultProps","respObj","console","log","BannersRequestPost","concat","BannersRequestPut","BannersRequestDelete","CreateBanners","reloadListCount","setReloadListCount","bannersImageObj","useRef","oldObj","handleCount","useState","initFormCount","setInitFormCount","postRequestCount","setPostRequestCount","useEffect","optModalState","updateFormObj","setUpdateFormObj","closeModal","current","closable","footer","style","width","height","textAlign","maxImagesNum","imageKeyName","onChange","imagesObj","columns","disabledKeys","notShowKeys","formKeyLabelObj","formKeysItemButtonObj","onFinish","values","upObj","parseInt","unix","cancelHandle","showDeleteButton","rulesObj","modalState","setModalState","selectHandle","goodsObj","Object","keys","includes","code","val","booleanVal","BannersQueryDrawerForm","queryHandle","closeDrawer","placement","onClose","bodyStyle","paddingBottom","formObj","copyFormObj","setTimeout","booleanValue","queryParamsObj","UpdateBanners","putRequestCount","setPutRequestCount","deleteRequestCount","setDeleteRequestCount","endTimeStamp","endTimeMoment","deleteHandle","BannersList","requestParams","hasMoreState","setHasMoreState","loading","setLoading","requesting","setRequesting","page","bannersData","setBannersData","bannersRequestGetCount","setBannersRequestGetCount","selectedObj","loadMore","reloadListsHandle","current_page","Number","isInteger","resp","results","next","length","judgeHasMore","header","listData","randerItem","setSelectedItem","hasMore","addedNum","paramsObj","displayQueryFactorStr","setDisplayQueryFactorStr","displayStr","retDisplayStr","forEach","element","currentFactor","padding","drawerVisible","setDrawerVisible","createBannersVisible","setCreateBannersVisible","span","shape","icon","ReloadOutlined","SearchOutlined","float","currentRequestParams"],"mappings":"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","file":"component---src-pages-wxbanner-js-25beb0d9ef031aac8618.js","sourcesContent":["import React from 'react';\nimport { Button, DatePicker } from 'antd';\nimport moment from 'moment';\nimport { CustomSelect } from '../../base_components/select_component';\n// import { expressCompanyRequestGet } from './custom_select_requests';\nimport { customRanderItem } from '../../base_components/lists/custom_list';\n\n// Banners 列 配置\n\n// ~~~~~~ 表单列, 需添加 ~~~~~~\nconst formKeys = [\n    \"id\", \"enabled\", \"end_time\", \"goods_id\", \"image\", \"is_delete\",\n    \"link\", \"link_type\", \"sort_order\", \"handle_staff_id\", \"add_time\", \"update_time\", \"explains\"\n];\n\n// ~~~~~~ 表单不能编辑列, 根据实际添加 ~~~~~~\nconst formDisabledKeys = [\n    \"id\", \"image\", \"goods_id\", \"handle_staff_id\", \"add_time\", \"update_time\"\n];\n\n// ~~~~~~ 表单不显示列, 根据实际添加 ~~~~~~\nconst formNotShowKeys = [\n    \"image\", \"enabled\", \"link\", \"link_type\", \"handle_staff_id\"\n];\n\n// ~~~~~~ 表单列名称 label, 需添加 ~~~~~~\nconst formKeysLabelsObj = {\n    \"id\": \"ID\", \"enabled\": \"可编辑\", \"end_time\": \"结束时间\", \"goods_id\": \"商品ID\",\n    \"image\": \"图片\", \"is_delete\": \"不显示\", \"link\": \"链接\", \"link_type\": \"链接类型\", \"sort_order\": \"排序次序\", \n    \"handle_staff_id\": \"编辑人员\", \"explains\": \"说明\", \"add_time\": \"创建日期\", \"update_time\": \"更新日期\"\n};\n\n//  ~~~~~~ 选择框, 根据实际添加 ~~~~~~\nconst SelectBannerEnabled = (<CustomSelect\n    options={[{ value: 0, label: '不可编辑' }, { value: 1, label: '可编辑' }]} />);\nconst SelectBannerLinkType = (<CustomSelect\n    options={[{ value: 0, label: '无效' }, { value: 1, label: '有效' }]} />);\nconst SelectIsDelete = (<CustomSelect \n    options={[{ value: 0, label: '否'}, { value: 1, label: '是'}]} />)\nconst SelectEndTime = (<DatePicker showTime format=\"YYYY-MM-DD HH:mm:ss\" />);\nconst formKeySelectComponentsObj = {\n    enabled: SelectBannerEnabled,\n    end_time: SelectEndTime,\n    is_delete: SelectIsDelete,\n    link_type: SelectBannerLinkType,\n};\n\n// ~~~~~~ 表单自定义操作按钮, 根据实际添加 ~~~~~~\nconst formKeysHandleButtonObj = (setOptModalState) => {\n    return {\n        goods_id: {buttonTips: '选择商品', clickMethod: () => setOptModalState(1)},\n    };\n};\n\n// ~~~~~~ 表单是图片列, 根据实际添加(废弃, 改用 imageKeyNames) ~~~~~~\n// const formKeysIsImages = [];\n\n// ~~~~~~ 表单 get 请求条件key, 根据实际添加 ~~~~~~\nconst formGetRequestParamsKeys = [];\n\n//  ~~~~~~ 表单初始化值, 根据实际添加 ~~~~~~\nconst formInitialObj = {\n    \"id\": 0, \"enabled\": 0, \"goods_id\": 0, \"end_time\": \"\", \"is_delete\": 0, \"link\": \"\", \"link_type\": 0,\n    \"sort_order\": 0, \"explains\": \"\", \"add_time\": \"\", \"update_time\": \"\"\n}\n\n// ~~~~~~ 表单值规则, 根据实际添加 ~~~~~~\n// formRulesList = {formKey: [{require: true, message: 'Please input Password!',}, ]};\nconst formRulesList = {\"password\": [{required: true, message: 'Please input Password!',}, ], }\n\n// ~~~~~~ 图片列名称, 根据实际修改(多张图片去掉最后序号数字) ~~~~~~\nconst imageKeyNames = ['image'];\n\n// ~~~~~~ 图片总数量, 默认设置为1, 根据实际修改 ~~~~~~\nconst maxImagesNum = 1;\n\n// ~~~~~~ api请求url apiLists, 根据实际修改 ~~~~~~\nconst apiLists = ['banner-admin/v1/banners', ];\n\nconst actionButtons = (item, setVisible, setSelectedObj, selectButtonOnClick) => {\n    const onClickInfo = () => {\n        setSelectedObj(item);\n        setVisible(2);\n    }\n    const btnList = [\n        <Button onClick={onClickInfo} type=\"link\">详情</Button>,\n    ];\n    if (selectButtonOnClick) {\n        btnList.push(<Button onClick={() => selectButtonOnClick(item)} type=\"link\">选择</Button>)\n    }\n    return btnList;\n}\n// 修改 ~~~~~~~ item keys ~~~~~~;\nconst renderItem = (item, setSelectedObj, selectButtonOnClick, setVisible, visible) => {\n    // 必须 每一行渲染 的组件, 修改 ~~~~~~~ item keys ~~~~~~;\n    const updateItemObj = {\n        id: item.id,\n        actions: actionButtons(item, setVisible, setSelectedObj, selectButtonOnClick),\n        img: item.image_url,\n        avatar: '',\n        title: `商品ID: ${item.goods_id}`,\n        description: `结束时间: ${moment.unix(item.end_time).format('YYYY-MM-DD HH:mm:ss')}`,\n        content: item.explains,\n    };\n    return customRanderItem(updateItemObj, 180);\n};\n\nconst judgeHasMore = (resp) => {\n    if (Object.keys(resp).includes('next')\n        && typeof resp.next === 'string'\n        && resp.next.length > 5) {\n        return true;\n    }\n    return false;\n};\n\nexport {\n    formKeys,\n    formDisabledKeys,\n    formNotShowKeys,\n    formKeysLabelsObj,\n    formKeySelectComponentsObj,\n    formKeysHandleButtonObj,\n    // formKeysIsImages,\n    formGetRequestParamsKeys,\n    formInitialObj,\n    formRulesList,\n    imageKeyNames,\n    maxImagesNum,\n    apiLists,\n    renderItem,\n    judgeHasMore\n};\n","import React from 'react';\n\nimport AxiosRequest from '../../apis';\nimport { apiLists } from './banners_columns_label_config';\n\n// Banners 的request请求\n\nconst BannersRequestGet = ({ requestCount, reqParams, responseDataHandle }) => {\n  // Banners Get请求\n  const api = apiLists[0];\n  const method = 'get';\n  const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nBannersRequestGet.defaultProps = {\n  requestCount: 0,\n  reqParams: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n};\n\nconst BannersRequestPost = ({ requestCount, reqObject, responseDataHandle }) => {\n  // Banners post请求\n  const api = [].concat(apiLists)[0];\n  const method = 'post';\n  const reqParams = {};\n  // const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nBannersRequestPost.defaultProps = {\n  requestCount: 0,\n  reqObject: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n}\n\nconst BannersRequestPut = ({ requestCount, reqObject, responseDataHandle, id }) => {\n  // Banners put请求\n  const api = [].concat(apiLists)[0] + `/${id}`;\n  const method = 'put';\n  const reqParams = {};\n  // const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nBannersRequestPut.defaultProps = {\n  requestCount: 0,\n  reqObject: {},\n  responseDataHandle: (respObj) => { console.log(respObj); },\n  id: 0\n}\n\nconst BannersRequestDelete = ({ requestCount, responseDataHandle, id }) => {\n  // Banners delete请求\n  const api = [].concat(apiLists)[0] + `/${id}`;\n  const method = 'delete';\n  const reqParams = {};\n  const reqObject = {};\n\n  return (\n    <AxiosRequest\n      responseDataHandle={responseDataHandle} api={api} method={method}\n      reqParams={reqParams} reqObject={reqObject} requestCount={requestCount}\n    ></AxiosRequest>\n  );\n};\nBannersRequestDelete.defaultProps = {\n  requestCount: 0,\n  responseDataHandle: (respObj) => { console.log(respObj); },\n  id: 0\n}\n\nexport {\n  BannersRequestGet,\n  BannersRequestPost,\n  BannersRequestPut,\n  BannersRequestDelete\n};\n","import React, { useRef, useState, useEffect } from 'react';\nimport { Modal, Divider, message } from 'antd';\nimport moment from 'moment';\n\nimport { StsUploadImagesList } from '../../upload_files/sts_upload_files_list';\nimport { BannersRequestPost } from './banners_requests';\nimport { CustomForm } from '../../base_components/form_component';\nimport { GoodsOptModal } from '../../modals/goods_opt';\n\nimport {\n    formKeys,\n    formDisabledKeys,\n    formNotShowKeys,\n    formKeysLabelsObj,\n    formKeySelectComponentsObj,\n    formKeysHandleButtonObj,\n    formInitialObj,\n    formRulesList,\n    imageKeyNames,\n    maxImagesNum\n} from './banners_columns_label_config';\n\n// 新建 Modal\n\nconst CreateBanners = ({ visible, setVisible, reloadListCount, setReloadListCount }) => {\n\n    const bannersImageObj = useRef({});\n    const oldObj = useRef({handleCount: 0});\n\n    const [initFormCount, setInitFormCount] = useState(0);\n\n    const [postRequestCount, setPostRequestCount] = useState(0);\n    const reqObject = useRef({});\n\n    useEffect(() => {\n        setInitFormCount(initFormCount + 1);  // 初始化表格\n    }, [visible]);\n\n    // 选择 modal\n    const [optModalState, setOptModalState] = useState(0);\n    const [updateFormObj, setUpdateFormObj] = useState({});\n    const selectGoodsHandle = (goodsObj) => {\n        // 选择商品操作\n        console.log(goodsObj);\n        setUpdateFormObj({\n            goods_id: goodsObj.id,\n        });\n        setOptModalState(0);\n    };\n\n    const postResponseDataHandle = (respObj) => {\n        // 表单提交后的操作\n        if (\n            Object.keys(respObj).includes('code')\n            && respObj.code === 1000\n        ){\n            closeModal();\n            setReloadListCount(reloadListCount + 1)\n        } else {\n            message.error('网络错误...');\n        }\n    }\n\n    const closeModal = () => {\n        // 初始化表格和图片 并关闭Modal\n        oldObj.current = {handleCount: oldObj.current.handleCount + 1};  // 初始化图片\n        setVisible(0);\n    }\n\n    const bannersImageUploaded = (imagesObj) => {\n        // 图片上传后操作\n        bannersImageObj.current = { ...imagesObj };\n        console.log(imagesObj);\n    }\n\n    const onFinish = (values) => {\n        // 提交表单\n        let upObj = { ...values, ...bannersImageObj.current };\n        console.log(upObj);\n        // 时间转时间戳\n        upObj.end_time = parseInt(moment.unix(upObj.end_time).unix() / 1000);  // 时间转时间戳\n        console.log(upObj.end_time);\n        reqObject.current = upObj;\n        setPostRequestCount(postRequestCount + 1);\n    }\n\n    return (<>\n        <Modal visible={visible === 1}\n            title=\"Banners 新建\"\n            closable={false}\n            footer={null}\n        >\n            <div style={{ width: '100%', height: 'auto', textAlign: 'center' }}>\n                <StsUploadImagesList\n                    oldObj={oldObj.current}\n                    maxImagesNum={maxImagesNum}\n                    imageKeyName={imageKeyNames[0]}\n                    onChange={bannersImageUploaded}\n                ></StsUploadImagesList>\n            </div>\n            <Divider></Divider>\n\n            <CustomForm\n                columns={formKeys}\n                disabledKeys={formDisabledKeys}\n                notShowKeys={formNotShowKeys}\n                formKeyLabelObj={formKeysLabelsObj}\n                formKeySelectComponentsObj={formKeySelectComponentsObj}\n                formKeysItemButtonObj={formKeysHandleButtonObj(setOptModalState)}\n                onFinish={onFinish}\n                cancelHandle={closeModal}\n                showDeleteButton={false}\n                formInitialObj={formInitialObj}\n                initFormCount={initFormCount}\n                rulesObj={formRulesList}\n                updateFormObj={updateFormObj}\n            ></CustomForm>\n\n            <GoodsOptModal\n                modalState={optModalState === 1}\n                setModalState={setOptModalState}\n                selectHandle={selectGoodsHandle}\n            ></GoodsOptModal>\n\n            <BannersRequestPost\n                requestCount={postRequestCount}\n                reqObject={reqObject.current}\n                responseDataHandle={postResponseDataHandle}\n            ></BannersRequestPost>\n        </Modal>\n    </>)\n}\n\nCreateBanners.defaultProps = {\n  visible: false,\n  setVisible: (val) => console.log(val),\n  reloadListCount: 0,\n  setReloadListCount: (booleanVal) => console.log(booleanVal)\n}\n\nexport default CreateBanners;\n","import React, { useState } from 'react';\nimport { Drawer } from 'antd';\n\nimport { CustomForm } from '../../base_components/form_component';\n\nimport {\n    formKeysLabelsObj,\n    formKeySelectComponentsObj,\n    formKeysHandleButtonObj,\n    formGetRequestParamsKeys,\n    formInitialObj\n} from './banners_columns_label_config';\nimport { GoodsOptModal } from '../../modals/goods_opt';\n\n// 列表查询 form\n\nconst BannersQueryDrawerForm = ({ visible, setVisible, queryHandle }) => {\n  const [initFormCount, setInitFormCount] = useState(0);\n\n  // 选择 modal\n  const [optModalState, setOptModalState] = useState(0);\n  const [updateFormObj, setUpdateFormObj] = useState({});\n  const selectGoodsHandle = (goodsObj) => {\n      // 选择商品操作\n      console.log(goodsObj);\n      setUpdateFormObj({\n          goods_id: goodsObj.id,\n      });\n      setOptModalState(0);\n  };\n\n  const closeDrawer = () => {\n    // 关闭查询抽屉\n    setInitFormCount(initFormCount + 1);\n    setVisible(false);\n  };\n\n  const onFinish = (formObj) => {\n    // 提交查询 根据具体情况更新 fromObj\n    // ~~~~~~~ 具体情况更新 fromObj ~~~~~~\n    let copyFormObj = { ...formObj };\n    console.log(copyFormObj);\n    queryHandle(copyFormObj);\n    setTimeout(() => {\n      closeDrawer();\n    }, 50);\n  };\n\n  return (\n    <>\n      <Drawer\n        title=\"Banners查询\"\n        width=\"100%\"\n        height=\"400px\"\n        placement=\"top\"\n        onClose={closeDrawer}\n        visible={visible}\n        bodyStyle={{ paddingBottom: 80 }}\n        footer={null}\n      >\n        <CustomForm\n          columns={formGetRequestParamsKeys}\n          formKeyLabelObj={formKeysLabelsObj}\n          formKeySelectComponentsObj={formKeySelectComponentsObj}\n          formKeysItemButtonObj={formKeysHandleButtonObj(setOptModalState)}\n          onFinish={onFinish}\n          cancelHandle={() => setVisible(0)}\n          showDeleteButton={false}\n          formInitialObj={formInitialObj}\n          initFormCount={initFormCount}\n          updateFormObj={updateFormObj}\n        ></CustomForm>\n      </Drawer>\n\n      <GoodsOptModal\n          modalState={optModalState === 1}\n          setModalState={setOptModalState}\n          selectHandle={selectGoodsHandle}\n      ></GoodsOptModal>\n    </>\n  );\n};\n\nBannersQueryDrawerForm.defaultProps = {\n  visible:false,\n  setVisible: (booleanValue) => { console.log(booleanValue); },\n  queryHandle: (queryParamsObj) => { console.log(queryParamsObj); }\n};\n\nexport default BannersQueryDrawerForm;\n","import React, { useRef, useState, useEffect } from 'react';\nimport { Modal, Divider, message } from 'antd';\nimport moment from 'moment';\n\n// import StsUploadFile from '../../upload_files/sts_upload_file';\nimport { StsUploadImagesList } from '../../upload_files/sts_upload_files_list';\nimport { BannersRequestPut, BannersRequestDelete  } from './banners_requests';\nimport { CustomForm } from '../../base_components/form_component';\nimport { GoodsOptModal } from '../../modals/goods_opt';\n\nimport {\n    formKeys,\n    formDisabledKeys,\n    formNotShowKeys,\n    formKeysLabelsObj,\n    formKeySelectComponentsObj,\n    formKeysHandleButtonObj,\n    // formInitialObj,\n    formRulesList,\n    imageKeyNames,\n    maxImagesNum\n} from './banners_columns_label_config';\n\n// 编辑 Banners\n\nconst UpdateBanners = ({ visible, setVisible, oldObj, reloadListCount, setReloadListCount }) => {\n\n    const bannersImageObj = useRef({});\n\n    const [putRequestCount, setPutRequestCount] = useState(0);\n    const reqObject = useRef({});\n    const putResponseDataHandle = (respObj) => {\n        if (Object.keys(respObj).includes('code') && respObj.code === 1000) {\n            message.success('修改成功');\n            setReloadListCount(reloadListCount + 1);\n            setVisible(0);\n        } else {\n            message.error('网络错误...');\n        }\n    }\n\n    const [deleteRequestCount, setDeleteRequestCount] = useState(0);\n    const deleteBanners = () => {\n        // 删除当前对象\n        setDeleteRequestCount(deleteRequestCount + 1);\n        setReloadListCount(reloadListCount + 1);\n    };\n\n    // 选择 modal\n    const [optModalState, setOptModalState] = useState(0);\n    const [updateFormObj, setUpdateFormObj] = useState({});\n    const selectGoodsHandle = (goodsObj) => {\n        // 选择商品操作\n        console.log(goodsObj);\n        setUpdateFormObj({\n            goods_id: goodsObj.id,\n        });\n        setOptModalState(0);\n    };\n\n    useEffect(() => {\n        if (visible > 0) {\n            console.log(oldObj);\n            setUpdateFormObj({id: -1});\n            let endTimeStamp = oldObj.end_time ? parseInt(oldObj.end_time) : 0;\n            if (endTimeStamp < 10000000000) {\n                endTimeStamp = parseInt(endTimeStamp * 1000);\n            }\n            const endTimeMoment = moment(endTimeStamp);\n            setUpdateFormObj({ ...oldObj, end_time: endTimeMoment });  // 给表格赋值\n        }\n    }, [visible, oldObj]);\n\n    const bannersImageUploaded = (imagesObj) => {\n        // 轮播图上传后操作\n        bannersImageObj.current = imagesObj;\n        console.log(imagesObj);\n    }\n\n    const onFinish = (values) => {\n        // 提交表单\n        let upObj = { ...values, ...bannersImageObj.current };\n        console.log(upObj);\n        // 时间转时间戳\n        upObj.end_time = parseInt(moment.unix(upObj.end_time).unix() / 1000);  // 时间转时间戳\n        console.log(upObj.end_time);\n        reqObject.current = upObj;\n        setPutRequestCount(putRequestCount + 1);\n    }\n\n    return (\n        <Modal visible={visible === 2}\n            title=\"Banners\"\n            closable={false}\n            footer={null}\n        >\n            <div style={{width: '100%', height: 'auto', textAlign: 'center'}}>\n                <StsUploadImagesList\n                    maxImagesNum={maxImagesNum}\n                    imageKeyName={imageKeyNames[0]}\n                    oldObj={oldObj}\n                    onChange={bannersImageUploaded}\n                ></StsUploadImagesList>\n            </div>\n            <Divider></Divider>\n\n            <CustomForm\n                columns={formKeys}\n                disabledKeys={formDisabledKeys}\n                notShowKeys={formNotShowKeys}\n                formKeyLabelObj={formKeysLabelsObj}\n                formKeySelectComponentsObj={formKeySelectComponentsObj}\n                formKeysItemButtonObj={formKeysHandleButtonObj(setOptModalState)}\n                onFinish={onFinish}\n                cancelHandle={() => setVisible(0)}\n                showDeleteButton={true}\n                deleteHandle={deleteBanners}\n                updateFormObj={updateFormObj}\n                rulesObj={formRulesList}\n            ></CustomForm>\n\n            <GoodsOptModal\n                modalState={optModalState === 1}\n                setModalState={setOptModalState}\n                selectHandle={selectGoodsHandle}\n            ></GoodsOptModal>\n\n            <BannersRequestPut\n                requestCount={putRequestCount}\n                reqObject={reqObject.current}\n                responseDataHandle={putResponseDataHandle}\n                id={oldObj.id}></BannersRequestPut>\n            <BannersRequestDelete\n                requestCount={deleteRequestCount}\n                responseDataHandle={(respObj) => setVisible(0)}\n                id={oldObj.id}></BannersRequestDelete>\n        </Modal>\n    )\n}\n\nUpdateBanners.defaultProps = {\n    visible: false,\n    setVisible: (val) => console.log(val),\n    oldObj: {}\n}\n\nexport default UpdateBanners;\n","import React, { useState, useEffect, useRef } from 'react';\n\nimport { CustomList } from '../../base_components/lists/custom_list';\nimport { BannersRequestGet } from './banners_requests';\nimport UpdateBanners from './update_banners';\nimport { renderItem, judgeHasMore } from './banners_columns_label_config';\nimport { LoadMoreButton } from '../../base_components/load_more_button_conpoment';\n\n// 列表编辑 页面\n\nconst BannersList = ({ reloadListCount, setReloadListCount, requestParams, selectButtonOnClick }) => {\n\n    const [visible, setVisible] = useState(0);\n\n    const [hasMoreState, setHasMoreState] = useState(true);\n    const [loading, setLoading] = useState(false);\n    // 设置为true 开始request请求, 解决useState异步\n    const [requesting, setRequesting] = useState(false);\n    const reqParams = useRef({ page: 0 });\n\n    const [bannersData, setBannersData] = useState([]);\n    const [bannersRequestGetCount, setBannersRequestGetCount] = useState(0);\n\n    const [selectedObj, setSelectedObj] = useState({});\n\n    useEffect(() => {\n        if (hasMoreState && !loading && requesting) {\n            // 使用useEffect 触发request 解决 useState 异步\n            loadMore();\n            setRequesting(false);\n        }\n    }, [requesting, hasMoreState, loading])\n\n    useEffect(() => {\n        // 加载、更新或创建数据后 重新读取列表\n        reqParams.current = { ...requestParams };\n        reloadListsHandle();\n    }, [reloadListCount]);\n\n    const loadMore = () => {\n        // 读取更多列表\n        if (hasMoreState && !loading) {\n            setLoading(true);\n            setHasMoreState(false);\n            const current_page = Number.isInteger(reqParams.current.page) ? reqParams.current.page + 1 : 1;\n            reqParams.current = { ...reqParams.current, page: current_page };\n            console.log(reqParams.current);\n            setBannersRequestGetCount(bannersRequestGetCount + 1);\n        } else {\n            console.log('Error state: hasMore is ', hasMoreState, ', loading is ', loading);\n        }\n    };\n\n    const reloadListsHandle = () => {\n        // 重新读取数据\n        reqParams.current = { ...reqParams.current, page: 0 };\n        // console.log(reqParams.current);\n        setBannersData([]);\n        setHasMoreState(true);\n        setLoading(false);\n        setRequesting(true);    // useEffect 触发request请求，解决useState异步\n    };\n\n    const bannersGetResponse = (resp) => {\n        // console.log('resp process...');\n        setLoading(false);\n        if (Object.keys(resp).includes('code')\n            && resp.code === 1000\n            && Object.keys(resp).includes('results')\n        ) {\n            setBannersData(bannersData.concat(resp.results));\n            setHasMoreState(judgeHasMore(resp));   // 判断是否还有更多\n        } else {\n            console.log('Error: get data...');\n        }\n    };\n\n    return (\n        <div>\n            <BannersRequestGet requestCount={bannersRequestGetCount}\n                reqParams={reqParams.current}\n                responseDataHandle={bannersGetResponse}></BannersRequestGet>\n            <CustomList\n                header=\"Banners List\"\n                listData={bannersData}\n                visible={visible}\n                setVisible={setVisible}\n                randerItem={renderItem}\n                setSelectedItem={setSelectedObj}\n                selectButtonOnClick={selectButtonOnClick}\n            ></CustomList>\n\n            <UpdateBanners\n                visible={visible}\n                setVisible={setVisible}\n                oldObj={selectedObj}\n                reloadListCount={reloadListCount}\n                setReloadListCount={setReloadListCount}\n            ></UpdateBanners>\n\n            <LoadMoreButton hasMore={hasMoreState} onClick={loadMore}></LoadMoreButton>\n        </div>\n    );\n}\n\nBannersList.defaultProps = {\n    reloadListCount: 1,\n    setReloadListCount: (addedNum) => { console.log(addedNum); },\n    requestParams: { page: 0 },\n    selectButtonOnClick: null,\n}\n\nexport default BannersList;\n","import React, { useState, useEffect } from 'react';\n\nimport { formKeysLabelsObj } from './banners_columns_label_config';\n\n// 显示查询条件组件\n\nconst BannersQueryParams = ({ paramsObj={} }) => {\n  const [displayQueryFactorStr, setDisplayQueryFactorStr] = useState('');\n\n  useEffect(() => {\n    displayStr();\n  }, [paramsObj])\n\n  const displayStr = () => {\n    // 显示的查询条件 字符串\n    // let retDisplayStr = '查询条件:';\n    let retDisplayStr = '';\n    Object.keys(paramsObj).forEach(element => {\n      if (Object.keys(formKeysLabelsObj).includes(element)) {\n        // 只显示 formKeysLabelsObj 包含的key\n        const currentFactor = ' ' + formKeysLabelsObj[element] + ' = ' + paramsObj[element] + ';';\n        retDisplayStr = retDisplayStr + currentFactor\n      }\n    });\n    if (retDisplayStr.length > 2) {\n      retDisplayStr = '查询条件:' + retDisplayStr;\n      setDisplayQueryFactorStr(retDisplayStr);\n    } else {\n      console.log('查询条件为空')\n      setDisplayQueryFactorStr('');\n    }\n  }\n  return (\n    <div style={{ height: 'auto', width: '100%', padding: '0.1rem 0.2rem' }}>\n      {displayQueryFactorStr.length > 2\n        ? (<p>{displayQueryFactorStr}</p>)\n        : null}\n    </div>\n  )\n};\n\nexport default BannersQueryParams;\n","import React, { useState, useRef } from 'react';\n// import { navigate, Link } from 'gatsby';\nimport { Button, Row, Col, Space, Tooltip } from 'antd';\nimport { ReloadOutlined, SearchOutlined, LeftOutlined } from '@ant-design/icons';\n\nimport CreateBanners from './create_banners';\nimport BannersQueryDrawerForm from './banners_query_form';\nimport BannersList from './banners_list';\nimport BannersQueryParams from './banners_query_params_display';\n// Banners 入口组件\n\nconst BannersComponent = ({ selectButtonOnClick = null }) => {\n  const reqParams = useRef({ page: 0 });\n\n  const [reloadListCount, setReloadListCount] = useState(1);\n\n  const [drawerVisible, setDrawerVisible] = useState(false);\n\n  const [createBannersVisible, setCreateBannersVisible] = useState(false);\n\n  const queryHandle = (currentRequestParams) => {\n    // 查询操作\n    reqParams.current = { ...currentRequestParams };\n    // 触发重新读取数据\n    setReloadListCount(reloadListCount + 1)\n    // console.log('search...');\n  };\n\n  const initReloadList = () => {\n    // 刷新列表, 删除所有查询条件\n    reqParams.current = { page: 0 };\n    setReloadListCount(reloadListCount + 1);\n  }\n\n  return (\n    <div>\n      <Row>\n        <Col span={14}>\n          <Space>\n            {/* <Tooltip title=\"返回\">\n              <Link to=\"/logistic\"><LeftOutlined /></Link>\n            </Tooltip> */}\n            <h4>Banners</h4>\n            <Tooltip title=\"刷新\">\n              <Button onClick={initReloadList} shape=\"circle\" icon={<ReloadOutlined />}></Button>\n            </Tooltip>\n            <Tooltip title=\"搜索\">\n              <Button onClick={() => setDrawerVisible(true)} shape=\"circle\" icon={<SearchOutlined />}></Button>\n            </Tooltip>\n          </Space>\n        </Col>\n        <Col span={10}>\n          <div style={{ width: '100%', height: 'auto' }}>\n            {/* <Button style={{ float: 'right' }} type=\"link\" onClick={() => navigate('/sendexpressaccount')}>快递帐号设置</Button> */}\n            <Button style={{ float: 'right' }} type=\"link\" onClick={() => setCreateBannersVisible(1)}>新建</Button>\n          </div>\n        </Col>\n      </Row>\n      <Row>\n        <Col span={24}><BannersQueryParams paramsObj={reqParams.current}></BannersQueryParams></Col>\n      </Row>\n      <BannersQueryDrawerForm\n        visible={drawerVisible}\n        setVisible={setDrawerVisible}\n        queryHandle={queryHandle}\n      ></BannersQueryDrawerForm>\n\n      <BannersList\n        reloadListCount={reloadListCount}\n        setReloadListCount={setReloadListCount}\n        requestParams={reqParams.current}\n        selectButtonOnClick={selectButtonOnClick}\n      ></BannersList>\n\n      <CreateBanners\n        visible={createBannersVisible}\n        setVisible={setCreateBannersVisible}\n        reloadListCount={reloadListCount}\n        setReloadListCount={setReloadListCount}\n      ></CreateBanners>\n    </div>\n  )\n};\n\nexport default BannersComponent;\n","import React from \"react\";\n\nimport SiteLayout from '../components/site_layout';\nimport SEO from \"../components/seo\";\n\nimport BannersList from '../components/wx_store/banners';\n\nconst StoreManagePage = () => (\n  <SiteLayout>\n    <SEO title=\"WX Banner\" />\n    <BannersList></BannersList>\n  </SiteLayout>\n)\n\nexport default StoreManagePage;\n"],"sourceRoot":""}